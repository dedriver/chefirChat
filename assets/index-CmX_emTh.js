(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function o0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lf={exports:{}},tl={},uf={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function w1(){if(Uy)return je;Uy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function T(j){return j===null||typeof j!="object"?null:(j=w&&j[w]||j["@@iterator"],typeof j=="function"?j:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,M={};function b(j,J,Ee){this.props=j,this.context=J,this.refs=M,this.updater=Ee||R}b.prototype.isReactComponent={},b.prototype.setState=function(j,J){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,J,"setState")},b.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function U(){}U.prototype=b.prototype;function Z(j,J,Ee){this.props=j,this.context=J,this.refs=M,this.updater=Ee||R}var Q=Z.prototype=new U;Q.constructor=Z,C(Q,b.prototype),Q.isPureReactComponent=!0;var X=Array.isArray,L=Object.prototype.hasOwnProperty,te={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(j,J,Ee){var Me,Ne={},ze=null,Ze=null;if(J!=null)for(Me in J.ref!==void 0&&(Ze=J.ref),J.key!==void 0&&(ze=""+J.key),J)L.call(J,Me)&&!k.hasOwnProperty(Me)&&(Ne[Me]=J[Me]);var et=arguments.length-2;if(et===1)Ne.children=Ee;else if(1<et){for(var Fe=Array(et),ft=0;ft<et;ft++)Fe[ft]=arguments[ft+2];Ne.children=Fe}if(j&&j.defaultProps)for(Me in et=j.defaultProps,et)Ne[Me]===void 0&&(Ne[Me]=et[Me]);return{$$typeof:n,type:j,key:ze,ref:Ze,props:Ne,_owner:te.current}}function P(j,J){return{$$typeof:n,type:j.type,key:J,ref:j.ref,props:j.props,_owner:j._owner}}function D(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function V(j){var J={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Ee){return J[Ee]})}var B=/\/+/g;function x(j,J){return typeof j=="object"&&j!==null&&j.key!=null?V(""+j.key):J.toString(36)}function ht(j,J,Ee,Me,Ne){var ze=typeof j;(ze==="undefined"||ze==="boolean")&&(j=null);var Ze=!1;if(j===null)Ze=!0;else switch(ze){case"string":case"number":Ze=!0;break;case"object":switch(j.$$typeof){case n:case e:Ze=!0}}if(Ze)return Ze=j,Ne=Ne(Ze),j=Me===""?"."+x(Ze,0):Me,X(Ne)?(Ee="",j!=null&&(Ee=j.replace(B,"$&/")+"/"),ht(Ne,J,Ee,"",function(ft){return ft})):Ne!=null&&(D(Ne)&&(Ne=P(Ne,Ee+(!Ne.key||Ze&&Ze.key===Ne.key?"":(""+Ne.key).replace(B,"$&/")+"/")+j)),J.push(Ne)),1;if(Ze=0,Me=Me===""?".":Me+":",X(j))for(var et=0;et<j.length;et++){ze=j[et];var Fe=Me+x(ze,et);Ze+=ht(ze,J,Ee,Fe,Ne)}else if(Fe=T(j),typeof Fe=="function")for(j=Fe.call(j),et=0;!(ze=j.next()).done;)ze=ze.value,Fe=Me+x(ze,et++),Ze+=ht(ze,J,Ee,Fe,Ne);else if(ze==="object")throw J=String(j),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Ze}function Ke(j,J,Ee){if(j==null)return j;var Me=[],Ne=0;return ht(j,Me,"","",function(ze){return J.call(Ee,ze,Ne++)}),Me}function Ct(j){if(j._status===-1){var J=j._result;J=J(),J.then(function(Ee){(j._status===0||j._status===-1)&&(j._status=1,j._result=Ee)},function(Ee){(j._status===0||j._status===-1)&&(j._status=2,j._result=Ee)}),j._status===-1&&(j._status=0,j._result=J)}if(j._status===1)return j._result.default;throw j._result}var Qe={current:null},ue={transition:null},Ie={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:ue,ReactCurrentOwner:te};function de(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:Ke,forEach:function(j,J,Ee){Ke(j,function(){J.apply(this,arguments)},Ee)},count:function(j){var J=0;return Ke(j,function(){J++}),J},toArray:function(j){return Ke(j,function(J){return J})||[]},only:function(j){if(!D(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},je.Component=b,je.Fragment=t,je.Profiler=o,je.PureComponent=Z,je.StrictMode=i,je.Suspense=f,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,je.act=de,je.cloneElement=function(j,J,Ee){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Me=C({},j.props),Ne=j.key,ze=j.ref,Ze=j._owner;if(J!=null){if(J.ref!==void 0&&(ze=J.ref,Ze=te.current),J.key!==void 0&&(Ne=""+J.key),j.type&&j.type.defaultProps)var et=j.type.defaultProps;for(Fe in J)L.call(J,Fe)&&!k.hasOwnProperty(Fe)&&(Me[Fe]=J[Fe]===void 0&&et!==void 0?et[Fe]:J[Fe])}var Fe=arguments.length-2;if(Fe===1)Me.children=Ee;else if(1<Fe){et=Array(Fe);for(var ft=0;ft<Fe;ft++)et[ft]=arguments[ft+2];Me.children=et}return{$$typeof:n,type:j.type,key:Ne,ref:ze,props:Me,_owner:Ze}},je.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:a,_context:j},j.Consumer=j},je.createElement=S,je.createFactory=function(j){var J=S.bind(null,j);return J.type=j,J},je.createRef=function(){return{current:null}},je.forwardRef=function(j){return{$$typeof:d,render:j}},je.isValidElement=D,je.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:Ct}},je.memo=function(j,J){return{$$typeof:m,type:j,compare:J===void 0?null:J}},je.startTransition=function(j){var J=ue.transition;ue.transition={};try{j()}finally{ue.transition=J}},je.unstable_act=de,je.useCallback=function(j,J){return Qe.current.useCallback(j,J)},je.useContext=function(j){return Qe.current.useContext(j)},je.useDebugValue=function(){},je.useDeferredValue=function(j){return Qe.current.useDeferredValue(j)},je.useEffect=function(j,J){return Qe.current.useEffect(j,J)},je.useId=function(){return Qe.current.useId()},je.useImperativeHandle=function(j,J,Ee){return Qe.current.useImperativeHandle(j,J,Ee)},je.useInsertionEffect=function(j,J){return Qe.current.useInsertionEffect(j,J)},je.useLayoutEffect=function(j,J){return Qe.current.useLayoutEffect(j,J)},je.useMemo=function(j,J){return Qe.current.useMemo(j,J)},je.useReducer=function(j,J,Ee){return Qe.current.useReducer(j,J,Ee)},je.useRef=function(j){return Qe.current.useRef(j)},je.useState=function(j){return Qe.current.useState(j)},je.useSyncExternalStore=function(j,J,Ee){return Qe.current.useSyncExternalStore(j,J,Ee)},je.useTransition=function(){return Qe.current.useTransition()},je.version="18.3.1",je}var jy;function sh(){return jy||(jy=1,uf.exports=w1()),uf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy;function E1(){if(zy)return tl;zy=1;var n=sh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var v,w={},T=null,R=null;m!==void 0&&(T=""+m),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(R=f.ref);for(v in f)i.call(f,v)&&!a.hasOwnProperty(v)&&(w[v]=f[v]);if(d&&d.defaultProps)for(v in f=d.defaultProps,f)w[v]===void 0&&(w[v]=f[v]);return{$$typeof:e,type:d,key:T,ref:R,props:w,_owner:o.current}}return tl.Fragment=t,tl.jsx=u,tl.jsxs=u,tl}var By;function T1(){return By||(By=1,lf.exports=E1()),lf.exports}var ie=T1(),tc={},cf={exports:{}},bn={},hf={exports:{}},df={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y;function I1(){return $y||($y=1,function(n){function e(ue,Ie){var de=ue.length;ue.push(Ie);e:for(;0<de;){var j=de-1>>>1,J=ue[j];if(0<o(J,Ie))ue[j]=Ie,ue[de]=J,de=j;else break e}}function t(ue){return ue.length===0?null:ue[0]}function i(ue){if(ue.length===0)return null;var Ie=ue[0],de=ue.pop();if(de!==Ie){ue[0]=de;e:for(var j=0,J=ue.length,Ee=J>>>1;j<Ee;){var Me=2*(j+1)-1,Ne=ue[Me],ze=Me+1,Ze=ue[ze];if(0>o(Ne,de))ze<J&&0>o(Ze,Ne)?(ue[j]=Ze,ue[ze]=de,j=ze):(ue[j]=Ne,ue[Me]=de,j=Me);else if(ze<J&&0>o(Ze,de))ue[j]=Ze,ue[ze]=de,j=ze;else break e}}return Ie}function o(ue,Ie){var de=ue.sortIndex-Ie.sortIndex;return de!==0?de:ue.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],v=1,w=null,T=3,R=!1,C=!1,M=!1,b=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(ue){for(var Ie=t(m);Ie!==null;){if(Ie.callback===null)i(m);else if(Ie.startTime<=ue)i(m),Ie.sortIndex=Ie.expirationTime,e(f,Ie);else break;Ie=t(m)}}function X(ue){if(M=!1,Q(ue),!C)if(t(f)!==null)C=!0,Ct(L);else{var Ie=t(m);Ie!==null&&Qe(X,Ie.startTime-ue)}}function L(ue,Ie){C=!1,M&&(M=!1,U(S),S=-1),R=!0;var de=T;try{for(Q(Ie),w=t(f);w!==null&&(!(w.expirationTime>Ie)||ue&&!V());){var j=w.callback;if(typeof j=="function"){w.callback=null,T=w.priorityLevel;var J=j(w.expirationTime<=Ie);Ie=n.unstable_now(),typeof J=="function"?w.callback=J:w===t(f)&&i(f),Q(Ie)}else i(f);w=t(f)}if(w!==null)var Ee=!0;else{var Me=t(m);Me!==null&&Qe(X,Me.startTime-Ie),Ee=!1}return Ee}finally{w=null,T=de,R=!1}}var te=!1,k=null,S=-1,P=5,D=-1;function V(){return!(n.unstable_now()-D<P)}function B(){if(k!==null){var ue=n.unstable_now();D=ue;var Ie=!0;try{Ie=k(!0,ue)}finally{Ie?x():(te=!1,k=null)}}else te=!1}var x;if(typeof Z=="function")x=function(){Z(B)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,Ke=ht.port2;ht.port1.onmessage=B,x=function(){Ke.postMessage(null)}}else x=function(){b(B,0)};function Ct(ue){k=ue,te||(te=!0,x())}function Qe(ue,Ie){S=b(function(){ue(n.unstable_now())},Ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ue){ue.callback=null},n.unstable_continueExecution=function(){C||R||(C=!0,Ct(L))},n.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ue?Math.floor(1e3/ue):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ue){switch(T){case 1:case 2:case 3:var Ie=3;break;default:Ie=T}var de=T;T=Ie;try{return ue()}finally{T=de}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ue,Ie){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var de=T;T=ue;try{return Ie()}finally{T=de}},n.unstable_scheduleCallback=function(ue,Ie,de){var j=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?j+de:j):de=j,ue){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=de+J,ue={id:v++,callback:Ie,priorityLevel:ue,startTime:de,expirationTime:J,sortIndex:-1},de>j?(ue.sortIndex=de,e(m,ue),t(f)===null&&ue===t(m)&&(M?(U(S),S=-1):M=!0,Qe(X,de-j))):(ue.sortIndex=J,e(f,ue),C||R||(C=!0,Ct(L))),ue},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(ue){var Ie=T;return function(){var de=T;T=Ie;try{return ue.apply(this,arguments)}finally{T=de}}}}(df)),df}var Hy;function S1(){return Hy||(Hy=1,hf.exports=I1()),hf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function R1(){if(Wy)return bn;Wy=1;var n=sh(),e=S1();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function T(r){return f.call(w,r)?!0:f.call(v,r)?!1:m.test(r)?w[r]=!0:(v[r]=!0,!1)}function R(r,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function C(r,s,l,h){if(s===null||typeof s>"u"||R(r,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function M(r,s,l,h,p,y,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=y,this.removeEmptyString=E}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){b[r]=new M(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];b[s]=new M(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){b[r]=new M(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){b[r]=new M(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){b[r]=new M(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){b[r]=new M(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){b[r]=new M(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){b[r]=new M(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){b[r]=new M(r,5,!1,r.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function Z(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(U,Z);b[s]=new M(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(U,Z);b[s]=new M(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(U,Z);b[s]=new M(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){b[r]=new M(r,1,!1,r.toLowerCase(),null,!1,!1)}),b.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){b[r]=new M(r,1,!1,r.toLowerCase(),null,!0,!0)});function Q(r,s,l,h){var p=b.hasOwnProperty(s)?b[s]:null;(p!==null?p.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(C(s,l,p,h)&&(l=null),h||p===null?T(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):p.mustUseProperty?r[p.propertyName]=l===null?p.type===3?!1:"":l:(s=p.attributeName,h=p.attributeNamespace,l===null?r.removeAttribute(s):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?r.setAttributeNS(h,s,l):r.setAttribute(s,l))))}var X=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),te=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),V=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),Ct=Symbol.for("react.lazy"),Qe=Symbol.for("react.offscreen"),ue=Symbol.iterator;function Ie(r){return r===null||typeof r!="object"?null:(r=ue&&r[ue]||r["@@iterator"],typeof r=="function"?r:null)}var de=Object.assign,j;function J(r){if(j===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+r}var Ee=!1;function Me(r,s){if(!r||Ee)return"";Ee=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(G){var h=G}Reflect.construct(r,[],s)}else{try{s.call()}catch(G){h=G}r.call(s.prototype)}else{try{throw Error()}catch(G){h=G}r()}}catch(G){if(G&&h&&typeof G.stack=="string"){for(var p=G.stack.split(`
`),y=h.stack.split(`
`),E=p.length-1,A=y.length-1;1<=E&&0<=A&&p[E]!==y[A];)A--;for(;1<=E&&0<=A;E--,A--)if(p[E]!==y[A]){if(E!==1||A!==1)do if(E--,A--,0>A||p[E]!==y[A]){var N=`
`+p[E].replace(" at new "," at ");return r.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",r.displayName)),N}while(1<=E&&0<=A);break}}}finally{Ee=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?J(r):""}function Ne(r){switch(r.tag){case 5:return J(r.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return r=Me(r.type,!1),r;case 11:return r=Me(r.type.render,!1),r;case 1:return r=Me(r.type,!0),r;default:return""}}function ze(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case te:return"Portal";case P:return"Profiler";case S:return"StrictMode";case x:return"Suspense";case ht:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case V:return(r.displayName||"Context")+".Consumer";case D:return(r._context.displayName||"Context")+".Provider";case B:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ke:return s=r.displayName||null,s!==null?s:ze(r.type)||"Memo";case Ct:s=r._payload,r=r._init;try{return ze(r(s))}catch{}}return null}function Ze(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function et(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Fe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ft(r){var s=Fe(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(E){h=""+E,y.call(this,E)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Kn(r){r._valueTracker||(r._valueTracker=ft(r))}function Di(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return r&&(h=Fe(r)?r.checked?"true":"false":r.value),r=h,r!==l?(s.setValue(r),!0):!1}function sn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Yr(r,s){var l=s.checked;return de({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function bi(r,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=et(s.value!=null?s.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ni(r,s){s=s.checked,s!=null&&Q(r,"checked",s,!1)}function ks(r,s){Ni(r,s);var l=et(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Oi(r,s.type,l):s.hasOwnProperty("defaultValue")&&Oi(r,s.type,et(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function yo(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Oi(r,s,l){(s!=="number"||sn(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var ir=Array.isArray;function Wt(r,s,l,h){if(r=r.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=s.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&h&&(r[l].defaultSelected=!0)}else{for(l=""+et(l),s=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,h&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function sr(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return de({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Xr(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(ir(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:et(l)}}function kr(r,s){var l=et(s.value),h=et(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function Tn(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function lt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function St(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?lt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Ln,xs=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,p){MSApp.execUnsafeLocalFunction(function(){return r(s,l,h,p)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Ln=Ln||document.createElement("div"),Ln.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ln.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function qt(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var xr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dr=["Webkit","ms","Moz","O"];Object.keys(xr).forEach(function(r){Dr.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),xr[s]=xr[r]})});function Li(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||xr.hasOwnProperty(r)&&xr[r]?(""+s).trim():s+"px"}function Ds(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Li(l,s[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,p):r[l]=p}}var Mi=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function br(r,s){if(s){if(Mi[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Vi(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var or=null;function Fi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Jr=null,In=null,Mn=null;function ar(r){if(r=ja(r)){if(typeof Jr!="function")throw Error(t(280));var s=r.stateNode;s&&(s=gu(s),Jr(r.stateNode,r.type,s))}}function yn(r){In?Mn?Mn.push(r):Mn=[r]:In=r}function bs(){if(In){var r=In,s=Mn;if(Mn=In=null,ar(r),s)for(r=0;r<s.length;r++)ar(s[r])}}function Zr(r,s){return r(s)}function O(){}var z=!1;function K(r,s,l){if(z)return r(s,l);z=!0;try{return Zr(r,s,l)}finally{z=!1,(In!==null||Mn!==null)&&(O(),bs())}}function ee(r,s){var l=r.stateNode;if(l===null)return null;var h=gu(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var fe=!1;if(d)try{var ye={};Object.defineProperty(ye,"passive",{get:function(){fe=!0}}),window.addEventListener("test",ye,ye),window.removeEventListener("test",ye,ye)}catch{fe=!1}function Ce(r,s,l,h,p,y,E,A,N){var G=Array.prototype.slice.call(arguments,3);try{s.apply(l,G)}catch(oe){this.onError(oe)}}var pe=!1,we=null,ce=!1,xe=null,Ue={onError:function(r){pe=!0,we=r}};function it(r,s,l,h,p,y,E,A,N){pe=!1,we=null,Ce.apply(Ue,arguments)}function Rt(r,s,l,h,p,y,E,A,N){if(it.apply(this,arguments),pe){if(pe){var G=we;pe=!1,we=null}else throw Error(t(198));ce||(ce=!0,xe=G)}}function He(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function tt(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function st(r){if(He(r)!==r)throw Error(t(188))}function lr(r){var s=r.alternate;if(!s){if(s=He(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,h=s;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return st(p),r;if(y===h)return st(p),s;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var E=!1,A=p.child;A;){if(A===l){E=!0,l=p,h=y;break}if(A===h){E=!0,h=p,l=y;break}A=A.sibling}if(!E){for(A=y.child;A;){if(A===l){E=!0,l=y,h=p;break}if(A===h){E=!0,h=y,l=p;break}A=A.sibling}if(!E)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function ur(r){return r=lr(r),r!==null?on(r):null}function on(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=on(r);if(s!==null)return s;r=r.sibling}return null}var Gt=e.unstable_scheduleCallback,ei=e.unstable_cancelCallback,Nr=e.unstable_shouldYield,cr=e.unstable_requestPaint,ot=e.unstable_now,ti=e.unstable_getCurrentPriorityLevel,Ye=e.unstable_ImmediatePriority,pt=e.unstable_UserBlockingPriority,Kt=e.unstable_NormalPriority,hr=e.unstable_LowPriority,mt=e.unstable_IdlePriority,Sn=null,an=null;function vo(r){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Sn,r,void 0,(r.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:Kl,Sa=Math.log,Gl=Math.LN2;function Kl(r){return r>>>=0,r===0?32:31-(Sa(r)/Gl|0)|0}var _o=64,wo=4194304;function Ui(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ns(r,s){var l=r.pendingLanes;if(l===0)return 0;var h=0,p=r.suspendedLanes,y=r.pingedLanes,E=l&268435455;if(E!==0){var A=E&~p;A!==0?h=Ui(A):(y&=E,y!==0&&(h=Ui(y)))}else E=l&~p,E!==0?h=Ui(E):y!==0&&(h=Ui(y));if(h===0)return 0;if(s!==0&&s!==h&&!(s&p)&&(p=h&-h,y=s&-s,p>=y||p===16&&(y&4194240)!==0))return s;if(h&4&&(h|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)l=31-vn(s),p=1<<l,h|=r[l],s&=~p;return h}function Vh(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ni(r,s){for(var l=r.suspendedLanes,h=r.pingedLanes,p=r.expirationTimes,y=r.pendingLanes;0<y;){var E=31-vn(y),A=1<<E,N=p[E];N===-1?(!(A&l)||A&h)&&(p[E]=Vh(A,s)):N<=s&&(r.expiredLanes|=A),y&=~A}}function Vn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Os(){var r=_o;return _o<<=1,!(_o&4194240)&&(_o=64),r}function ji(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function zi(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-vn(s),r[s]=l}function ct(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var p=31-vn(l),y=1<<p;s[p]=0,h[p]=-1,r[p]=-1,l&=~y}}function Bi(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var h=31-vn(l),p=1<<h;p&s|r[h]&s&&(r[h]|=s),l&=~p}}var We=0;function $i(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Ql,Eo,Yl,Xl,Jl,Ra=!1,Or=[],Qt=null,dr=null,fr=null,Hi=new Map,Qn=new Map,Lr=[],Fh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zl(r,s){switch(r){case"focusin":case"focusout":Qt=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Hi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qn.delete(s.pointerId)}}function Rn(r,s,l,h,p,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},s!==null&&(s=ja(s),s!==null&&Eo(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function Uh(r,s,l,h,p){switch(s){case"focusin":return Qt=Rn(Qt,r,s,l,h,p),!0;case"dragenter":return dr=Rn(dr,r,s,l,h,p),!0;case"mouseover":return fr=Rn(fr,r,s,l,h,p),!0;case"pointerover":var y=p.pointerId;return Hi.set(y,Rn(Hi.get(y)||null,r,s,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,Qn.set(y,Rn(Qn.get(y)||null,r,s,l,h,p)),!0}return!1}function eu(r){var s=Us(r.target);if(s!==null){var l=He(s);if(l!==null){if(s=l.tag,s===13){if(s=tt(l),s!==null){r.blockedOn=s,Jl(r.priority,function(){Yl(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ri(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=To(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);or=h,l.target.dispatchEvent(h),or=null}else return s=ja(l),s!==null&&Eo(s),r.blockedOn=l,!1;s.shift()}return!0}function Ls(r,s,l){ri(r)&&l.delete(s)}function tu(){Ra=!1,Qt!==null&&ri(Qt)&&(Qt=null),dr!==null&&ri(dr)&&(dr=null),fr!==null&&ri(fr)&&(fr=null),Hi.forEach(Ls),Qn.forEach(Ls)}function pr(r,s){r.blockedOn===s&&(r.blockedOn=null,Ra||(Ra=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tu)))}function mr(r){function s(p){return pr(p,r)}if(0<Or.length){pr(Or[0],r);for(var l=1;l<Or.length;l++){var h=Or[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Qt!==null&&pr(Qt,r),dr!==null&&pr(dr,r),fr!==null&&pr(fr,r),Hi.forEach(s),Qn.forEach(s),l=0;l<Lr.length;l++)h=Lr[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<Lr.length&&(l=Lr[0],l.blockedOn===null);)eu(l),l.blockedOn===null&&Lr.shift()}var ii=X.ReactCurrentBatchConfig,Wi=!0;function _t(r,s,l,h){var p=We,y=ii.transition;ii.transition=null;try{We=1,Pa(r,s,l,h)}finally{We=p,ii.transition=y}}function jh(r,s,l,h){var p=We,y=ii.transition;ii.transition=null;try{We=4,Pa(r,s,l,h)}finally{We=p,ii.transition=y}}function Pa(r,s,l,h){if(Wi){var p=To(r,s,l,h);if(p===null)Xh(r,s,h,Ms,l),Zl(r,h);else if(Uh(p,r,s,l,h))h.stopPropagation();else if(Zl(r,h),s&4&&-1<Fh.indexOf(r)){for(;p!==null;){var y=ja(p);if(y!==null&&Ql(y),y=To(r,s,l,h),y===null&&Xh(r,s,h,Ms,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else Xh(r,s,h,null,l)}}var Ms=null;function To(r,s,l,h){if(Ms=null,r=Fi(h),r=Us(r),r!==null)if(s=He(r),s===null)r=null;else if(l=s.tag,l===13){if(r=tt(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Ms=r,null}function Ca(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ti()){case Ye:return 1;case pt:return 4;case Kt:case hr:return 16;case mt:return 536870912;default:return 16}default:return 16}}var Fn=null,Io=null,Pn=null;function Aa(){if(Pn)return Pn;var r,s=Io,l=s.length,h,p="value"in Fn?Fn.value:Fn.textContent,y=p.length;for(r=0;r<l&&s[r]===p[r];r++);var E=l-r;for(h=1;h<=E&&s[l-h]===p[y-h];h++);return Pn=p.slice(r,1<h?1-h:void 0)}function So(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Mr(){return!0}function ka(){return!1}function Yt(r){function s(l,h,p,y,E){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(l=r[A],this[A]=l?l(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Mr:ka,this.isPropagationStopped=ka,this}return de(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),s}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ro=Yt(gr),Vr=de({},gr,{view:0,detail:0}),zh=Yt(Vr),Po,si,qi,Vs=de({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==qi&&(qi&&r.type==="mousemove"?(Po=r.screenX-qi.screenX,si=r.screenY-qi.screenY):si=Po=0,qi=r),Po)},movementY:function(r){return"movementY"in r?r.movementY:si}}),Co=Yt(Vs),xa=de({},Vs,{dataTransfer:0}),nu=Yt(xa),Ao=de({},Vr,{relatedTarget:0}),ko=Yt(Ao),ru=de({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),oi=Yt(ru),iu=de({},gr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),su=Yt(iu),ou=de({},gr,{data:0}),Da=Yt(ou),xo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=au[r])?!!s[r]:!1}function Fr(){return lu}var c=de({},Vr,{key:function(r){if(r.key){var s=xo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=So(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?_n[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fr,charCode:function(r){return r.type==="keypress"?So(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?So(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),g=Yt(c),_=de({},Vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Yt(_),$=de({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fr}),Y=Yt($),he=de({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ut=Yt(he),Lt=de({},Vs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Xe=Yt(Lt),Ut=[9,13,27,32],Dt=d&&"CompositionEvent"in window,Yn=null;d&&"documentMode"in document&&(Yn=document.documentMode);var Un=d&&"TextEvent"in window&&!Yn,Fs=d&&(!Dt||Yn&&8<Yn&&11>=Yn),Do=" ",Nm=!1;function Om(r,s){switch(r){case"keyup":return Ut.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var bo=!1;function yT(r,s){switch(r){case"compositionend":return Lm(s);case"keypress":return s.which!==32?null:(Nm=!0,Do);case"textInput":return r=s.data,r===Do&&Nm?null:r;default:return null}}function vT(r,s){if(bo)return r==="compositionend"||!Dt&&Om(r,s)?(r=Aa(),Pn=Io=Fn=null,bo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Fs&&s.locale!=="ko"?null:s.data;default:return null}}var _T={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!_T[r.type]:s==="textarea"}function Vm(r,s,l,h){yn(h),s=fu(s,"onChange"),0<s.length&&(l=new Ro("onChange","change",null,l,h),r.push({event:l,listeners:s}))}var ba=null,Na=null;function wT(r){tg(r,0)}function uu(r){var s=Vo(r);if(Di(s))return r}function ET(r,s){if(r==="change")return s}var Fm=!1;if(d){var Bh;if(d){var $h="oninput"in document;if(!$h){var Um=document.createElement("div");Um.setAttribute("oninput","return;"),$h=typeof Um.oninput=="function"}Bh=$h}else Bh=!1;Fm=Bh&&(!document.documentMode||9<document.documentMode)}function jm(){ba&&(ba.detachEvent("onpropertychange",zm),Na=ba=null)}function zm(r){if(r.propertyName==="value"&&uu(Na)){var s=[];Vm(s,Na,r,Fi(r)),K(wT,s)}}function TT(r,s,l){r==="focusin"?(jm(),ba=s,Na=l,ba.attachEvent("onpropertychange",zm)):r==="focusout"&&jm()}function IT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return uu(Na)}function ST(r,s){if(r==="click")return uu(s)}function RT(r,s){if(r==="input"||r==="change")return uu(s)}function PT(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var yr=typeof Object.is=="function"?Object.is:PT;function Oa(r,s){if(yr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(s,p)||!yr(r[p],s[p]))return!1}return!0}function Bm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function $m(r,s){var l=Bm(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=s&&h>=s)return{node:l,offset:s-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Bm(l)}}function Hm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Hm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Wm(){for(var r=window,s=sn();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=sn(r.document)}return s}function Hh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function CT(r){var s=Wm(),l=r.focusedElem,h=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&Hm(l.ownerDocument.documentElement,l)){if(h!==null&&Hh(l)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!r.extend&&y>h&&(p=h,h=y,y=p),p=$m(l,y);var E=$m(l,h);p&&E&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),r.removeAllRanges(),y>h?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var AT=d&&"documentMode"in document&&11>=document.documentMode,No=null,Wh=null,La=null,qh=!1;function qm(r,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;qh||No==null||No!==sn(h)||(h=No,"selectionStart"in h&&Hh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),La&&Oa(La,h)||(La=h,h=fu(Wh,"onSelect"),0<h.length&&(s=new Ro("onSelect","select",null,s,l),r.push({event:s,listeners:h}),s.target=No)))}function cu(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Oo={animationend:cu("Animation","AnimationEnd"),animationiteration:cu("Animation","AnimationIteration"),animationstart:cu("Animation","AnimationStart"),transitionend:cu("Transition","TransitionEnd")},Gh={},Gm={};d&&(Gm=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function hu(r){if(Gh[r])return Gh[r];if(!Oo[r])return r;var s=Oo[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Gm)return Gh[r]=s[l];return r}var Km=hu("animationend"),Qm=hu("animationiteration"),Ym=hu("animationstart"),Xm=hu("transitionend"),Jm=new Map,Zm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(r,s){Jm.set(r,s),a(s,[r])}for(var Kh=0;Kh<Zm.length;Kh++){var Qh=Zm[Kh],kT=Qh.toLowerCase(),xT=Qh[0].toUpperCase()+Qh.slice(1);Gi(kT,"on"+xT)}Gi(Km,"onAnimationEnd"),Gi(Qm,"onAnimationIteration"),Gi(Ym,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(Xm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function eg(r,s,l){var h=r.type||"unknown-event";r.currentTarget=l,Rt(h,s,void 0,r),r.currentTarget=null}function tg(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],p=h.event;h=h.listeners;e:{var y=void 0;if(s)for(var E=h.length-1;0<=E;E--){var A=h[E],N=A.instance,G=A.currentTarget;if(A=A.listener,N!==y&&p.isPropagationStopped())break e;eg(p,A,G),y=N}else for(E=0;E<h.length;E++){if(A=h[E],N=A.instance,G=A.currentTarget,A=A.listener,N!==y&&p.isPropagationStopped())break e;eg(p,A,G),y=N}}}if(ce)throw r=xe,ce=!1,xe=null,r}function gt(r,s){var l=s[rd];l===void 0&&(l=s[rd]=new Set);var h=r+"__bubble";l.has(h)||(ng(s,r,2,!1),l.add(h))}function Yh(r,s,l){var h=0;s&&(h|=4),ng(l,r,h,s)}var du="_reactListening"+Math.random().toString(36).slice(2);function Va(r){if(!r[du]){r[du]=!0,i.forEach(function(l){l!=="selectionchange"&&(DT.has(l)||Yh(l,!1,r),Yh(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[du]||(s[du]=!0,Yh("selectionchange",!1,s))}}function ng(r,s,l,h){switch(Ca(s)){case 1:var p=_t;break;case 4:p=jh;break;default:p=Pa}l=p.bind(null,s,l,r),p=void 0,!fe||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),h?p!==void 0?r.addEventListener(s,l,{capture:!0,passive:p}):r.addEventListener(s,l,!0):p!==void 0?r.addEventListener(s,l,{passive:p}):r.addEventListener(s,l,!1)}function Xh(r,s,l,h,p){var y=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var A=h.stateNode.containerInfo;if(A===p||A.nodeType===8&&A.parentNode===p)break;if(E===4)for(E=h.return;E!==null;){var N=E.tag;if((N===3||N===4)&&(N=E.stateNode.containerInfo,N===p||N.nodeType===8&&N.parentNode===p))return;E=E.return}for(;A!==null;){if(E=Us(A),E===null)return;if(N=E.tag,N===5||N===6){h=y=E;continue e}A=A.parentNode}}h=h.return}K(function(){var G=y,oe=Fi(l),ae=[];e:{var se=Jm.get(r);if(se!==void 0){var me=Ro,Te=r;switch(r){case"keypress":if(So(l)===0)break e;case"keydown":case"keyup":me=g;break;case"focusin":Te="focus",me=ko;break;case"focusout":Te="blur",me=ko;break;case"beforeblur":case"afterblur":me=ko;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=Co;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Y;break;case Km:case Qm:case Ym:me=oi;break;case Xm:me=ut;break;case"scroll":me=zh;break;case"wheel":me=Xe;break;case"copy":case"cut":case"paste":me=su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=I}var Se=(s&4)!==0,At=!Se&&r==="scroll",W=Se?se!==null?se+"Capture":null:se;Se=[];for(var F=G,q;F!==null;){q=F;var le=q.stateNode;if(q.tag===5&&le!==null&&(q=le,W!==null&&(le=ee(F,W),le!=null&&Se.push(Fa(F,le,q)))),At)break;F=F.return}0<Se.length&&(se=new me(se,Te,null,l,oe),ae.push({event:se,listeners:Se}))}}if(!(s&7)){e:{if(se=r==="mouseover"||r==="pointerover",me=r==="mouseout"||r==="pointerout",se&&l!==or&&(Te=l.relatedTarget||l.fromElement)&&(Us(Te)||Te[ai]))break e;if((me||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,me?(Te=l.relatedTarget||l.toElement,me=G,Te=Te?Us(Te):null,Te!==null&&(At=He(Te),Te!==At||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(me=null,Te=G),me!==Te)){if(Se=Co,le="onMouseLeave",W="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(Se=I,le="onPointerLeave",W="onPointerEnter",F="pointer"),At=me==null?se:Vo(me),q=Te==null?se:Vo(Te),se=new Se(le,F+"leave",me,l,oe),se.target=At,se.relatedTarget=q,le=null,Us(oe)===G&&(Se=new Se(W,F+"enter",Te,l,oe),Se.target=q,Se.relatedTarget=At,le=Se),At=le,me&&Te)t:{for(Se=me,W=Te,F=0,q=Se;q;q=Lo(q))F++;for(q=0,le=W;le;le=Lo(le))q++;for(;0<F-q;)Se=Lo(Se),F--;for(;0<q-F;)W=Lo(W),q--;for(;F--;){if(Se===W||W!==null&&Se===W.alternate)break t;Se=Lo(Se),W=Lo(W)}Se=null}else Se=null;me!==null&&rg(ae,se,me,Se,!1),Te!==null&&At!==null&&rg(ae,At,Te,Se,!0)}}e:{if(se=G?Vo(G):window,me=se.nodeName&&se.nodeName.toLowerCase(),me==="select"||me==="input"&&se.type==="file")var Re=ET;else if(Mm(se))if(Fm)Re=RT;else{Re=IT;var Ae=TT}else(me=se.nodeName)&&me.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Re=ST);if(Re&&(Re=Re(r,G))){Vm(ae,Re,l,oe);break e}Ae&&Ae(r,se,G),r==="focusout"&&(Ae=se._wrapperState)&&Ae.controlled&&se.type==="number"&&Oi(se,"number",se.value)}switch(Ae=G?Vo(G):window,r){case"focusin":(Mm(Ae)||Ae.contentEditable==="true")&&(No=Ae,Wh=G,La=null);break;case"focusout":La=Wh=No=null;break;case"mousedown":qh=!0;break;case"contextmenu":case"mouseup":case"dragend":qh=!1,qm(ae,l,oe);break;case"selectionchange":if(AT)break;case"keydown":case"keyup":qm(ae,l,oe)}var ke;if(Dt)e:{switch(r){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else bo?Om(r,l)&&(De="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(De="onCompositionStart");De&&(Fs&&l.locale!=="ko"&&(bo||De!=="onCompositionStart"?De==="onCompositionEnd"&&bo&&(ke=Aa()):(Fn=oe,Io="value"in Fn?Fn.value:Fn.textContent,bo=!0)),Ae=fu(G,De),0<Ae.length&&(De=new Da(De,r,null,l,oe),ae.push({event:De,listeners:Ae}),ke?De.data=ke:(ke=Lm(l),ke!==null&&(De.data=ke)))),(ke=Un?yT(r,l):vT(r,l))&&(G=fu(G,"onBeforeInput"),0<G.length&&(oe=new Da("onBeforeInput","beforeinput",null,l,oe),ae.push({event:oe,listeners:G}),oe.data=ke))}tg(ae,s)})}function Fa(r,s,l){return{instance:r,listener:s,currentTarget:l}}function fu(r,s){for(var l=s+"Capture",h=[];r!==null;){var p=r,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=ee(r,l),y!=null&&h.unshift(Fa(r,y,p)),y=ee(r,s),y!=null&&h.push(Fa(r,y,p))),r=r.return}return h}function Lo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function rg(r,s,l,h,p){for(var y=s._reactName,E=[];l!==null&&l!==h;){var A=l,N=A.alternate,G=A.stateNode;if(N!==null&&N===h)break;A.tag===5&&G!==null&&(A=G,p?(N=ee(l,y),N!=null&&E.unshift(Fa(l,N,A))):p||(N=ee(l,y),N!=null&&E.push(Fa(l,N,A)))),l=l.return}E.length!==0&&r.push({event:s,listeners:E})}var bT=/\r\n?/g,NT=/\u0000|\uFFFD/g;function ig(r){return(typeof r=="string"?r:""+r).replace(bT,`
`).replace(NT,"")}function pu(r,s,l){if(s=ig(s),ig(r)!==s&&l)throw Error(t(425))}function mu(){}var Jh=null,Zh=null;function ed(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var td=typeof setTimeout=="function"?setTimeout:void 0,OT=typeof clearTimeout=="function"?clearTimeout:void 0,sg=typeof Promise=="function"?Promise:void 0,LT=typeof queueMicrotask=="function"?queueMicrotask:typeof sg<"u"?function(r){return sg.resolve(null).then(r).catch(MT)}:td;function MT(r){setTimeout(function(){throw r})}function nd(r,s){var l=s,h=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){r.removeChild(p),mr(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);mr(s)}function Ki(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function og(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var Mo=Math.random().toString(36).slice(2),Ur="__reactFiber$"+Mo,Ua="__reactProps$"+Mo,ai="__reactContainer$"+Mo,rd="__reactEvents$"+Mo,VT="__reactListeners$"+Mo,FT="__reactHandles$"+Mo;function Us(r){var s=r[Ur];if(s)return s;for(var l=r.parentNode;l;){if(s=l[ai]||l[Ur]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=og(r);r!==null;){if(l=r[Ur])return l;r=og(r)}return s}r=l,l=r.parentNode}return null}function ja(r){return r=r[Ur]||r[ai],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Vo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function gu(r){return r[Ua]||null}var id=[],Fo=-1;function Qi(r){return{current:r}}function yt(r){0>Fo||(r.current=id[Fo],id[Fo]=null,Fo--)}function dt(r,s){Fo++,id[Fo]=r.current,r.current=s}var Yi={},ln=Qi(Yi),Cn=Qi(!1),js=Yi;function Uo(r,s){var l=r.type.contextTypes;if(!l)return Yi;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=s[y];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=p),p}function An(r){return r=r.childContextTypes,r!=null}function yu(){yt(Cn),yt(ln)}function ag(r,s,l){if(ln.current!==Yi)throw Error(t(168));dt(ln,s),dt(Cn,l)}function lg(r,s,l){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in s))throw Error(t(108,Ze(r)||"Unknown",p));return de({},l,h)}function vu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Yi,js=ln.current,dt(ln,r),dt(Cn,Cn.current),!0}function ug(r,s,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=lg(r,s,js),h.__reactInternalMemoizedMergedChildContext=r,yt(Cn),yt(ln),dt(ln,r)):yt(Cn),dt(Cn,l)}var li=null,_u=!1,sd=!1;function cg(r){li===null?li=[r]:li.push(r)}function UT(r){_u=!0,cg(r)}function Xi(){if(!sd&&li!==null){sd=!0;var r=0,s=We;try{var l=li;for(We=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}li=null,_u=!1}catch(p){throw li!==null&&(li=li.slice(r+1)),Gt(Ye,Xi),p}finally{We=s,sd=!1}}return null}var jo=[],zo=0,wu=null,Eu=0,Xn=[],Jn=0,zs=null,ui=1,ci="";function Bs(r,s){jo[zo++]=Eu,jo[zo++]=wu,wu=r,Eu=s}function hg(r,s,l){Xn[Jn++]=ui,Xn[Jn++]=ci,Xn[Jn++]=zs,zs=r;var h=ui;r=ci;var p=32-vn(h)-1;h&=~(1<<p),l+=1;var y=32-vn(s)+p;if(30<y){var E=p-p%5;y=(h&(1<<E)-1).toString(32),h>>=E,p-=E,ui=1<<32-vn(s)+p|l<<p|h,ci=y+r}else ui=1<<y|l<<p|h,ci=r}function od(r){r.return!==null&&(Bs(r,1),hg(r,1,0))}function ad(r){for(;r===wu;)wu=jo[--zo],jo[zo]=null,Eu=jo[--zo],jo[zo]=null;for(;r===zs;)zs=Xn[--Jn],Xn[Jn]=null,ci=Xn[--Jn],Xn[Jn]=null,ui=Xn[--Jn],Xn[Jn]=null}var jn=null,zn=null,wt=!1,vr=null;function dg(r,s){var l=nr(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function fg(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,jn=r,zn=Ki(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,jn=r,zn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=zs!==null?{id:ui,overflow:ci}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=nr(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,jn=r,zn=null,!0):!1;default:return!1}}function ld(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ud(r){if(wt){var s=zn;if(s){var l=s;if(!fg(r,s)){if(ld(r))throw Error(t(418));s=Ki(l.nextSibling);var h=jn;s&&fg(r,s)?dg(h,l):(r.flags=r.flags&-4097|2,wt=!1,jn=r)}}else{if(ld(r))throw Error(t(418));r.flags=r.flags&-4097|2,wt=!1,jn=r}}}function pg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;jn=r}function Tu(r){if(r!==jn)return!1;if(!wt)return pg(r),wt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!ed(r.type,r.memoizedProps)),s&&(s=zn)){if(ld(r))throw mg(),Error(t(418));for(;s;)dg(r,s),s=Ki(s.nextSibling)}if(pg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){zn=Ki(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}zn=null}}else zn=jn?Ki(r.stateNode.nextSibling):null;return!0}function mg(){for(var r=zn;r;)r=Ki(r.nextSibling)}function Bo(){zn=jn=null,wt=!1}function cd(r){vr===null?vr=[r]:vr.push(r)}var jT=X.ReactCurrentBatchConfig;function za(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var p=h,y=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(E){var A=p.refs;E===null?delete A[y]:A[y]=E},s._stringRef=y,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function Iu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function gg(r){var s=r._init;return s(r._payload)}function yg(r){function s(W,F){if(r){var q=W.deletions;q===null?(W.deletions=[F],W.flags|=16):q.push(F)}}function l(W,F){if(!r)return null;for(;F!==null;)s(W,F),F=F.sibling;return null}function h(W,F){for(W=new Map;F!==null;)F.key!==null?W.set(F.key,F):W.set(F.index,F),F=F.sibling;return W}function p(W,F){return W=ss(W,F),W.index=0,W.sibling=null,W}function y(W,F,q){return W.index=q,r?(q=W.alternate,q!==null?(q=q.index,q<F?(W.flags|=2,F):q):(W.flags|=2,F)):(W.flags|=1048576,F)}function E(W){return r&&W.alternate===null&&(W.flags|=2),W}function A(W,F,q,le){return F===null||F.tag!==6?(F=tf(q,W.mode,le),F.return=W,F):(F=p(F,q),F.return=W,F)}function N(W,F,q,le){var Re=q.type;return Re===k?oe(W,F,q.props.children,le,q.key):F!==null&&(F.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ct&&gg(Re)===F.type)?(le=p(F,q.props),le.ref=za(W,F,q),le.return=W,le):(le=Gu(q.type,q.key,q.props,null,W.mode,le),le.ref=za(W,F,q),le.return=W,le)}function G(W,F,q,le){return F===null||F.tag!==4||F.stateNode.containerInfo!==q.containerInfo||F.stateNode.implementation!==q.implementation?(F=nf(q,W.mode,le),F.return=W,F):(F=p(F,q.children||[]),F.return=W,F)}function oe(W,F,q,le,Re){return F===null||F.tag!==7?(F=Ys(q,W.mode,le,Re),F.return=W,F):(F=p(F,q),F.return=W,F)}function ae(W,F,q){if(typeof F=="string"&&F!==""||typeof F=="number")return F=tf(""+F,W.mode,q),F.return=W,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case L:return q=Gu(F.type,F.key,F.props,null,W.mode,q),q.ref=za(W,null,F),q.return=W,q;case te:return F=nf(F,W.mode,q),F.return=W,F;case Ct:var le=F._init;return ae(W,le(F._payload),q)}if(ir(F)||Ie(F))return F=Ys(F,W.mode,q,null),F.return=W,F;Iu(W,F)}return null}function se(W,F,q,le){var Re=F!==null?F.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Re!==null?null:A(W,F,""+q,le);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case L:return q.key===Re?N(W,F,q,le):null;case te:return q.key===Re?G(W,F,q,le):null;case Ct:return Re=q._init,se(W,F,Re(q._payload),le)}if(ir(q)||Ie(q))return Re!==null?null:oe(W,F,q,le,null);Iu(W,q)}return null}function me(W,F,q,le,Re){if(typeof le=="string"&&le!==""||typeof le=="number")return W=W.get(q)||null,A(F,W,""+le,Re);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case L:return W=W.get(le.key===null?q:le.key)||null,N(F,W,le,Re);case te:return W=W.get(le.key===null?q:le.key)||null,G(F,W,le,Re);case Ct:var Ae=le._init;return me(W,F,q,Ae(le._payload),Re)}if(ir(le)||Ie(le))return W=W.get(q)||null,oe(F,W,le,Re,null);Iu(F,le)}return null}function Te(W,F,q,le){for(var Re=null,Ae=null,ke=F,De=F=0,Bt=null;ke!==null&&De<q.length;De++){ke.index>De?(Bt=ke,ke=null):Bt=ke.sibling;var rt=se(W,ke,q[De],le);if(rt===null){ke===null&&(ke=Bt);break}r&&ke&&rt.alternate===null&&s(W,ke),F=y(rt,F,De),Ae===null?Re=rt:Ae.sibling=rt,Ae=rt,ke=Bt}if(De===q.length)return l(W,ke),wt&&Bs(W,De),Re;if(ke===null){for(;De<q.length;De++)ke=ae(W,q[De],le),ke!==null&&(F=y(ke,F,De),Ae===null?Re=ke:Ae.sibling=ke,Ae=ke);return wt&&Bs(W,De),Re}for(ke=h(W,ke);De<q.length;De++)Bt=me(ke,W,De,q[De],le),Bt!==null&&(r&&Bt.alternate!==null&&ke.delete(Bt.key===null?De:Bt.key),F=y(Bt,F,De),Ae===null?Re=Bt:Ae.sibling=Bt,Ae=Bt);return r&&ke.forEach(function(os){return s(W,os)}),wt&&Bs(W,De),Re}function Se(W,F,q,le){var Re=Ie(q);if(typeof Re!="function")throw Error(t(150));if(q=Re.call(q),q==null)throw Error(t(151));for(var Ae=Re=null,ke=F,De=F=0,Bt=null,rt=q.next();ke!==null&&!rt.done;De++,rt=q.next()){ke.index>De?(Bt=ke,ke=null):Bt=ke.sibling;var os=se(W,ke,rt.value,le);if(os===null){ke===null&&(ke=Bt);break}r&&ke&&os.alternate===null&&s(W,ke),F=y(os,F,De),Ae===null?Re=os:Ae.sibling=os,Ae=os,ke=Bt}if(rt.done)return l(W,ke),wt&&Bs(W,De),Re;if(ke===null){for(;!rt.done;De++,rt=q.next())rt=ae(W,rt.value,le),rt!==null&&(F=y(rt,F,De),Ae===null?Re=rt:Ae.sibling=rt,Ae=rt);return wt&&Bs(W,De),Re}for(ke=h(W,ke);!rt.done;De++,rt=q.next())rt=me(ke,W,De,rt.value,le),rt!==null&&(r&&rt.alternate!==null&&ke.delete(rt.key===null?De:rt.key),F=y(rt,F,De),Ae===null?Re=rt:Ae.sibling=rt,Ae=rt);return r&&ke.forEach(function(_1){return s(W,_1)}),wt&&Bs(W,De),Re}function At(W,F,q,le){if(typeof q=="object"&&q!==null&&q.type===k&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case L:e:{for(var Re=q.key,Ae=F;Ae!==null;){if(Ae.key===Re){if(Re=q.type,Re===k){if(Ae.tag===7){l(W,Ae.sibling),F=p(Ae,q.props.children),F.return=W,W=F;break e}}else if(Ae.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ct&&gg(Re)===Ae.type){l(W,Ae.sibling),F=p(Ae,q.props),F.ref=za(W,Ae,q),F.return=W,W=F;break e}l(W,Ae);break}else s(W,Ae);Ae=Ae.sibling}q.type===k?(F=Ys(q.props.children,W.mode,le,q.key),F.return=W,W=F):(le=Gu(q.type,q.key,q.props,null,W.mode,le),le.ref=za(W,F,q),le.return=W,W=le)}return E(W);case te:e:{for(Ae=q.key;F!==null;){if(F.key===Ae)if(F.tag===4&&F.stateNode.containerInfo===q.containerInfo&&F.stateNode.implementation===q.implementation){l(W,F.sibling),F=p(F,q.children||[]),F.return=W,W=F;break e}else{l(W,F);break}else s(W,F);F=F.sibling}F=nf(q,W.mode,le),F.return=W,W=F}return E(W);case Ct:return Ae=q._init,At(W,F,Ae(q._payload),le)}if(ir(q))return Te(W,F,q,le);if(Ie(q))return Se(W,F,q,le);Iu(W,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,F!==null&&F.tag===6?(l(W,F.sibling),F=p(F,q),F.return=W,W=F):(l(W,F),F=tf(q,W.mode,le),F.return=W,W=F),E(W)):l(W,F)}return At}var $o=yg(!0),vg=yg(!1),Su=Qi(null),Ru=null,Ho=null,hd=null;function dd(){hd=Ho=Ru=null}function fd(r){var s=Su.current;yt(Su),r._currentValue=s}function pd(r,s,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===l)break;r=r.return}}function Wo(r,s){Ru=r,hd=Ho=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(kn=!0),r.firstContext=null)}function Zn(r){var s=r._currentValue;if(hd!==r)if(r={context:r,memoizedValue:s,next:null},Ho===null){if(Ru===null)throw Error(t(308));Ho=r,Ru.dependencies={lanes:0,firstContext:r}}else Ho=Ho.next=r;return s}var $s=null;function md(r){$s===null?$s=[r]:$s.push(r)}function _g(r,s,l,h){var p=s.interleaved;return p===null?(l.next=l,md(s)):(l.next=p.next,p.next=l),s.interleaved=l,hi(r,h)}function hi(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Ji=!1;function gd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function di(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Zi(r,s,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,nt&2){var p=h.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),h.pending=s,hi(r,l)}return p=h.interleaved,p===null?(s.next=s,md(h)):(s.next=p.next,p.next=s),h.interleaved=s,hi(r,l)}function Pu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,Bi(r,l)}}function Eg(r,s){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var E={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=E:y=y.next=E,l=l.next}while(l!==null);y===null?p=y=s:y=y.next=s}else p=y=s;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function Cu(r,s,l,h){var p=r.updateQueue;Ji=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,A=p.shared.pending;if(A!==null){p.shared.pending=null;var N=A,G=N.next;N.next=null,E===null?y=G:E.next=G,E=N;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,A=oe.lastBaseUpdate,A!==E&&(A===null?oe.firstBaseUpdate=G:A.next=G,oe.lastBaseUpdate=N))}if(y!==null){var ae=p.baseState;E=0,oe=G=N=null,A=y;do{var se=A.lane,me=A.eventTime;if((h&se)===se){oe!==null&&(oe=oe.next={eventTime:me,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Te=r,Se=A;switch(se=s,me=l,Se.tag){case 1:if(Te=Se.payload,typeof Te=="function"){ae=Te.call(me,ae,se);break e}ae=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Se.payload,se=typeof Te=="function"?Te.call(me,ae,se):Te,se==null)break e;ae=de({},ae,se);break e;case 2:Ji=!0}}A.callback!==null&&A.lane!==0&&(r.flags|=64,se=p.effects,se===null?p.effects=[A]:se.push(A))}else me={eventTime:me,lane:se,tag:A.tag,payload:A.payload,callback:A.callback,next:null},oe===null?(G=oe=me,N=ae):oe=oe.next=me,E|=se;if(A=A.next,A===null){if(A=p.shared.pending,A===null)break;se=A,A=se.next,se.next=null,p.lastBaseUpdate=se,p.shared.pending=null}}while(!0);if(oe===null&&(N=ae),p.baseState=N,p.firstBaseUpdate=G,p.lastBaseUpdate=oe,s=p.shared.interleaved,s!==null){p=s;do E|=p.lane,p=p.next;while(p!==s)}else y===null&&(p.shared.lanes=0);qs|=E,r.lanes=E,r.memoizedState=ae}}function Tg(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Ba={},jr=Qi(Ba),$a=Qi(Ba),Ha=Qi(Ba);function Hs(r){if(r===Ba)throw Error(t(174));return r}function yd(r,s){switch(dt(Ha,s),dt($a,r),dt(jr,Ba),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:St(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=St(s,r)}yt(jr),dt(jr,s)}function qo(){yt(jr),yt($a),yt(Ha)}function Ig(r){Hs(Ha.current);var s=Hs(jr.current),l=St(s,r.type);s!==l&&(dt($a,r),dt(jr,l))}function vd(r){$a.current===r&&(yt(jr),yt($a))}var Et=Qi(0);function Au(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var _d=[];function wd(){for(var r=0;r<_d.length;r++)_d[r]._workInProgressVersionPrimary=null;_d.length=0}var ku=X.ReactCurrentDispatcher,Ed=X.ReactCurrentBatchConfig,Ws=0,Tt=null,Mt=null,jt=null,xu=!1,Wa=!1,qa=0,zT=0;function un(){throw Error(t(321))}function Td(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!yr(r[l],s[l]))return!1;return!0}function Id(r,s,l,h,p,y){if(Ws=y,Tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ku.current=r===null||r.memoizedState===null?WT:qT,r=l(h,p),Wa){y=0;do{if(Wa=!1,qa=0,25<=y)throw Error(t(301));y+=1,jt=Mt=null,s.updateQueue=null,ku.current=GT,r=l(h,p)}while(Wa)}if(ku.current=Nu,s=Mt!==null&&Mt.next!==null,Ws=0,jt=Mt=Tt=null,xu=!1,s)throw Error(t(300));return r}function Sd(){var r=qa!==0;return qa=0,r}function zr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Tt.memoizedState=jt=r:jt=jt.next=r,jt}function er(){if(Mt===null){var r=Tt.alternate;r=r!==null?r.memoizedState:null}else r=Mt.next;var s=jt===null?Tt.memoizedState:jt.next;if(s!==null)jt=s,Mt=r;else{if(r===null)throw Error(t(310));Mt=r,r={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},jt===null?Tt.memoizedState=jt=r:jt=jt.next=r}return jt}function Ga(r,s){return typeof s=="function"?s(r):s}function Rd(r){var s=er(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=Mt,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var A=E=null,N=null,G=y;do{var oe=G.lane;if((Ws&oe)===oe)N!==null&&(N=N.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),h=G.hasEagerState?G.eagerState:r(h,G.action);else{var ae={lane:oe,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};N===null?(A=N=ae,E=h):N=N.next=ae,Tt.lanes|=oe,qs|=oe}G=G.next}while(G!==null&&G!==y);N===null?E=h:N.next=A,yr(h,s.memoizedState)||(kn=!0),s.memoizedState=h,s.baseState=E,s.baseQueue=N,l.lastRenderedState=h}if(r=l.interleaved,r!==null){p=r;do y=p.lane,Tt.lanes|=y,qs|=y,p=p.next;while(p!==r)}else p===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Pd(r){var s=er(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,p=l.pending,y=s.memoizedState;if(p!==null){l.pending=null;var E=p=p.next;do y=r(y,E.action),E=E.next;while(E!==p);yr(y,s.memoizedState)||(kn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,h]}function Sg(){}function Rg(r,s){var l=Tt,h=er(),p=s(),y=!yr(h.memoizedState,p);if(y&&(h.memoizedState=p,kn=!0),h=h.queue,Cd(Ag.bind(null,l,h,r),[r]),h.getSnapshot!==s||y||jt!==null&&jt.memoizedState.tag&1){if(l.flags|=2048,Ka(9,Cg.bind(null,l,h,p,s),void 0,null),zt===null)throw Error(t(349));Ws&30||Pg(l,s,p)}return p}function Pg(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=Tt.updateQueue,s===null?(s={lastEffect:null,stores:null},Tt.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function Cg(r,s,l,h){s.value=l,s.getSnapshot=h,kg(s)&&xg(r)}function Ag(r,s,l){return l(function(){kg(s)&&xg(r)})}function kg(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!yr(r,l)}catch{return!0}}function xg(r){var s=hi(r,1);s!==null&&Tr(s,r,1,-1)}function Dg(r){var s=zr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:r},s.queue=r,r=r.dispatch=HT.bind(null,Tt,r),[s.memoizedState,r]}function Ka(r,s,l,h){return r={tag:r,create:s,destroy:l,deps:h,next:null},s=Tt.updateQueue,s===null?(s={lastEffect:null,stores:null},Tt.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,s.lastEffect=r)),r}function bg(){return er().memoizedState}function Du(r,s,l,h){var p=zr();Tt.flags|=r,p.memoizedState=Ka(1|s,l,void 0,h===void 0?null:h)}function bu(r,s,l,h){var p=er();h=h===void 0?null:h;var y=void 0;if(Mt!==null){var E=Mt.memoizedState;if(y=E.destroy,h!==null&&Td(h,E.deps)){p.memoizedState=Ka(s,l,y,h);return}}Tt.flags|=r,p.memoizedState=Ka(1|s,l,y,h)}function Ng(r,s){return Du(8390656,8,r,s)}function Cd(r,s){return bu(2048,8,r,s)}function Og(r,s){return bu(4,2,r,s)}function Lg(r,s){return bu(4,4,r,s)}function Mg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Vg(r,s,l){return l=l!=null?l.concat([r]):null,bu(4,4,Mg.bind(null,s,r),l)}function Ad(){}function Fg(r,s){var l=er();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Td(s,h[1])?h[0]:(l.memoizedState=[r,s],r)}function Ug(r,s){var l=er();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Td(s,h[1])?h[0]:(r=r(),l.memoizedState=[r,s],r)}function jg(r,s,l){return Ws&21?(yr(l,s)||(l=Os(),Tt.lanes|=l,qs|=l,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,kn=!0),r.memoizedState=l)}function BT(r,s){var l=We;We=l!==0&&4>l?l:4,r(!0);var h=Ed.transition;Ed.transition={};try{r(!1),s()}finally{We=l,Ed.transition=h}}function zg(){return er().memoizedState}function $T(r,s,l){var h=rs(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Bg(r))$g(s,l);else if(l=_g(r,s,l,h),l!==null){var p=En();Tr(l,r,h,p),Hg(l,s,h)}}function HT(r,s,l){var h=rs(r),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Bg(r))$g(s,p);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var E=s.lastRenderedState,A=y(E,l);if(p.hasEagerState=!0,p.eagerState=A,yr(A,E)){var N=s.interleaved;N===null?(p.next=p,md(s)):(p.next=N.next,N.next=p),s.interleaved=p;return}}catch{}finally{}l=_g(r,s,p,h),l!==null&&(p=En(),Tr(l,r,h,p),Hg(l,s,h))}}function Bg(r){var s=r.alternate;return r===Tt||s!==null&&s===Tt}function $g(r,s){Wa=xu=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Hg(r,s,l){if(l&4194240){var h=s.lanes;h&=r.pendingLanes,l|=h,s.lanes=l,Bi(r,l)}}var Nu={readContext:Zn,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},WT={readContext:Zn,useCallback:function(r,s){return zr().memoizedState=[r,s===void 0?null:s],r},useContext:Zn,useEffect:Ng,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Du(4194308,4,Mg.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Du(4194308,4,r,s)},useInsertionEffect:function(r,s){return Du(4,2,r,s)},useMemo:function(r,s){var l=zr();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var h=zr();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=$T.bind(null,Tt,r),[h.memoizedState,r]},useRef:function(r){var s=zr();return r={current:r},s.memoizedState=r},useState:Dg,useDebugValue:Ad,useDeferredValue:function(r){return zr().memoizedState=r},useTransition:function(){var r=Dg(!1),s=r[0];return r=BT.bind(null,r[1]),zr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var h=Tt,p=zr();if(wt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),zt===null)throw Error(t(349));Ws&30||Pg(h,s,l)}p.memoizedState=l;var y={value:l,getSnapshot:s};return p.queue=y,Ng(Ag.bind(null,h,y,r),[r]),h.flags|=2048,Ka(9,Cg.bind(null,h,y,l,s),void 0,null),l},useId:function(){var r=zr(),s=zt.identifierPrefix;if(wt){var l=ci,h=ui;l=(h&~(1<<32-vn(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=qa++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=zT++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},qT={readContext:Zn,useCallback:Fg,useContext:Zn,useEffect:Cd,useImperativeHandle:Vg,useInsertionEffect:Og,useLayoutEffect:Lg,useMemo:Ug,useReducer:Rd,useRef:bg,useState:function(){return Rd(Ga)},useDebugValue:Ad,useDeferredValue:function(r){var s=er();return jg(s,Mt.memoizedState,r)},useTransition:function(){var r=Rd(Ga)[0],s=er().memoizedState;return[r,s]},useMutableSource:Sg,useSyncExternalStore:Rg,useId:zg,unstable_isNewReconciler:!1},GT={readContext:Zn,useCallback:Fg,useContext:Zn,useEffect:Cd,useImperativeHandle:Vg,useInsertionEffect:Og,useLayoutEffect:Lg,useMemo:Ug,useReducer:Pd,useRef:bg,useState:function(){return Pd(Ga)},useDebugValue:Ad,useDeferredValue:function(r){var s=er();return Mt===null?s.memoizedState=r:jg(s,Mt.memoizedState,r)},useTransition:function(){var r=Pd(Ga)[0],s=er().memoizedState;return[r,s]},useMutableSource:Sg,useSyncExternalStore:Rg,useId:zg,unstable_isNewReconciler:!1};function _r(r,s){if(r&&r.defaultProps){s=de({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function kd(r,s,l,h){s=r.memoizedState,l=l(h,s),l=l==null?s:de({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Ou={isMounted:function(r){return(r=r._reactInternals)?He(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var h=En(),p=rs(r),y=di(h,p);y.payload=s,l!=null&&(y.callback=l),s=Zi(r,y,p),s!==null&&(Tr(s,r,p,h),Pu(s,r,p))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var h=En(),p=rs(r),y=di(h,p);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=Zi(r,y,p),s!==null&&(Tr(s,r,p,h),Pu(s,r,p))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=En(),h=rs(r),p=di(l,h);p.tag=2,s!=null&&(p.callback=s),s=Zi(r,p,h),s!==null&&(Tr(s,r,h,l),Pu(s,r,h))}};function Wg(r,s,l,h,p,y,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,E):s.prototype&&s.prototype.isPureReactComponent?!Oa(l,h)||!Oa(p,y):!0}function qg(r,s,l){var h=!1,p=Yi,y=s.contextType;return typeof y=="object"&&y!==null?y=Zn(y):(p=An(s)?js:ln.current,h=s.contextTypes,y=(h=h!=null)?Uo(r,p):Yi),s=new s(l,y),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ou,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=y),s}function Gg(r,s,l,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==r&&Ou.enqueueReplaceState(s,s.state,null)}function xd(r,s,l,h){var p=r.stateNode;p.props=l,p.state=r.memoizedState,p.refs={},gd(r);var y=s.contextType;typeof y=="object"&&y!==null?p.context=Zn(y):(y=An(s)?js:ln.current,p.context=Uo(r,y)),p.state=r.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(kd(r,s,y,l),p.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&Ou.enqueueReplaceState(p,p.state,null),Cu(r,l,p,h),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function Go(r,s){try{var l="",h=s;do l+=Ne(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:s,stack:p,digest:null}}function Dd(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function bd(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var KT=typeof WeakMap=="function"?WeakMap:Map;function Kg(r,s,l){l=di(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){zu||(zu=!0,Gd=h),bd(r,s)},l}function Qg(r,s,l){l=di(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=s.value;l.payload=function(){return h(p)},l.callback=function(){bd(r,s)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){bd(r,s),typeof h!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),l}function Yg(r,s,l){var h=r.pingCache;if(h===null){h=r.pingCache=new KT;var p=new Set;h.set(s,p)}else p=h.get(s),p===void 0&&(p=new Set,h.set(s,p));p.has(l)||(p.add(l),r=l1.bind(null,r,s,l),s.then(r,r))}function Xg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Jg(r,s,l,h,p){return r.mode&1?(r.flags|=65536,r.lanes=p,r):(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=di(-1,1),s.tag=2,Zi(l,s,1))),l.lanes|=1),r)}var QT=X.ReactCurrentOwner,kn=!1;function wn(r,s,l,h){s.child=r===null?vg(s,null,l,h):$o(s,r.child,l,h)}function Zg(r,s,l,h,p){l=l.render;var y=s.ref;return Wo(s,p),h=Id(r,s,l,h,y,p),l=Sd(),r!==null&&!kn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~p,fi(r,s,p)):(wt&&l&&od(s),s.flags|=1,wn(r,s,h,p),s.child)}function ey(r,s,l,h,p){if(r===null){var y=l.type;return typeof y=="function"&&!ef(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,ty(r,s,y,h,p)):(r=Gu(l.type,null,h,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,!(r.lanes&p)){var E=y.memoizedProps;if(l=l.compare,l=l!==null?l:Oa,l(E,h)&&r.ref===s.ref)return fi(r,s,p)}return s.flags|=1,r=ss(y,h),r.ref=s.ref,r.return=s,s.child=r}function ty(r,s,l,h,p){if(r!==null){var y=r.memoizedProps;if(Oa(y,h)&&r.ref===s.ref)if(kn=!1,s.pendingProps=h=y,(r.lanes&p)!==0)r.flags&131072&&(kn=!0);else return s.lanes=r.lanes,fi(r,s,p)}return Nd(r,s,l,h,p)}function ny(r,s,l){var h=s.pendingProps,p=h.children,y=r!==null?r.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(Qo,Bn),Bn|=l;else{if(!(l&1073741824))return r=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,dt(Qo,Bn),Bn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,dt(Qo,Bn),Bn|=h}else y!==null?(h=y.baseLanes|l,s.memoizedState=null):h=l,dt(Qo,Bn),Bn|=h;return wn(r,s,p,l),s.child}function ry(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Nd(r,s,l,h,p){var y=An(l)?js:ln.current;return y=Uo(s,y),Wo(s,p),l=Id(r,s,l,h,y,p),h=Sd(),r!==null&&!kn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~p,fi(r,s,p)):(wt&&h&&od(s),s.flags|=1,wn(r,s,l,p),s.child)}function iy(r,s,l,h,p){if(An(l)){var y=!0;vu(s)}else y=!1;if(Wo(s,p),s.stateNode===null)Mu(r,s),qg(s,l,h),xd(s,l,h,p),h=!0;else if(r===null){var E=s.stateNode,A=s.memoizedProps;E.props=A;var N=E.context,G=l.contextType;typeof G=="object"&&G!==null?G=Zn(G):(G=An(l)?js:ln.current,G=Uo(s,G));var oe=l.getDerivedStateFromProps,ae=typeof oe=="function"||typeof E.getSnapshotBeforeUpdate=="function";ae||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==h||N!==G)&&Gg(s,E,h,G),Ji=!1;var se=s.memoizedState;E.state=se,Cu(s,h,E,p),N=s.memoizedState,A!==h||se!==N||Cn.current||Ji?(typeof oe=="function"&&(kd(s,l,oe,h),N=s.memoizedState),(A=Ji||Wg(s,l,A,h,se,N,G))?(ae||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=N),E.props=h,E.state=N,E.context=G,h=A):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{E=s.stateNode,wg(r,s),A=s.memoizedProps,G=s.type===s.elementType?A:_r(s.type,A),E.props=G,ae=s.pendingProps,se=E.context,N=l.contextType,typeof N=="object"&&N!==null?N=Zn(N):(N=An(l)?js:ln.current,N=Uo(s,N));var me=l.getDerivedStateFromProps;(oe=typeof me=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==ae||se!==N)&&Gg(s,E,h,N),Ji=!1,se=s.memoizedState,E.state=se,Cu(s,h,E,p);var Te=s.memoizedState;A!==ae||se!==Te||Cn.current||Ji?(typeof me=="function"&&(kd(s,l,me,h),Te=s.memoizedState),(G=Ji||Wg(s,l,G,h,se,Te,N)||!1)?(oe||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,Te,N),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,Te,N)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===r.memoizedProps&&se===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&se===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=Te),E.props=h,E.state=Te,E.context=N,h=G):(typeof E.componentDidUpdate!="function"||A===r.memoizedProps&&se===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&se===r.memoizedState||(s.flags|=1024),h=!1)}return Od(r,s,l,h,y,p)}function Od(r,s,l,h,p,y){ry(r,s);var E=(s.flags&128)!==0;if(!h&&!E)return p&&ug(s,l,!1),fi(r,s,y);h=s.stateNode,QT.current=s;var A=E&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&E?(s.child=$o(s,r.child,null,y),s.child=$o(s,null,A,y)):wn(r,s,A,y),s.memoizedState=h.state,p&&ug(s,l,!0),s.child}function sy(r){var s=r.stateNode;s.pendingContext?ag(r,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(r,s.context,!1),yd(r,s.containerInfo)}function oy(r,s,l,h,p){return Bo(),cd(p),s.flags|=256,wn(r,s,l,h),s.child}var Ld={dehydrated:null,treeContext:null,retryLane:0};function Md(r){return{baseLanes:r,cachePool:null,transitions:null}}function ay(r,s,l){var h=s.pendingProps,p=Et.current,y=!1,E=(s.flags&128)!==0,A;if((A=E)||(A=r!==null&&r.memoizedState===null?!1:(p&2)!==0),A?(y=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),dt(Et,p&1),r===null)return ud(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(E=h.children,r=h.fallback,y?(h=s.mode,y=s.child,E={mode:"hidden",children:E},!(h&1)&&y!==null?(y.childLanes=0,y.pendingProps=E):y=Ku(E,h,0,null),r=Ys(r,h,l,null),y.return=s,r.return=s,y.sibling=r,s.child=y,s.child.memoizedState=Md(l),s.memoizedState=Ld,r):Vd(s,E));if(p=r.memoizedState,p!==null&&(A=p.dehydrated,A!==null))return YT(r,s,E,h,A,p,l);if(y){y=h.fallback,E=s.mode,p=r.child,A=p.sibling;var N={mode:"hidden",children:h.children};return!(E&1)&&s.child!==p?(h=s.child,h.childLanes=0,h.pendingProps=N,s.deletions=null):(h=ss(p,N),h.subtreeFlags=p.subtreeFlags&14680064),A!==null?y=ss(A,y):(y=Ys(y,E,l,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,E=r.child.memoizedState,E=E===null?Md(l):{baseLanes:E.baseLanes|l,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=r.childLanes&~l,s.memoizedState=Ld,h}return y=r.child,r=y.sibling,h=ss(y,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=l),h.return=s,h.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=h,s.memoizedState=null,h}function Vd(r,s){return s=Ku({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Lu(r,s,l,h){return h!==null&&cd(h),$o(s,r.child,null,l),r=Vd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function YT(r,s,l,h,p,y,E){if(l)return s.flags&256?(s.flags&=-257,h=Dd(Error(t(422))),Lu(r,s,E,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(y=h.fallback,p=s.mode,h=Ku({mode:"visible",children:h.children},p,0,null),y=Ys(y,p,E,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,s.mode&1&&$o(s,r.child,null,E),s.child.memoizedState=Md(E),s.memoizedState=Ld,y);if(!(s.mode&1))return Lu(r,s,E,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var A=h.dgst;return h=A,y=Error(t(419)),h=Dd(y,h,void 0),Lu(r,s,E,h)}if(A=(E&r.childLanes)!==0,kn||A){if(h=zt,h!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(h.suspendedLanes|E)?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,hi(r,p),Tr(h,r,p,-1))}return Zd(),h=Dd(Error(t(421))),Lu(r,s,E,h)}return p.data==="$?"?(s.flags|=128,s.child=r.child,s=u1.bind(null,r),p._reactRetry=s,null):(r=y.treeContext,zn=Ki(p.nextSibling),jn=s,wt=!0,vr=null,r!==null&&(Xn[Jn++]=ui,Xn[Jn++]=ci,Xn[Jn++]=zs,ui=r.id,ci=r.overflow,zs=s),s=Vd(s,h.children),s.flags|=4096,s)}function ly(r,s,l){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),pd(r.return,s,l)}function Fd(r,s,l,h,p){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function uy(r,s,l){var h=s.pendingProps,p=h.revealOrder,y=h.tail;if(wn(r,s,h.children,l),h=Et.current,h&2)h=h&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ly(r,l,s);else if(r.tag===19)ly(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(dt(Et,h),!(s.mode&1))s.memoizedState=null;else switch(p){case"forwards":for(l=s.child,p=null;l!==null;)r=l.alternate,r!==null&&Au(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),Fd(s,!1,p,l,y);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&Au(r)===null){s.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}Fd(s,!0,l,null,y);break;case"together":Fd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Mu(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function fi(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),qs|=s.lanes,!(l&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=ss(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=ss(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function XT(r,s,l){switch(s.tag){case 3:sy(s),Bo();break;case 5:Ig(s);break;case 1:An(s.type)&&vu(s);break;case 4:yd(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,p=s.memoizedProps.value;dt(Su,h._currentValue),h._currentValue=p;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(dt(Et,Et.current&1),s.flags|=128,null):l&s.child.childLanes?ay(r,s,l):(dt(Et,Et.current&1),r=fi(r,s,l),r!==null?r.sibling:null);dt(Et,Et.current&1);break;case 19:if(h=(l&s.childLanes)!==0,r.flags&128){if(h)return uy(r,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),dt(Et,Et.current),h)break;return null;case 22:case 23:return s.lanes=0,ny(r,s,l)}return fi(r,s,l)}var cy,Ud,hy,dy;cy=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Ud=function(){},hy=function(r,s,l,h){var p=r.memoizedProps;if(p!==h){r=s.stateNode,Hs(jr.current);var y=null;switch(l){case"input":p=Yr(r,p),h=Yr(r,h),y=[];break;case"select":p=de({},p,{value:void 0}),h=de({},h,{value:void 0}),y=[];break;case"textarea":p=sr(r,p),h=sr(r,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=mu)}br(l,h);var E;l=null;for(G in p)if(!h.hasOwnProperty(G)&&p.hasOwnProperty(G)&&p[G]!=null)if(G==="style"){var A=p[G];for(E in A)A.hasOwnProperty(E)&&(l||(l={}),l[E]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(o.hasOwnProperty(G)?y||(y=[]):(y=y||[]).push(G,null));for(G in h){var N=h[G];if(A=p!=null?p[G]:void 0,h.hasOwnProperty(G)&&N!==A&&(N!=null||A!=null))if(G==="style")if(A){for(E in A)!A.hasOwnProperty(E)||N&&N.hasOwnProperty(E)||(l||(l={}),l[E]="");for(E in N)N.hasOwnProperty(E)&&A[E]!==N[E]&&(l||(l={}),l[E]=N[E])}else l||(y||(y=[]),y.push(G,l)),l=N;else G==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,A=A?A.__html:void 0,N!=null&&A!==N&&(y=y||[]).push(G,N)):G==="children"?typeof N!="string"&&typeof N!="number"||(y=y||[]).push(G,""+N):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(o.hasOwnProperty(G)?(N!=null&&G==="onScroll"&&gt("scroll",r),y||A===N||(y=[])):(y=y||[]).push(G,N))}l&&(y=y||[]).push("style",l);var G=y;(s.updateQueue=G)&&(s.flags|=4)}},dy=function(r,s,l,h){l!==h&&(s.flags|=4)};function Qa(r,s){if(!wt)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function cn(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(s)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=h,r.childLanes=l,s}function JT(r,s,l){var h=s.pendingProps;switch(ad(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(s),null;case 1:return An(s.type)&&yu(),cn(s),null;case 3:return h=s.stateNode,qo(),yt(Cn),yt(ln),wd(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Tu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,vr!==null&&(Yd(vr),vr=null))),Ud(r,s),cn(s),null;case 5:vd(s);var p=Hs(Ha.current);if(l=s.type,r!==null&&s.stateNode!=null)hy(r,s,l,h,p),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return cn(s),null}if(r=Hs(jr.current),Tu(s)){h=s.stateNode,l=s.type;var y=s.memoizedProps;switch(h[Ur]=s,h[Ua]=y,r=(s.mode&1)!==0,l){case"dialog":gt("cancel",h),gt("close",h);break;case"iframe":case"object":case"embed":gt("load",h);break;case"video":case"audio":for(p=0;p<Ma.length;p++)gt(Ma[p],h);break;case"source":gt("error",h);break;case"img":case"image":case"link":gt("error",h),gt("load",h);break;case"details":gt("toggle",h);break;case"input":bi(h,y),gt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},gt("invalid",h);break;case"textarea":Xr(h,y),gt("invalid",h)}br(l,y),p=null;for(var E in y)if(y.hasOwnProperty(E)){var A=y[E];E==="children"?typeof A=="string"?h.textContent!==A&&(y.suppressHydrationWarning!==!0&&pu(h.textContent,A,r),p=["children",A]):typeof A=="number"&&h.textContent!==""+A&&(y.suppressHydrationWarning!==!0&&pu(h.textContent,A,r),p=["children",""+A]):o.hasOwnProperty(E)&&A!=null&&E==="onScroll"&&gt("scroll",h)}switch(l){case"input":Kn(h),yo(h,y,!0);break;case"textarea":Kn(h),Tn(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=mu)}h=p,s.updateQueue=h,h!==null&&(s.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=lt(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=E.createElement(l,{is:h.is}):(r=E.createElement(l),l==="select"&&(E=r,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):r=E.createElementNS(r,l),r[Ur]=s,r[Ua]=h,cy(r,s,!1,!1),s.stateNode=r;e:{switch(E=Vi(l,h),l){case"dialog":gt("cancel",r),gt("close",r),p=h;break;case"iframe":case"object":case"embed":gt("load",r),p=h;break;case"video":case"audio":for(p=0;p<Ma.length;p++)gt(Ma[p],r);p=h;break;case"source":gt("error",r),p=h;break;case"img":case"image":case"link":gt("error",r),gt("load",r),p=h;break;case"details":gt("toggle",r),p=h;break;case"input":bi(r,h),p=Yr(r,h),gt("invalid",r);break;case"option":p=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},p=de({},h,{value:void 0}),gt("invalid",r);break;case"textarea":Xr(r,h),p=sr(r,h),gt("invalid",r);break;default:p=h}br(l,p),A=p;for(y in A)if(A.hasOwnProperty(y)){var N=A[y];y==="style"?Ds(r,N):y==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&xs(r,N)):y==="children"?typeof N=="string"?(l!=="textarea"||N!=="")&&qt(r,N):typeof N=="number"&&qt(r,""+N):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?N!=null&&y==="onScroll"&&gt("scroll",r):N!=null&&Q(r,y,N,E))}switch(l){case"input":Kn(r),yo(r,h,!1);break;case"textarea":Kn(r),Tn(r);break;case"option":h.value!=null&&r.setAttribute("value",""+et(h.value));break;case"select":r.multiple=!!h.multiple,y=h.value,y!=null?Wt(r,!!h.multiple,y,!1):h.defaultValue!=null&&Wt(r,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=mu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return cn(s),null;case 6:if(r&&s.stateNode!=null)dy(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=Hs(Ha.current),Hs(jr.current),Tu(s)){if(h=s.stateNode,l=s.memoizedProps,h[Ur]=s,(y=h.nodeValue!==l)&&(r=jn,r!==null))switch(r.tag){case 3:pu(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&pu(h.nodeValue,l,(r.mode&1)!==0)}y&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Ur]=s,s.stateNode=h}return cn(s),null;case 13:if(yt(Et),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(wt&&zn!==null&&s.mode&1&&!(s.flags&128))mg(),Bo(),s.flags|=98560,y=!1;else if(y=Tu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Ur]=s}else Bo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;cn(s),y=!1}else vr!==null&&(Yd(vr),vr=null),y=!0;if(!y)return s.flags&65536?s:null}return s.flags&128?(s.lanes=l,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(r===null||Et.current&1?Vt===0&&(Vt=3):Zd())),s.updateQueue!==null&&(s.flags|=4),cn(s),null);case 4:return qo(),Ud(r,s),r===null&&Va(s.stateNode.containerInfo),cn(s),null;case 10:return fd(s.type._context),cn(s),null;case 17:return An(s.type)&&yu(),cn(s),null;case 19:if(yt(Et),y=s.memoizedState,y===null)return cn(s),null;if(h=(s.flags&128)!==0,E=y.rendering,E===null)if(h)Qa(y,!1);else{if(Vt!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(E=Au(r),E!==null){for(s.flags|=128,Qa(y,!1),h=E.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)y=l,r=h,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,r=E.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return dt(Et,Et.current&1|2),s.child}r=r.sibling}y.tail!==null&&ot()>Yo&&(s.flags|=128,h=!0,Qa(y,!1),s.lanes=4194304)}else{if(!h)if(r=Au(E),r!==null){if(s.flags|=128,h=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Qa(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!wt)return cn(s),null}else 2*ot()-y.renderingStartTime>Yo&&l!==1073741824&&(s.flags|=128,h=!0,Qa(y,!1),s.lanes=4194304);y.isBackwards?(E.sibling=s.child,s.child=E):(l=y.last,l!==null?l.sibling=E:s.child=E,y.last=E)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=ot(),s.sibling=null,l=Et.current,dt(Et,h?l&1|2:l&1),s):(cn(s),null);case 22:case 23:return Jd(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?Bn&1073741824&&(cn(s),s.subtreeFlags&6&&(s.flags|=8192)):cn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function ZT(r,s){switch(ad(s),s.tag){case 1:return An(s.type)&&yu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return qo(),yt(Cn),yt(ln),wd(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return vd(s),null;case 13:if(yt(Et),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Bo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return yt(Et),null;case 4:return qo(),null;case 10:return fd(s.type._context),null;case 22:case 23:return Jd(),null;case 24:return null;default:return null}}var Vu=!1,hn=!1,e1=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Ko(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){Pt(r,s,h)}else l.current=null}function jd(r,s,l){try{l()}catch(h){Pt(r,s,h)}}var fy=!1;function t1(r,s){if(Jh=Wi,r=Wm(),Hh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var E=0,A=-1,N=-1,G=0,oe=0,ae=r,se=null;t:for(;;){for(var me;ae!==l||p!==0&&ae.nodeType!==3||(A=E+p),ae!==y||h!==0&&ae.nodeType!==3||(N=E+h),ae.nodeType===3&&(E+=ae.nodeValue.length),(me=ae.firstChild)!==null;)se=ae,ae=me;for(;;){if(ae===r)break t;if(se===l&&++G===p&&(A=E),se===y&&++oe===h&&(N=E),(me=ae.nextSibling)!==null)break;ae=se,se=ae.parentNode}ae=me}l=A===-1||N===-1?null:{start:A,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(Zh={focusedElem:r,selectionRange:l},Wi=!1,ve=s;ve!==null;)if(s=ve,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ve=r;else for(;ve!==null;){s=ve;try{var Te=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Se=Te.memoizedProps,At=Te.memoizedState,W=s.stateNode,F=W.getSnapshotBeforeUpdate(s.elementType===s.type?Se:_r(s.type,Se),At);W.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var q=s.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){Pt(s,s.return,le)}if(r=s.sibling,r!==null){r.return=s.return,ve=r;break}ve=s.return}return Te=fy,fy=!1,Te}function Ya(r,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&r)===r){var y=p.destroy;p.destroy=void 0,y!==void 0&&jd(s,l,y)}p=p.next}while(p!==h)}}function Fu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function zd(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function py(r){var s=r.alternate;s!==null&&(r.alternate=null,py(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[Ur],delete s[Ua],delete s[rd],delete s[VT],delete s[FT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function my(r){return r.tag===5||r.tag===3||r.tag===4}function gy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||my(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Bd(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=mu));else if(h!==4&&(r=r.child,r!==null))for(Bd(r,s,l),r=r.sibling;r!==null;)Bd(r,s,l),r=r.sibling}function $d(r,s,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for($d(r,s,l),r=r.sibling;r!==null;)$d(r,s,l),r=r.sibling}var Xt=null,wr=!1;function es(r,s,l){for(l=l.child;l!==null;)yy(r,s,l),l=l.sibling}function yy(r,s,l){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Sn,l)}catch{}switch(l.tag){case 5:hn||Ko(l,s);case 6:var h=Xt,p=wr;Xt=null,es(r,s,l),Xt=h,wr=p,Xt!==null&&(wr?(r=Xt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Xt.removeChild(l.stateNode));break;case 18:Xt!==null&&(wr?(r=Xt,l=l.stateNode,r.nodeType===8?nd(r.parentNode,l):r.nodeType===1&&nd(r,l),mr(r)):nd(Xt,l.stateNode));break;case 4:h=Xt,p=wr,Xt=l.stateNode.containerInfo,wr=!0,es(r,s,l),Xt=h,wr=p;break;case 0:case 11:case 14:case 15:if(!hn&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,E=y.destroy;y=y.tag,E!==void 0&&(y&2||y&4)&&jd(l,s,E),p=p.next}while(p!==h)}es(r,s,l);break;case 1:if(!hn&&(Ko(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(A){Pt(l,s,A)}es(r,s,l);break;case 21:es(r,s,l);break;case 22:l.mode&1?(hn=(h=hn)||l.memoizedState!==null,es(r,s,l),hn=h):es(r,s,l);break;default:es(r,s,l)}}function vy(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new e1),s.forEach(function(h){var p=c1.bind(null,r,h);l.has(h)||(l.add(h),h.then(p,p))})}}function Er(r,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=r,E=s,A=E;e:for(;A!==null;){switch(A.tag){case 5:Xt=A.stateNode,wr=!1;break e;case 3:Xt=A.stateNode.containerInfo,wr=!0;break e;case 4:Xt=A.stateNode.containerInfo,wr=!0;break e}A=A.return}if(Xt===null)throw Error(t(160));yy(y,E,p),Xt=null,wr=!1;var N=p.alternate;N!==null&&(N.return=null),p.return=null}catch(G){Pt(p,s,G)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)_y(s,r),s=s.sibling}function _y(r,s){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Er(s,r),Br(r),h&4){try{Ya(3,r,r.return),Fu(3,r)}catch(Se){Pt(r,r.return,Se)}try{Ya(5,r,r.return)}catch(Se){Pt(r,r.return,Se)}}break;case 1:Er(s,r),Br(r),h&512&&l!==null&&Ko(l,l.return);break;case 5:if(Er(s,r),Br(r),h&512&&l!==null&&Ko(l,l.return),r.flags&32){var p=r.stateNode;try{qt(p,"")}catch(Se){Pt(r,r.return,Se)}}if(h&4&&(p=r.stateNode,p!=null)){var y=r.memoizedProps,E=l!==null?l.memoizedProps:y,A=r.type,N=r.updateQueue;if(r.updateQueue=null,N!==null)try{A==="input"&&y.type==="radio"&&y.name!=null&&Ni(p,y),Vi(A,E);var G=Vi(A,y);for(E=0;E<N.length;E+=2){var oe=N[E],ae=N[E+1];oe==="style"?Ds(p,ae):oe==="dangerouslySetInnerHTML"?xs(p,ae):oe==="children"?qt(p,ae):Q(p,oe,ae,G)}switch(A){case"input":ks(p,y);break;case"textarea":kr(p,y);break;case"select":var se=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var me=y.value;me!=null?Wt(p,!!y.multiple,me,!1):se!==!!y.multiple&&(y.defaultValue!=null?Wt(p,!!y.multiple,y.defaultValue,!0):Wt(p,!!y.multiple,y.multiple?[]:"",!1))}p[Ua]=y}catch(Se){Pt(r,r.return,Se)}}break;case 6:if(Er(s,r),Br(r),h&4){if(r.stateNode===null)throw Error(t(162));p=r.stateNode,y=r.memoizedProps;try{p.nodeValue=y}catch(Se){Pt(r,r.return,Se)}}break;case 3:if(Er(s,r),Br(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{mr(s.containerInfo)}catch(Se){Pt(r,r.return,Se)}break;case 4:Er(s,r),Br(r);break;case 13:Er(s,r),Br(r),p=r.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(qd=ot())),h&4&&vy(r);break;case 22:if(oe=l!==null&&l.memoizedState!==null,r.mode&1?(hn=(G=hn)||oe,Er(s,r),hn=G):Er(s,r),Br(r),h&8192){if(G=r.memoizedState!==null,(r.stateNode.isHidden=G)&&!oe&&r.mode&1)for(ve=r,oe=r.child;oe!==null;){for(ae=ve=oe;ve!==null;){switch(se=ve,me=se.child,se.tag){case 0:case 11:case 14:case 15:Ya(4,se,se.return);break;case 1:Ko(se,se.return);var Te=se.stateNode;if(typeof Te.componentWillUnmount=="function"){h=se,l=se.return;try{s=h,Te.props=s.memoizedProps,Te.state=s.memoizedState,Te.componentWillUnmount()}catch(Se){Pt(h,l,Se)}}break;case 5:Ko(se,se.return);break;case 22:if(se.memoizedState!==null){Ty(ae);continue}}me!==null?(me.return=se,ve=me):Ty(ae)}oe=oe.sibling}e:for(oe=null,ae=r;;){if(ae.tag===5){if(oe===null){oe=ae;try{p=ae.stateNode,G?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(A=ae.stateNode,N=ae.memoizedProps.style,E=N!=null&&N.hasOwnProperty("display")?N.display:null,A.style.display=Li("display",E))}catch(Se){Pt(r,r.return,Se)}}}else if(ae.tag===6){if(oe===null)try{ae.stateNode.nodeValue=G?"":ae.memoizedProps}catch(Se){Pt(r,r.return,Se)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===r)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===r)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===r)break e;oe===ae&&(oe=null),ae=ae.return}oe===ae&&(oe=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:Er(s,r),Br(r),h&4&&vy(r);break;case 21:break;default:Er(s,r),Br(r)}}function Br(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(my(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(qt(p,""),h.flags&=-33);var y=gy(r);$d(r,y,p);break;case 3:case 4:var E=h.stateNode.containerInfo,A=gy(r);Bd(r,A,E);break;default:throw Error(t(161))}}catch(N){Pt(r,r.return,N)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function n1(r,s,l){ve=r,wy(r)}function wy(r,s,l){for(var h=(r.mode&1)!==0;ve!==null;){var p=ve,y=p.child;if(p.tag===22&&h){var E=p.memoizedState!==null||Vu;if(!E){var A=p.alternate,N=A!==null&&A.memoizedState!==null||hn;A=Vu;var G=hn;if(Vu=E,(hn=N)&&!G)for(ve=p;ve!==null;)E=ve,N=E.child,E.tag===22&&E.memoizedState!==null?Iy(p):N!==null?(N.return=E,ve=N):Iy(p);for(;y!==null;)ve=y,wy(y),y=y.sibling;ve=p,Vu=A,hn=G}Ey(r)}else p.subtreeFlags&8772&&y!==null?(y.return=p,ve=y):Ey(r)}}function Ey(r){for(;ve!==null;){var s=ve;if(s.flags&8772){var l=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:hn||Fu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!hn)if(l===null)h.componentDidMount();else{var p=s.elementType===s.type?l.memoizedProps:_r(s.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&Tg(s,y,h);break;case 3:var E=s.updateQueue;if(E!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Tg(s,E,l)}break;case 5:var A=s.stateNode;if(l===null&&s.flags&4){l=A;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&l.focus();break;case"img":N.src&&(l.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var G=s.alternate;if(G!==null){var oe=G.memoizedState;if(oe!==null){var ae=oe.dehydrated;ae!==null&&mr(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}hn||s.flags&512&&zd(s)}catch(se){Pt(s,s.return,se)}}if(s===r){ve=null;break}if(l=s.sibling,l!==null){l.return=s.return,ve=l;break}ve=s.return}}function Ty(r){for(;ve!==null;){var s=ve;if(s===r){ve=null;break}var l=s.sibling;if(l!==null){l.return=s.return,ve=l;break}ve=s.return}}function Iy(r){for(;ve!==null;){var s=ve;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Fu(4,s)}catch(N){Pt(s,l,N)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var p=s.return;try{h.componentDidMount()}catch(N){Pt(s,p,N)}}var y=s.return;try{zd(s)}catch(N){Pt(s,y,N)}break;case 5:var E=s.return;try{zd(s)}catch(N){Pt(s,E,N)}}}catch(N){Pt(s,s.return,N)}if(s===r){ve=null;break}var A=s.sibling;if(A!==null){A.return=s.return,ve=A;break}ve=s.return}}var r1=Math.ceil,Uu=X.ReactCurrentDispatcher,Hd=X.ReactCurrentOwner,tr=X.ReactCurrentBatchConfig,nt=0,zt=null,bt=null,Jt=0,Bn=0,Qo=Qi(0),Vt=0,Xa=null,qs=0,ju=0,Wd=0,Ja=null,xn=null,qd=0,Yo=1/0,pi=null,zu=!1,Gd=null,ts=null,Bu=!1,ns=null,$u=0,Za=0,Kd=null,Hu=-1,Wu=0;function En(){return nt&6?ot():Hu!==-1?Hu:Hu=ot()}function rs(r){return r.mode&1?nt&2&&Jt!==0?Jt&-Jt:jT.transition!==null?(Wu===0&&(Wu=Os()),Wu):(r=We,r!==0||(r=window.event,r=r===void 0?16:Ca(r.type)),r):1}function Tr(r,s,l,h){if(50<Za)throw Za=0,Kd=null,Error(t(185));zi(r,l,h),(!(nt&2)||r!==zt)&&(r===zt&&(!(nt&2)&&(ju|=l),Vt===4&&is(r,Jt)),Dn(r,h),l===1&&nt===0&&!(s.mode&1)&&(Yo=ot()+500,_u&&Xi()))}function Dn(r,s){var l=r.callbackNode;ni(r,s);var h=Ns(r,r===zt?Jt:0);if(h===0)l!==null&&ei(l),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(l!=null&&ei(l),s===1)r.tag===0?UT(Ry.bind(null,r)):cg(Ry.bind(null,r)),LT(function(){!(nt&6)&&Xi()}),l=null;else{switch($i(h)){case 1:l=Ye;break;case 4:l=pt;break;case 16:l=Kt;break;case 536870912:l=mt;break;default:l=Kt}l=Ny(l,Sy.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function Sy(r,s){if(Hu=-1,Wu=0,nt&6)throw Error(t(327));var l=r.callbackNode;if(Xo()&&r.callbackNode!==l)return null;var h=Ns(r,r===zt?Jt:0);if(h===0)return null;if(h&30||h&r.expiredLanes||s)s=qu(r,h);else{s=h;var p=nt;nt|=2;var y=Cy();(zt!==r||Jt!==s)&&(pi=null,Yo=ot()+500,Ks(r,s));do try{o1();break}catch(A){Py(r,A)}while(!0);dd(),Uu.current=y,nt=p,bt!==null?s=0:(zt=null,Jt=0,s=Vt)}if(s!==0){if(s===2&&(p=Vn(r),p!==0&&(h=p,s=Qd(r,p))),s===1)throw l=Xa,Ks(r,0),is(r,h),Dn(r,ot()),l;if(s===6)is(r,h);else{if(p=r.current.alternate,!(h&30)&&!i1(p)&&(s=qu(r,h),s===2&&(y=Vn(r),y!==0&&(h=y,s=Qd(r,y))),s===1))throw l=Xa,Ks(r,0),is(r,h),Dn(r,ot()),l;switch(r.finishedWork=p,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:Qs(r,xn,pi);break;case 3:if(is(r,h),(h&130023424)===h&&(s=qd+500-ot(),10<s)){if(Ns(r,0)!==0)break;if(p=r.suspendedLanes,(p&h)!==h){En(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=td(Qs.bind(null,r,xn,pi),s);break}Qs(r,xn,pi);break;case 4:if(is(r,h),(h&4194240)===h)break;for(s=r.eventTimes,p=-1;0<h;){var E=31-vn(h);y=1<<E,E=s[E],E>p&&(p=E),h&=~y}if(h=p,h=ot()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*r1(h/1960))-h,10<h){r.timeoutHandle=td(Qs.bind(null,r,xn,pi),h);break}Qs(r,xn,pi);break;case 5:Qs(r,xn,pi);break;default:throw Error(t(329))}}}return Dn(r,ot()),r.callbackNode===l?Sy.bind(null,r):null}function Qd(r,s){var l=Ja;return r.current.memoizedState.isDehydrated&&(Ks(r,s).flags|=256),r=qu(r,s),r!==2&&(s=xn,xn=l,s!==null&&Yd(s)),r}function Yd(r){xn===null?xn=r:xn.push.apply(xn,r)}function i1(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!yr(y(),p))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function is(r,s){for(s&=~Wd,s&=~ju,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-vn(s),h=1<<l;r[l]=-1,s&=~h}}function Ry(r){if(nt&6)throw Error(t(327));Xo();var s=Ns(r,0);if(!(s&1))return Dn(r,ot()),null;var l=qu(r,s);if(r.tag!==0&&l===2){var h=Vn(r);h!==0&&(s=h,l=Qd(r,h))}if(l===1)throw l=Xa,Ks(r,0),is(r,s),Dn(r,ot()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,Qs(r,xn,pi),Dn(r,ot()),null}function Xd(r,s){var l=nt;nt|=1;try{return r(s)}finally{nt=l,nt===0&&(Yo=ot()+500,_u&&Xi())}}function Gs(r){ns!==null&&ns.tag===0&&!(nt&6)&&Xo();var s=nt;nt|=1;var l=tr.transition,h=We;try{if(tr.transition=null,We=1,r)return r()}finally{We=h,tr.transition=l,nt=s,!(nt&6)&&Xi()}}function Jd(){Bn=Qo.current,yt(Qo)}function Ks(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,OT(l)),bt!==null)for(l=bt.return;l!==null;){var h=l;switch(ad(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&yu();break;case 3:qo(),yt(Cn),yt(ln),wd();break;case 5:vd(h);break;case 4:qo();break;case 13:yt(Et);break;case 19:yt(Et);break;case 10:fd(h.type._context);break;case 22:case 23:Jd()}l=l.return}if(zt=r,bt=r=ss(r.current,null),Jt=Bn=s,Vt=0,Xa=null,Wd=ju=qs=0,xn=Ja=null,$s!==null){for(s=0;s<$s.length;s++)if(l=$s[s],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var E=y.next;y.next=p,h.next=E}l.pending=h}$s=null}return r}function Py(r,s){do{var l=bt;try{if(dd(),ku.current=Nu,xu){for(var h=Tt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}xu=!1}if(Ws=0,jt=Mt=Tt=null,Wa=!1,qa=0,Hd.current=null,l===null||l.return===null){Vt=1,Xa=s,bt=null;break}e:{var y=r,E=l.return,A=l,N=s;if(s=Jt,A.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var G=N,oe=A,ae=oe.tag;if(!(oe.mode&1)&&(ae===0||ae===11||ae===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var me=Xg(E);if(me!==null){me.flags&=-257,Jg(me,E,A,y,s),me.mode&1&&Yg(y,G,s),s=me,N=G;var Te=s.updateQueue;if(Te===null){var Se=new Set;Se.add(N),s.updateQueue=Se}else Te.add(N);break e}else{if(!(s&1)){Yg(y,G,s),Zd();break e}N=Error(t(426))}}else if(wt&&A.mode&1){var At=Xg(E);if(At!==null){!(At.flags&65536)&&(At.flags|=256),Jg(At,E,A,y,s),cd(Go(N,A));break e}}y=N=Go(N,A),Vt!==4&&(Vt=2),Ja===null?Ja=[y]:Ja.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var W=Kg(y,N,s);Eg(y,W);break e;case 1:A=N;var F=y.type,q=y.stateNode;if(!(y.flags&128)&&(typeof F.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(ts===null||!ts.has(q)))){y.flags|=65536,s&=-s,y.lanes|=s;var le=Qg(y,A,s);Eg(y,le);break e}}y=y.return}while(y!==null)}ky(l)}catch(Re){s=Re,bt===l&&l!==null&&(bt=l=l.return);continue}break}while(!0)}function Cy(){var r=Uu.current;return Uu.current=Nu,r===null?Nu:r}function Zd(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),zt===null||!(qs&268435455)&&!(ju&268435455)||is(zt,Jt)}function qu(r,s){var l=nt;nt|=2;var h=Cy();(zt!==r||Jt!==s)&&(pi=null,Ks(r,s));do try{s1();break}catch(p){Py(r,p)}while(!0);if(dd(),nt=l,Uu.current=h,bt!==null)throw Error(t(261));return zt=null,Jt=0,Vt}function s1(){for(;bt!==null;)Ay(bt)}function o1(){for(;bt!==null&&!Nr();)Ay(bt)}function Ay(r){var s=by(r.alternate,r,Bn);r.memoizedProps=r.pendingProps,s===null?ky(r):bt=s,Hd.current=null}function ky(r){var s=r;do{var l=s.alternate;if(r=s.return,s.flags&32768){if(l=ZT(l,s),l!==null){l.flags&=32767,bt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Vt=6,bt=null;return}}else if(l=JT(l,s,Bn),l!==null){bt=l;return}if(s=s.sibling,s!==null){bt=s;return}bt=s=r}while(s!==null);Vt===0&&(Vt=5)}function Qs(r,s,l){var h=We,p=tr.transition;try{tr.transition=null,We=1,a1(r,s,l,h)}finally{tr.transition=p,We=h}return null}function a1(r,s,l,h){do Xo();while(ns!==null);if(nt&6)throw Error(t(327));l=r.finishedWork;var p=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=l.lanes|l.childLanes;if(ct(r,y),r===zt&&(bt=zt=null,Jt=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Bu||(Bu=!0,Ny(Kt,function(){return Xo(),null})),y=(l.flags&15990)!==0,l.subtreeFlags&15990||y){y=tr.transition,tr.transition=null;var E=We;We=1;var A=nt;nt|=4,Hd.current=null,t1(r,l),_y(l,r),CT(Zh),Wi=!!Jh,Zh=Jh=null,r.current=l,n1(l),cr(),nt=A,We=E,tr.transition=y}else r.current=l;if(Bu&&(Bu=!1,ns=r,$u=p),y=r.pendingLanes,y===0&&(ts=null),vo(l.stateNode),Dn(r,ot()),s!==null)for(h=r.onRecoverableError,l=0;l<s.length;l++)p=s[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(zu)throw zu=!1,r=Gd,Gd=null,r;return $u&1&&r.tag!==0&&Xo(),y=r.pendingLanes,y&1?r===Kd?Za++:(Za=0,Kd=r):Za=0,Xi(),null}function Xo(){if(ns!==null){var r=$i($u),s=tr.transition,l=We;try{if(tr.transition=null,We=16>r?16:r,ns===null)var h=!1;else{if(r=ns,ns=null,$u=0,nt&6)throw Error(t(331));var p=nt;for(nt|=4,ve=r.current;ve!==null;){var y=ve,E=y.child;if(ve.flags&16){var A=y.deletions;if(A!==null){for(var N=0;N<A.length;N++){var G=A[N];for(ve=G;ve!==null;){var oe=ve;switch(oe.tag){case 0:case 11:case 15:Ya(8,oe,y)}var ae=oe.child;if(ae!==null)ae.return=oe,ve=ae;else for(;ve!==null;){oe=ve;var se=oe.sibling,me=oe.return;if(py(oe),oe===G){ve=null;break}if(se!==null){se.return=me,ve=se;break}ve=me}}}var Te=y.alternate;if(Te!==null){var Se=Te.child;if(Se!==null){Te.child=null;do{var At=Se.sibling;Se.sibling=null,Se=At}while(Se!==null)}}ve=y}}if(y.subtreeFlags&2064&&E!==null)E.return=y,ve=E;else e:for(;ve!==null;){if(y=ve,y.flags&2048)switch(y.tag){case 0:case 11:case 15:Ya(9,y,y.return)}var W=y.sibling;if(W!==null){W.return=y.return,ve=W;break e}ve=y.return}}var F=r.current;for(ve=F;ve!==null;){E=ve;var q=E.child;if(E.subtreeFlags&2064&&q!==null)q.return=E,ve=q;else e:for(E=F;ve!==null;){if(A=ve,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:Fu(9,A)}}catch(Re){Pt(A,A.return,Re)}if(A===E){ve=null;break e}var le=A.sibling;if(le!==null){le.return=A.return,ve=le;break e}ve=A.return}}if(nt=p,Xi(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Sn,r)}catch{}h=!0}return h}finally{We=l,tr.transition=s}}return!1}function xy(r,s,l){s=Go(l,s),s=Kg(r,s,1),r=Zi(r,s,1),s=En(),r!==null&&(zi(r,1,s),Dn(r,s))}function Pt(r,s,l){if(r.tag===3)xy(r,r,l);else for(;s!==null;){if(s.tag===3){xy(s,r,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ts===null||!ts.has(h))){r=Go(l,r),r=Qg(s,r,1),s=Zi(s,r,1),r=En(),s!==null&&(zi(s,1,r),Dn(s,r));break}}s=s.return}}function l1(r,s,l){var h=r.pingCache;h!==null&&h.delete(s),s=En(),r.pingedLanes|=r.suspendedLanes&l,zt===r&&(Jt&l)===l&&(Vt===4||Vt===3&&(Jt&130023424)===Jt&&500>ot()-qd?Ks(r,0):Wd|=l),Dn(r,s)}function Dy(r,s){s===0&&(r.mode&1?(s=wo,wo<<=1,!(wo&130023424)&&(wo=4194304)):s=1);var l=En();r=hi(r,s),r!==null&&(zi(r,s,l),Dn(r,l))}function u1(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Dy(r,l)}function c1(r,s){var l=0;switch(r.tag){case 13:var h=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Dy(r,l)}var by;by=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||Cn.current)kn=!0;else{if(!(r.lanes&l)&&!(s.flags&128))return kn=!1,XT(r,s,l);kn=!!(r.flags&131072)}else kn=!1,wt&&s.flags&1048576&&hg(s,Eu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Mu(r,s),r=s.pendingProps;var p=Uo(s,ln.current);Wo(s,l),p=Id(null,s,h,r,p,l);var y=Sd();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,An(h)?(y=!0,vu(s)):y=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,gd(s),p.updater=Ou,s.stateNode=p,p._reactInternals=s,xd(s,h,r,l),s=Od(null,s,h,!0,y,l)):(s.tag=0,wt&&y&&od(s),wn(null,s,p,l),s=s.child),s;case 16:h=s.elementType;e:{switch(Mu(r,s),r=s.pendingProps,p=h._init,h=p(h._payload),s.type=h,p=s.tag=d1(h),r=_r(h,r),p){case 0:s=Nd(null,s,h,r,l);break e;case 1:s=iy(null,s,h,r,l);break e;case 11:s=Zg(null,s,h,r,l);break e;case 14:s=ey(null,s,h,_r(h.type,r),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:_r(h,p),Nd(r,s,h,p,l);case 1:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:_r(h,p),iy(r,s,h,p,l);case 3:e:{if(sy(s),r===null)throw Error(t(387));h=s.pendingProps,y=s.memoizedState,p=y.element,wg(r,s),Cu(s,h,null,l);var E=s.memoizedState;if(h=E.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){p=Go(Error(t(423)),s),s=oy(r,s,h,l,p);break e}else if(h!==p){p=Go(Error(t(424)),s),s=oy(r,s,h,l,p);break e}else for(zn=Ki(s.stateNode.containerInfo.firstChild),jn=s,wt=!0,vr=null,l=vg(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Bo(),h===p){s=fi(r,s,l);break e}wn(r,s,h,l)}s=s.child}return s;case 5:return Ig(s),r===null&&ud(s),h=s.type,p=s.pendingProps,y=r!==null?r.memoizedProps:null,E=p.children,ed(h,p)?E=null:y!==null&&ed(h,y)&&(s.flags|=32),ry(r,s),wn(r,s,E,l),s.child;case 6:return r===null&&ud(s),null;case 13:return ay(r,s,l);case 4:return yd(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=$o(s,null,h,l):wn(r,s,h,l),s.child;case 11:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:_r(h,p),Zg(r,s,h,p,l);case 7:return wn(r,s,s.pendingProps,l),s.child;case 8:return wn(r,s,s.pendingProps.children,l),s.child;case 12:return wn(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,p=s.pendingProps,y=s.memoizedProps,E=p.value,dt(Su,h._currentValue),h._currentValue=E,y!==null)if(yr(y.value,E)){if(y.children===p.children&&!Cn.current){s=fi(r,s,l);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var A=y.dependencies;if(A!==null){E=y.child;for(var N=A.firstContext;N!==null;){if(N.context===h){if(y.tag===1){N=di(-1,l&-l),N.tag=2;var G=y.updateQueue;if(G!==null){G=G.shared;var oe=G.pending;oe===null?N.next=N:(N.next=oe.next,oe.next=N),G.pending=N}}y.lanes|=l,N=y.alternate,N!==null&&(N.lanes|=l),pd(y.return,l,s),A.lanes|=l;break}N=N.next}}else if(y.tag===10)E=y.type===s.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=l,A=E.alternate,A!==null&&(A.lanes|=l),pd(E,l,s),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===s){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}wn(r,s,p.children,l),s=s.child}return s;case 9:return p=s.type,h=s.pendingProps.children,Wo(s,l),p=Zn(p),h=h(p),s.flags|=1,wn(r,s,h,l),s.child;case 14:return h=s.type,p=_r(h,s.pendingProps),p=_r(h.type,p),ey(r,s,h,p,l);case 15:return ty(r,s,s.type,s.pendingProps,l);case 17:return h=s.type,p=s.pendingProps,p=s.elementType===h?p:_r(h,p),Mu(r,s),s.tag=1,An(h)?(r=!0,vu(s)):r=!1,Wo(s,l),qg(s,h,p),xd(s,h,p,l),Od(null,s,h,!0,r,l);case 19:return uy(r,s,l);case 22:return ny(r,s,l)}throw Error(t(156,s.tag))};function Ny(r,s){return Gt(r,s)}function h1(r,s,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(r,s,l,h){return new h1(r,s,l,h)}function ef(r){return r=r.prototype,!(!r||!r.isReactComponent)}function d1(r){if(typeof r=="function")return ef(r)?1:0;if(r!=null){if(r=r.$$typeof,r===B)return 11;if(r===Ke)return 14}return 2}function ss(r,s){var l=r.alternate;return l===null?(l=nr(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Gu(r,s,l,h,p,y){var E=2;if(h=r,typeof r=="function")ef(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case k:return Ys(l.children,p,y,s);case S:E=8,p|=8;break;case P:return r=nr(12,l,s,p|2),r.elementType=P,r.lanes=y,r;case x:return r=nr(13,l,s,p),r.elementType=x,r.lanes=y,r;case ht:return r=nr(19,l,s,p),r.elementType=ht,r.lanes=y,r;case Qe:return Ku(l,p,y,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:E=10;break e;case V:E=9;break e;case B:E=11;break e;case Ke:E=14;break e;case Ct:E=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=nr(E,l,s,p),s.elementType=r,s.type=h,s.lanes=y,s}function Ys(r,s,l,h){return r=nr(7,r,h,s),r.lanes=l,r}function Ku(r,s,l,h){return r=nr(22,r,h,s),r.elementType=Qe,r.lanes=l,r.stateNode={isHidden:!1},r}function tf(r,s,l){return r=nr(6,r,null,s),r.lanes=l,r}function nf(r,s,l){return s=nr(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function f1(r,s,l,h,p){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ji(0),this.expirationTimes=ji(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function rf(r,s,l,h,p,y,E,A,N){return r=new f1(r,s,l,A,N),s===1?(s=1,y===!0&&(s|=8)):s=0,y=nr(3,null,null,s),r.current=y,y.stateNode=r,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},gd(y),r}function p1(r,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:h==null?null:""+h,children:r,containerInfo:s,implementation:l}}function Oy(r){if(!r)return Yi;r=r._reactInternals;e:{if(He(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(An(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(An(l))return lg(r,l,s)}return s}function Ly(r,s,l,h,p,y,E,A,N){return r=rf(l,h,!0,r,p,y,E,A,N),r.context=Oy(null),l=r.current,h=En(),p=rs(l),y=di(h,p),y.callback=s??null,Zi(l,y,p),r.current.lanes=p,zi(r,p,h),Dn(r,h),r}function Qu(r,s,l,h){var p=s.current,y=En(),E=rs(p);return l=Oy(l),s.context===null?s.context=l:s.pendingContext=l,s=di(y,E),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=Zi(p,s,E),r!==null&&(Tr(r,p,E,y),Pu(r,p,E)),E}function Yu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function My(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function sf(r,s){My(r,s),(r=r.alternate)&&My(r,s)}function m1(){return null}var Vy=typeof reportError=="function"?reportError:function(r){console.error(r)};function of(r){this._internalRoot=r}Xu.prototype.render=of.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Qu(r,s,null,null)},Xu.prototype.unmount=of.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Gs(function(){Qu(null,r,null,null)}),s[ai]=null}};function Xu(r){this._internalRoot=r}Xu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Xl();r={blockedOn:null,target:r,priority:s};for(var l=0;l<Lr.length&&s!==0&&s<Lr[l].priority;l++);Lr.splice(l,0,r),l===0&&eu(r)}};function af(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Ju(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Fy(){}function g1(r,s,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var G=Yu(E);y.call(G)}}var E=Ly(s,h,r,0,null,!1,!1,"",Fy);return r._reactRootContainer=E,r[ai]=E.current,Va(r.nodeType===8?r.parentNode:r),Gs(),E}for(;p=r.lastChild;)r.removeChild(p);if(typeof h=="function"){var A=h;h=function(){var G=Yu(N);A.call(G)}}var N=rf(r,0,!1,null,null,!1,!1,"",Fy);return r._reactRootContainer=N,r[ai]=N.current,Va(r.nodeType===8?r.parentNode:r),Gs(function(){Qu(s,N,l,h)}),N}function Zu(r,s,l,h,p){var y=l._reactRootContainer;if(y){var E=y;if(typeof p=="function"){var A=p;p=function(){var N=Yu(E);A.call(N)}}Qu(s,E,r,p)}else E=g1(l,s,r,p,h);return Yu(E)}Ql=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=Ui(s.pendingLanes);l!==0&&(Bi(s,l|1),Dn(s,ot()),!(nt&6)&&(Yo=ot()+500,Xi()))}break;case 13:Gs(function(){var h=hi(r,1);if(h!==null){var p=En();Tr(h,r,1,p)}}),sf(r,1)}},Eo=function(r){if(r.tag===13){var s=hi(r,134217728);if(s!==null){var l=En();Tr(s,r,134217728,l)}sf(r,134217728)}},Yl=function(r){if(r.tag===13){var s=rs(r),l=hi(r,s);if(l!==null){var h=En();Tr(l,r,s,h)}sf(r,s)}},Xl=function(){return We},Jl=function(r,s){var l=We;try{return We=r,s()}finally{We=l}},Jr=function(r,s,l){switch(s){case"input":if(ks(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==r&&h.form===r.form){var p=gu(h);if(!p)throw Error(t(90));Di(h),ks(h,p)}}}break;case"textarea":kr(r,l);break;case"select":s=l.value,s!=null&&Wt(r,!!l.multiple,s,!1)}},Zr=Xd,O=Gs;var y1={usingClientEntryPoint:!1,Events:[ja,Vo,gu,yn,bs,Xd]},el={findFiberByHostInstance:Us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v1={bundleType:el.bundleType,version:el.version,rendererPackageName:el.rendererPackageName,rendererConfig:el.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ur(r),r===null?null:r.stateNode},findFiberByHostInstance:el.findFiberByHostInstance||m1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{Sn=ec.inject(v1),an=ec}catch{}}return bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y1,bn.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!af(s))throw Error(t(200));return p1(r,s,null,l)},bn.createRoot=function(r,s){if(!af(r))throw Error(t(299));var l=!1,h="",p=Vy;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=rf(r,1,!1,null,null,l,!1,h,p),r[ai]=s.current,Va(r.nodeType===8?r.parentNode:r),new of(s)},bn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ur(s),r=r===null?null:r.stateNode,r},bn.flushSync=function(r){return Gs(r)},bn.hydrate=function(r,s,l){if(!Ju(s))throw Error(t(200));return Zu(null,r,s,!0,l)},bn.hydrateRoot=function(r,s,l){if(!af(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",E=Vy;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),s=Ly(s,null,r,1,l??null,p,!1,y,E),r[ai]=s.current,Va(r),h)for(r=0;r<h.length;r++)l=h[r],p=l._getVersion,p=p(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,p]:s.mutableSourceEagerHydrationData.push(l,p);return new Xu(s)},bn.render=function(r,s,l){if(!Ju(s))throw Error(t(200));return Zu(null,r,s,!1,l)},bn.unmountComponentAtNode=function(r){if(!Ju(r))throw Error(t(40));return r._reactRootContainer?(Gs(function(){Zu(null,null,r,!1,function(){r._reactRootContainer=null,r[ai]=null})}),!0):!1},bn.unstable_batchedUpdates=Xd,bn.unstable_renderSubtreeIntoContainer=function(r,s,l,h){if(!Ju(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Zu(r,s,l,!1,h)},bn.version="18.3.1-next-f1338f8080-20240426",bn}var qy;function a0(){if(qy)return cf.exports;qy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cf.exports=R1(),cf.exports}var Gy;function P1(){if(Gy)return tc;Gy=1;var n=a0();return tc.createRoot=n.createRoot,tc.hydrateRoot=n.hydrateRoot,tc}var C1=P1(),H=sh();const ro=o0(H);var Ky={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},A1=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],f=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},u0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,f=o+2<n.length,m=f?n[o+2]:0,v=a>>2,w=(a&3)<<4|d>>4;let T=(d&15)<<2|m>>6,R=m&63;f||(R=64,u||(T=64)),i.push(t[v],t[w],t[T],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(l0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):A1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||m==null||w==null)throw new k1;const T=a<<2|d>>4;if(i.push(T),m!==64){const R=d<<4&240|m>>2;if(i.push(R),w!==64){const C=m<<6&192|w;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class k1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const x1=function(n){const e=l0(n);return u0.encodeByteArray(e,!0)},xc=function(n){return x1(n).replace(/\./g,"")},c0=function(n){try{return u0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=()=>D1().__FIREBASE_DEFAULTS__,N1=()=>{if(typeof process>"u"||typeof Ky>"u")return;const n=Ky.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},O1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&c0(n[1]);return e&&JSON.parse(e)},oh=()=>{try{return b1()||N1()||O1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},h0=n=>{var e,t;return(t=(e=oh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},L1=n=>{const e=h0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},d0=()=>{var n;return(n=oh())===null||n===void 0?void 0:n.config},f0=n=>{var e;return(e=oh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M1=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xc(JSON.stringify(t)),xc(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function F1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function U1(){var n;const e=(n=oh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function z1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function B1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $1(){const n=gn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function H1(){return!U1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W1(){try{return typeof indexedDB=="object"}catch{return!1}}function q1(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="FirebaseError";class ki extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=G1,Object.setPrototypeOf(this,ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bl.prototype.create)}}class bl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?K1(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new ki(o,d,i)}}function K1(n,e){return n.replace(Q1,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Q1=/\{\$([^}]+)}/g;function Y1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Dc(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(Qy(a)&&Qy(u)){if(!Dc(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Qy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function X1(n,e){const t=new J1(n,e);return t.subscribe.bind(t)}class J1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Z1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=ff),o.error===void 0&&(o.error=ff),o.complete===void 0&&(o.complete=ff);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ff(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n){return n&&n._delegate?n._delegate:n}class oo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eI=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new M1;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nI(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const u=this.instances.get(o);return u&&e(u,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:tI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function tI(n){return n===Xs?void 0:n}function nI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new eI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const iI={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},sI=Be.INFO,oI={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},aI=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=oI[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vp{constructor(e){this.name=e,this._logLevel=sI,this._logHandler=aI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const lI=(n,e)=>e.some(t=>n instanceof t);let Yy,Xy;function uI(){return Yy||(Yy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cI(){return Xy||(Xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const p0=new WeakMap,Mf=new WeakMap,m0=new WeakMap,pf=new WeakMap,_p=new WeakMap;function hI(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(ps(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&p0.set(t,n)}).catch(()=>{}),_p.set(e,n),e}function dI(n){if(Mf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Mf.set(n,e)}let Vf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||m0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ps(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function fI(n){Vf=n(Vf)}function pI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(mf(this),e,...t);return m0.set(i,e.sort?e.sort():[e]),ps(i)}:cI().includes(n)?function(...e){return n.apply(mf(this),e),ps(p0.get(this))}:function(...e){return ps(n.apply(mf(this),e))}}function mI(n){return typeof n=="function"?pI(n):(n instanceof IDBTransaction&&dI(n),lI(n,uI())?new Proxy(n,Vf):n)}function ps(n){if(n instanceof IDBRequest)return hI(n);if(pf.has(n))return pf.get(n);const e=mI(n);return e!==n&&(pf.set(n,e),_p.set(e,n)),e}const mf=n=>_p.get(n);function gI(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=ps(u);return i&&u.addEventListener("upgradeneeded",f=>{i(ps(u.result),f.oldVersion,f.newVersion,ps(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const yI=["get","getKey","getAll","getAllKeys","count"],vI=["put","add","delete","clear"],gf=new Map;function Jy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gf.get(e))return gf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=vI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||yI.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,o?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),o&&f.done]))[0]};return gf.set(e,a),a}fI(n=>({...n,get:(e,t,i)=>Jy(e,t)||n.get(e,t,i),has:(e,t)=>!!Jy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function wI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ff="@firebase/app",Zy="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new vp("@firebase/app"),EI="@firebase/app-compat",TI="@firebase/analytics-compat",II="@firebase/analytics",SI="@firebase/app-check-compat",RI="@firebase/app-check",PI="@firebase/auth",CI="@firebase/auth-compat",AI="@firebase/database",kI="@firebase/data-connect",xI="@firebase/database-compat",DI="@firebase/functions",bI="@firebase/functions-compat",NI="@firebase/installations",OI="@firebase/installations-compat",LI="@firebase/messaging",MI="@firebase/messaging-compat",VI="@firebase/performance",FI="@firebase/performance-compat",UI="@firebase/remote-config",jI="@firebase/remote-config-compat",zI="@firebase/storage",BI="@firebase/storage-compat",$I="@firebase/firestore",HI="@firebase/vertexai",WI="@firebase/firestore-compat",qI="firebase",GI="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="[DEFAULT]",KI={[Ff]:"fire-core",[EI]:"fire-core-compat",[II]:"fire-analytics",[TI]:"fire-analytics-compat",[RI]:"fire-app-check",[SI]:"fire-app-check-compat",[PI]:"fire-auth",[CI]:"fire-auth-compat",[AI]:"fire-rtdb",[kI]:"fire-data-connect",[xI]:"fire-rtdb-compat",[DI]:"fire-fn",[bI]:"fire-fn-compat",[NI]:"fire-iid",[OI]:"fire-iid-compat",[LI]:"fire-fcm",[MI]:"fire-fcm-compat",[VI]:"fire-perf",[FI]:"fire-perf-compat",[UI]:"fire-rc",[jI]:"fire-rc-compat",[zI]:"fire-gcs",[BI]:"fire-gcs-compat",[$I]:"fire-fst",[WI]:"fire-fst-compat",[HI]:"fire-vertex","fire-js":"fire-js",[qI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new Map,QI=new Map,jf=new Map;function ev(n,e){try{n.container.addComponent(e)}catch(t){Si.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function la(n){const e=n.name;if(jf.has(e))return Si.debug(`There were multiple attempts to register component ${e}.`),!1;jf.set(e,n);for(const t of bc.values())ev(t,n);for(const t of QI.values())ev(t,n);return!0}function wp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function yi(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new bl("app","Firebase",YI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new oo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=GI;function Ep(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Uf,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw ms.create("bad-app-name",{appName:String(o)});if(t||(t=d0()),!t)throw ms.create("no-options");const a=bc.get(o);if(a){if(Dc(t,a.options)&&Dc(i,a.config))return a;throw ms.create("duplicate-app",{appName:o})}const u=new rI(o);for(const f of jf.values())u.addComponent(f);const d=new XI(t,i,u);return bc.set(o,d),d}function g0(n=Uf){const e=bc.get(n);if(!e&&n===Uf&&d0())return Ep();if(!e)throw ms.create("no-app",{appName:n});return e}function gs(n,e,t){var i;let o=(i=KI[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Si.warn(d.join(" "));return}la(new oo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="firebase-heartbeat-database",ZI=1,_l="firebase-heartbeat-store";let yf=null;function y0(){return yf||(yf=gI(JI,ZI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_l)}catch(t){console.warn(t)}}}}).catch(n=>{throw ms.create("idb-open",{originalErrorMessage:n.message})})),yf}async function eS(n){try{const t=(await y0()).transaction(_l),i=await t.objectStore(_l).get(v0(n));return await t.done,i}catch(e){if(e instanceof ki)Si.warn(e.message);else{const t=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Si.warn(t.message)}}}async function tv(n,e){try{const i=(await y0()).transaction(_l,"readwrite");await i.objectStore(_l).put(e,v0(n)),await i.done}catch(t){if(t instanceof ki)Si.warn(t.message);else{const i=ms.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Si.warn(i.message)}}}function v0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=1024,nS=30*24*60*60*1e3;class rS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=nv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=nS}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Si.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nv(),{heartbeatsToSend:i,unsentEntries:o}=iS(this._heartbeatsCache.heartbeats),a=xc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Si.warn(t),""}}}function nv(){return new Date().toISOString().substring(0,10)}function iS(n,e=tS){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),rv(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),rv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class sS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return W1()?q1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return tv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return tv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function rv(n){return xc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(n){la(new oo("platform-logger",e=>new _I(e),"PRIVATE")),la(new oo("heartbeat",e=>new rS(e),"PRIVATE")),gs(Ff,Zy,n),gs(Ff,Zy,"esm2017"),gs("fire-js","")}oS("");function Tp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function _0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aS=_0,w0=new bl("auth","Firebase",_0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new vp("@firebase/auth");function lS(n,...e){Nc.logLevel<=Be.WARN&&Nc.warn(`Auth (${va}): ${n}`,...e)}function fc(n,...e){Nc.logLevel<=Be.ERROR&&Nc.error(`Auth (${va}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(n,...e){throw Sp(n,...e)}function Rr(n,...e){return Sp(n,...e)}function Ip(n,e,t){const i=Object.assign(Object.assign({},aS()),{[e]:t});return new bl("auth","Firebase",i).create(e,{appName:n.name})}function io(n){return Ip(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uS(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Gr(n,"argument-error"),Ip(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return w0.create(n,...e)}function Oe(n,e,...t){if(!n)throw Sp(e,...t)}function vi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw fc(e),new Error(e)}function Ri(n,e){n||vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function cS(){return iv()==="http:"||iv()==="https:"}function iv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cS()||z1()||"connection"in navigator)?navigator.onLine:!0}function dS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ri(t>e,"Short delay should be less than long delay!"),this.isMobile=F1()||B1()}get(){return hS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(n,e){Ri(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=new Ol(3e4,6e4);function Pp(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function _a(n,e,t,i,o={}){return T0(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Nl(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return j1()||(m.referrerPolicy="no-referrer"),E0.fetch()(I0(n,n.config.apiHost,t,d),m)})}async function T0(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},fS),e);try{const o=new gS(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw nc(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw nc(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw nc(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw nc(n,"user-disabled",u);const v=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Ip(n,v,m);Gr(n,v)}}catch(o){if(o instanceof ki)throw o;Gr(n,"network-request-failed",{message:String(o)})}}async function mS(n,e,t,i,o={}){const a=await _a(n,e,t,i,o);return"mfaPendingCredential"in a&&Gr(n,"multi-factor-auth-required",{_serverResponse:a}),a}function I0(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?Rp(n.config,o):`${n.config.apiScheme}://${o}`}class gS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Rr(this.auth,"network-request-failed")),pS.get())})}}function nc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Rr(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(n,e){return _a(n,"POST","/v1/accounts:delete",e)}async function S0(n,e){return _a(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vS(n,e=!1){const t=Ht(n),i=await t.getIdToken(e),o=Cp(i);Oe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:fl(vf(o.auth_time)),issuedAtTime:fl(vf(o.iat)),expirationTime:fl(vf(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function vf(n){return Number(n)*1e3}function Cp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return fc("JWT malformed, contained fewer than 3 sections"),null;try{const o=c0(t);return o?JSON.parse(o):(fc("Failed to decode base64 JWT payload"),null)}catch(o){return fc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function sv(n){const e=Cp(n);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ki&&_S(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function _S({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fl(this.lastLoginAt),this.creationTime=fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await wl(n,S0(t,{idToken:i}));Oe(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?R0(a.providerUserInfo):[],d=TS(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),v=f?m:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Bf(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(n,w)}async function ES(n){const e=Ht(n);await Oc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TS(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function R0(n){return n.map(e=>{var{providerId:t}=e,i=Tp(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(n,e){const t=await T0(n,{},async()=>{const i=Nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=I0(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",E0.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SS(n,e){return _a(n,"POST","/v2/accounts:revokeToken",Pp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=sv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await IS(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new ia;return i&&(Oe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Oe(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Oe(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(n,e){Oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class _i{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Tp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Bf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await wl(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vS(this,e)}reload(){return ES(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Oc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yi(this.auth.app))return Promise.reject(io(this.auth));const e=await this.getIdToken();return await wl(this,yS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,u,d,f,m,v;const w=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,C=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(d=t.tenantId)!==null&&d!==void 0?d:void 0,b=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,U=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Z=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:Q,emailVerified:X,isAnonymous:L,providerData:te,stsTokenManager:k}=t;Oe(Q&&k,e,"internal-error");const S=ia.fromJSON(this.name,k);Oe(typeof Q=="string",e,"internal-error"),as(w,e.name),as(T,e.name),Oe(typeof X=="boolean",e,"internal-error"),Oe(typeof L=="boolean",e,"internal-error"),as(R,e.name),as(C,e.name),as(M,e.name),as(b,e.name),as(U,e.name),as(Z,e.name);const P=new _i({uid:Q,auth:e,email:T,emailVerified:X,displayName:w,isAnonymous:L,photoURL:C,phoneNumber:R,tenantId:M,stsTokenManager:S,createdAt:U,lastLoginAt:Z});return te&&Array.isArray(te)&&(P.providerData=te.map(D=>Object.assign({},D))),b&&(P._redirectEventId=b),P}static async _fromIdTokenResponse(e,t,i=!1){const o=new ia;o.updateFromServerResponse(t);const a=new _i({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Oc(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Oe(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?R0(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new ia;d.updateFromIdToken(i);const f=new _i({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Bf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=new Map;function wi(n){Ri(n instanceof Function,"Expected a class definition");let e=ov.get(n);return e?(Ri(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ov.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}P0.type="NONE";const av=P0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(n,e,t){return`firebase:${n}:${e}:${t}`}class sa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=pc(this.userKey,o.apiKey,a),this.fullPersistenceKey=pc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?_i._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new sa(wi(av),e,i);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||wi(av);const u=pc(i,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(u);if(v){const w=_i._fromJSON(e,v);m!==a&&(d=w),a=m;break}}catch{}const f=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new sa(a,e,i):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new sa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(x0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(b0(e))return"Blackberry";if(N0(e))return"Webos";if(A0(e))return"Safari";if((e.includes("chrome/")||k0(e))&&!e.includes("edge/"))return"Chrome";if(D0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function C0(n=gn()){return/firefox\//i.test(n)}function A0(n=gn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function k0(n=gn()){return/crios\//i.test(n)}function x0(n=gn()){return/iemobile/i.test(n)}function D0(n=gn()){return/android/i.test(n)}function b0(n=gn()){return/blackberry/i.test(n)}function N0(n=gn()){return/webos/i.test(n)}function Ap(n=gn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function RS(n=gn()){var e;return Ap(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PS(){return $1()&&document.documentMode===10}function O0(n=gn()){return Ap(n)||D0(n)||N0(n)||b0(n)||/windows phone/i.test(n)||x0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(n,e=[]){let t;switch(n){case"Browser":t=lv(gn());break;case"Worker":t=`${lv(gn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${va}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(n,e={}){return _a(n,"GET","/v2/passwordPolicy",Pp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=6;class xS{constructor(e){var t,i,o,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:kS,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uv(this),this.idTokenSubscription=new uv(this),this.beforeStateQueue=new CS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=w0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wi(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await sa.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await S0(this,{idToken:e}),i=await _i._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(yi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&(f!=null&&f.user)&&(o=f.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Oc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yi(this.app))return Promise.reject(io(this));const t=e?Ht(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yi(this.app)?Promise.reject(io(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yi(this.app)?Promise.reject(io(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AS(this),t=new xS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await SS(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&wi(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await sa.create(this,[wi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,o);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=L0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&lS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ah(n){return Ht(n)}class uv{constructor(e){this.auth=e,this.observer=null,this.addObserver=X1(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bS(n){kp=n}function NS(n){return kp.loadJS(n)}function OS(){return kp.gapiScript}function LS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(n,e){const t=wp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Dc(a,e??{}))return o;Gr(o,"already-initialized")}return t.initialize({options:e})}function VS(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(wi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function FS(n,e,t){const i=ah(n);Oe(i._canInitEmulator,i,"emulator-config-failed"),Oe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=M0(e),{host:u,port:d}=US(e),f=d===null?"":`:${d}`;i.config.emulator={url:`${a}//${u}${f}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),jS()}function M0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function US(n){const e=M0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:cv(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:cv(u)}}}function cv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function jS(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,t){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(n,e){return mS(n,"POST","/v1/accounts:signInWithIdp",Pp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="http://localhost";class ao extends V0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Tp(t,["providerId","signInMethod"]);if(!i||!o)return null;const u=new ao(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return oa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,oa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,oa(e,t)}buildRequest(){const e={requestUri:zS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends xp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Ll{constructor(){super("facebook.com")}static credential(e){return ao._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.FACEBOOK_SIGN_IN_METHOD="facebook.com";us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Ll{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ao._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return gi.credential(t,i)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Ll{constructor(){super("github.com")}static credential(e){return ao._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Ll{constructor(){super("twitter.com")}static credential(e,t){return ao._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return hs.credential(t,i)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await _i._fromIdTokenResponse(e,i,o),u=hv(i);return new ua({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=hv(i);return new ua({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function hv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends ki{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Lc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Lc(e,t,i,o)}}function F0(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Lc._fromErrorAndOperation(n,a,e,i):a})}async function BS(n,e,t=!1){const i=await wl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ua._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(n,e,t=!1){const{auth:i}=n;if(yi(i.app))return Promise.reject(io(i));const o="reauthenticate";try{const a=await wl(n,F0(i,o,e,n),t);Oe(a.idToken,i,"internal-error");const u=Cp(a.idToken);Oe(u,i,"internal-error");const{sub:d}=u;return Oe(n.uid===d,i,"user-mismatch"),ua._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Gr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(n,e,t=!1){if(yi(n.app))return Promise.reject(io(n));const i="signIn",o=await F0(n,i,e),a=await ua._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}function WS(n,e,t,i){return Ht(n).onIdTokenChanged(e,t,i)}function qS(n,e,t){return Ht(n).beforeAuthStateChanged(e,t)}function GS(n,e,t,i){return Ht(n).onAuthStateChanged(e,t,i)}function KS(n){return Ht(n).signOut()}const Mc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mc,"1"),this.storage.removeItem(Mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=1e3,YS=10;class j0 extends U0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);PS()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,YS):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},QS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}j0.type="LOCAL";const XS=j0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends U0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}z0.type="SESSION";const B0=z0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new lh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await JS(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=Dp("",20);o.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(w){const T=w;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(T.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(){return window}function eR(n){$r().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(){return typeof $r().WorkerGlobalScope<"u"&&typeof $r().importScripts=="function"}async function tR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nR(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function rR(){return $0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="firebaseLocalStorageDb",iR=1,Vc="firebaseLocalStorage",W0="fbase_key";class Ml{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function uh(n,e){return n.transaction([Vc],e?"readwrite":"readonly").objectStore(Vc)}function sR(){const n=indexedDB.deleteDatabase(H0);return new Ml(n).toPromise()}function $f(){const n=indexedDB.open(H0,iR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Vc,{keyPath:W0})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Vc)?e(i):(i.close(),await sR(),e(await $f()))})})}async function dv(n,e,t){const i=uh(n,!0).put({[W0]:e,value:t});return new Ml(i).toPromise()}async function oR(n,e){const t=uh(n,!1).get(e),i=await new Ml(t).toPromise();return i===void 0?null:i.value}function fv(n,e){const t=uh(n,!0).delete(e);return new Ml(t).toPromise()}const aR=800,lR=3;class q0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $f(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>lR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lh._getInstance(rR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await tR(),!this.activeServiceWorker)return;this.sender=new ZS(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $f();return await dv(e,Mc,"1"),await fv(e,Mc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>dv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>oR(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=uh(o,!1).getAll();return new Ml(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}q0.type="LOCAL";const uR=q0;new Ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(n,e){return e?wi(e):(Oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends V0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return oa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cR(n){return HS(n.auth,new bp(n),n.bypassAuthState)}function hR(n){const{auth:e,user:t}=n;return Oe(t,e,"internal-error"),$S(t,new bp(n),n.bypassAuthState)}async function dR(n){const{auth:e,user:t}=n;return Oe(t,e,"internal-error"),BS(t,new bp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cR;case"linkViaPopup":case"linkViaRedirect":return dR;case"reauthViaPopup":case"reauthViaRedirect":return hR;default:Gr(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new Ol(2e3,1e4);async function pR(n,e,t){if(yi(n.app))return Promise.reject(Rr(n,"operation-not-supported-in-this-environment"));const i=ah(n);uS(n,e,xp);const o=G0(i,t);return new eo(i,"signInViaPopup",e,o).executeNotNull()}class eo extends K0{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=Dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fR.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="pendingRedirect",mc=new Map;class gR extends K0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=mc.get(this.auth._key());if(!e){try{const i=await yR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}mc.set(this.auth._key(),e)}return this.bypassAuthState||mc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yR(n,e){const t=wR(e),i=_R(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function vR(n,e){mc.set(n._key(),e)}function _R(n){return wi(n._redirectPersistence)}function wR(n){return pc(mR,n.config.apiKey,n.name)}async function ER(n,e,t=!1){if(yi(n.app))return Promise.reject(io(n));const i=ah(n),o=G0(i,e),u=await new gR(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=10*60*1e3;class IR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Q0(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Rr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TR&&this.cachedEventUids.clear(),this.cachedEventUids.has(pv(e))}saveEventToCache(e){this.cachedEventUids.add(pv(e)),this.lastProcessedEventTime=Date.now()}}function pv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Q0({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(n,e={}){return _a(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CR=/^https?/;async function AR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await RR(n);for(const t of e)try{if(kR(t))return}catch{}Gr(n,"unauthorized-domain")}function kR(n){const e=zf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!CR.test(t))return!1;if(PR.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=new Ol(3e4,6e4);function mv(){const n=$r().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function DR(n){return new Promise((e,t)=>{var i,o,a;function u(){mv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mv(),t(Rr(n,"network-request-failed"))},timeout:xR.get()})}if(!((o=(i=$r().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=$r().gapi)===null||a===void 0)&&a.load)u();else{const d=LS("iframefcb");return $r()[d]=()=>{gapi.load?u():t(Rr(n,"network-request-failed"))},NS(`${OS()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw gc=null,e})}let gc=null;function bR(n){return gc=gc||DR(n),gc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Ol(5e3,15e3),OR="__/auth/iframe",LR="emulator/auth/iframe",MR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FR(n){const e=n.config;Oe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Rp(e,LR):`https://${n.config.authDomain}/${OR}`,i={apiKey:e.apiKey,appName:n.name,v:va},o=VR.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Nl(i).slice(1)}`}async function UR(n){const e=await bR(n),t=$r().gapi;return Oe(t,n,"internal-error"),e.open({where:document.body,url:FR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MR,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Rr(n,"network-request-failed"),d=$r().setTimeout(()=>{a(u)},NR.get());function f(){$r().clearTimeout(d),o(i)}i.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zR=500,BR=600,$R="_blank",HR="http://localhost";class gv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WR(n,e,t,i=zR,o=BR){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},jR),{width:i.toString(),height:o.toString(),top:a,left:u}),m=gn().toLowerCase();t&&(d=k0(m)?$R:t),C0(m)&&(e=e||HR,f.scrollbars="yes");const v=Object.entries(f).reduce((T,[R,C])=>`${T}${R}=${C},`,"");if(RS(m)&&d!=="_self")return qR(e||"",d),new gv(null);const w=window.open(e||"",d,v);Oe(w,n,"popup-blocked");try{w.focus()}catch{}return new gv(w)}function qR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="__/auth/handler",KR="emulator/auth/handler",QR=encodeURIComponent("fac");async function yv(n,e,t,i,o,a){Oe(n.config.authDomain,n,"auth-domain-config-required"),Oe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:va,eventId:o};if(e instanceof xp){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Y1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))u[v]=w}if(e instanceof Ll){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await n._getAppCheckToken(),m=f?`#${QR}=${encodeURIComponent(f)}`:"";return`${YR(n)}?${Nl(d).slice(1)}${m}`}function YR({config:n}){return n.emulator?Rp(n,KR):`https://${n.authDomain}/${GR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="webStorageSupport";class XR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B0,this._completeRedirectFn=ER,this._overrideRedirectResult=vR}async _openPopup(e,t,i,o){var a;Ri((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await yv(e,t,i,zf(),o);return WR(e,u,Dp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await yv(e,t,i,zf(),o);return eR(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Ri(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await UR(e),i=new IR(e);return t.register("authEvent",o=>(Oe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_f,{type:_f},o=>{var a;const u=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[_f];u!==void 0&&t(!!u),Gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=AR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return O0()||A0()||Ap()}}const JR=XR;var vv="@firebase/auth",_v="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tP(n){la(new oo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Oe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:L0(n)},m=new DS(i,o,a,f);return VS(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),la(new oo("auth-internal",e=>{const t=ah(e.getProvider("auth").getImmediate());return(i=>new ZR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs(vv,_v,eP(n)),gs(vv,_v,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=5*60,rP=f0("authIdTokenMaxAge")||nP;let wv=null;const iP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>rP)return;const o=t==null?void 0:t.token;wv!==o&&(wv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Y0(n=g0()){const e=wp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=MS(n,{popupRedirectResolver:JR,persistence:[uR,XS,B0]}),i=f0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=iP(a.toString());qS(t,u,()=>u(t.currentUser)),WS(t,d=>u(d))}}const o=h0("auth");return o&&FS(t,`http://${o}`),t}function sP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}bS({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=Rr("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",sP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tP("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function oP(n,e,t,i){function o(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function d(v){try{m(i.next(v))}catch(w){u(w)}}function f(v){try{m(i.throw(v))}catch(w){u(w)}}function m(v){v.done?a(v.value):o(v.value).then(d,f)}m((i=i.apply(n,[])).next())})}function aP(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(m){return function(v){return f([m,v])}}function f(m){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(a=m[0]&2?o.return:m[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,m[1])).done)return a;switch(o=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return t.label++,{value:m[1],done:!1};case 5:t.label++,o=m[1],m=[0];continue;case 7:m=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){t=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){t.label=m[1];break}if(m[0]===6&&t.label<a[1]){t.label=a[1],a=m;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(m);break}a[2]&&t.ops.pop(),t.trys.pop();continue}m=e.call(n,t)}catch(v){m=[6,v],o=0}finally{i=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ra=function(){return ra=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ra.apply(this,arguments)},X0=function(n){return{loading:n==null,value:n}},lP=function(){return function(n,e){switch(e.type){case"error":return ra(ra({},n),{error:e.error,loading:!1,value:void 0});case"reset":return X0(e.defaultValue);case"value":return ra(ra({},n),{error:void 0,loading:!1,value:e.value});default:return n}}},uP=function(n){var e=n?n():void 0,t=H.useReducer(lP(),X0(e)),i=t[0],o=t[1],a=H.useCallback(function(){var f=n?n():void 0;o({type:"reset",defaultValue:f})},[n]),u=H.useCallback(function(f){o({type:"error",error:f})},[]),d=H.useCallback(function(f){o({type:"value",value:f})},[]);return H.useMemo(function(){return{error:i.error,loading:i.loading,reset:a,setError:u,setValue:d,value:i.value}},[i.error,i.loading,a,u,d,i.value])},cP=function(n,e){var t=uP(function(){return n.currentUser}),i=t.error,o=t.loading,a=t.setError,u=t.setValue,d=t.value;return H.useEffect(function(){var f=GS(n,function(m){return oP(void 0,void 0,void 0,function(){var v;return aP(this,function(w){switch(w.label){case 0:return[3,4];case 1:return w.trys.push([1,3,,4]),[4,e.onUserChanged(m)];case 2:return w.sent(),[3,4];case 3:return v=w.sent(),a(v),[3,4];case 4:return u(m),[2]}})})},a);return function(){f()}},[n]),[d,o,i]},hP="firebase",dP="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(hP,dP,"app");var nl={},Ev;function fP(){if(Ev)return nl;Ev=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.parse=u,nl.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function u(T,R){const C=new a,M=T.length;if(M<2)return C;const b=(R==null?void 0:R.decode)||v;let U=0;do{const Z=T.indexOf("=",U);if(Z===-1)break;const Q=T.indexOf(";",U),X=Q===-1?M:Q;if(Z>X){U=T.lastIndexOf(";",Z-1)+1;continue}const L=d(T,U,Z),te=f(T,Z,L),k=T.slice(L,te);if(C[k]===void 0){let S=d(T,Z+1,X),P=f(T,X,S);const D=b(T.slice(S,P));C[k]=D}U=X+1}while(U<M);return C}function d(T,R,C){do{const M=T.charCodeAt(R);if(M!==32&&M!==9)return R}while(++R<C);return C}function f(T,R,C){for(;R>C;){const M=T.charCodeAt(--R);if(M!==32&&M!==9)return R+1}return C}function m(T,R,C){const M=(C==null?void 0:C.encode)||encodeURIComponent;if(!n.test(T))throw new TypeError(`argument name is invalid: ${T}`);const b=M(R);if(!e.test(b))throw new TypeError(`argument val is invalid: ${R}`);let U=T+"="+b;if(!C)return U;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);U+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);U+="; Domain="+C.domain}if(C.path){if(!i.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);U+="; Path="+C.path}if(C.expires){if(!w(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);U+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(U+="; HttpOnly"),C.secure&&(U+="; Secure"),C.partitioned&&(U+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return U}function v(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function w(T){return o.call(T)==="[object Date]"}return nl}fP();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Tv="popstate";function pP(n={}){function e(i,o){let{pathname:a,search:u,hash:d}=i.location;return El("",{pathname:a,search:u,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:vs(o)}return gP(e,t,null,n)}function Ge(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function nn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mP(){return Math.random().toString(36).substring(2,10)}function Iv(n,e){return{usr:n.state,key:n.key,idx:e}}function El(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ps(e):e,state:t,key:e&&e.key||i||mP()}}function vs({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ps(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function gP(n,e,t,i={}){let{window:o=document.defaultView,v5Compat:a=!1}=i,u=o.history,d="POP",f=null,m=v();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function v(){return(u.state||{idx:null}).idx}function w(){d="POP";let b=v(),U=b==null?null:b-m;m=b,f&&f({action:d,location:M.location,delta:U})}function T(b,U){d="PUSH";let Z=El(M.location,b,U);m=v()+1;let Q=Iv(Z,m),X=M.createHref(Z);try{u.pushState(Q,"",X)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;o.location.assign(X)}a&&f&&f({action:d,location:M.location,delta:1})}function R(b,U){d="REPLACE";let Z=El(M.location,b,U);m=v();let Q=Iv(Z,m),X=M.createHref(Z);u.replaceState(Q,"",X),a&&f&&f({action:d,location:M.location,delta:0})}function C(b){let U=o.location.origin!=="null"?o.location.origin:o.location.href,Z=typeof b=="string"?b:vs(b);return Z=Z.replace(/ $/,"%20"),Ge(U,`No window.location.(origin|href) available to create URL for href: ${Z}`),new URL(Z,U)}let M={get action(){return d},get location(){return n(o,u)},listen(b){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Tv,w),f=b,()=>{o.removeEventListener(Tv,w),f=null}},createHref(b){return e(o,b)},createURL:C,encodeLocation(b){let U=C(b);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:T,replace:R,go(b){return u.go(b)}};return M}var yP=new Set(["lazy","caseSensitive","path","id","index","children"]);function vP(n){return n.index===!0}function Fc(n,e,t=[],i={}){return n.map((o,a)=>{let u=[...t,String(a)],d=typeof o.id=="string"?o.id:u.join("-");if(Ge(o.index!==!0||!o.children,"Cannot specify children on an index route"),Ge(!i[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),vP(o)){let f={...o,...e(o),id:d};return i[d]=f,f}else{let f={...o,...e(o),id:d,children:void 0};return i[d]=f,o.children&&(f.children=Fc(o.children,e,u,i)),f}})}function ds(n,e,t="/"){return yc(n,e,t,!1)}function yc(n,e,t,i){let o=typeof e=="string"?Ps(e):e,a=Cr(o.pathname||"/",t);if(a==null)return null;let u=J0(n);wP(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=DP(a);d=kP(u[f],m,i)}return d}function _P(n,e){let{route:t,pathname:i,params:o}=n;return{id:t.id,pathname:i,params:o,data:e[t.id],handle:t.handle}}function J0(n,e=[],t=[],i=""){let o=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Ge(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let m=Hr([i,f.relativePath]),v=t.concat(f);a.children&&a.children.length>0&&(Ge(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),J0(a.children,e,v,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:CP(m,a.index),routesMeta:v})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))o(a,u);else for(let f of Z0(a.path))o(a,u,f)}),e}function Z0(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let u=Z0(i.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),o&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function wP(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:AP(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var EP=/^:[\w-]+$/,TP=3,IP=2,SP=1,RP=10,PP=-2,Sv=n=>n==="*";function CP(n,e){let t=n.split("/"),i=t.length;return t.some(Sv)&&(i+=PP),e&&(i+=IP),t.filter(o=>!Sv(o)).reduce((o,a)=>o+(EP.test(a)?TP:a===""?SP:RP),i)}function AP(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function kP(n,e,t=!1){let{routesMeta:i}=n,o={},a="/",u=[];for(let d=0;d<i.length;++d){let f=i[d],m=d===i.length-1,v=a==="/"?e:e.slice(a.length)||"/",w=Uc({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),T=f.route;if(!w&&m&&t&&!i[i.length-1].route.index&&(w=Uc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!w)return null;Object.assign(o,w.params),u.push({params:o,pathname:Hr([a,w.pathname]),pathnameBase:OP(Hr([a,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(a=Hr([a,w.pathnameBase]))}return u}function Uc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=xP(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],u=a.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((m,{paramName:v,isOptional:w},T)=>{if(v==="*"){let C=d[T]||"";u=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const R=d[T];return w&&!R?m[v]=void 0:m[v]=(R||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function xP(n,e=!1,t=!0){nn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(i.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function DP(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nn(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Cr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function bP(n,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Ps(n):n;return{pathname:t?t.startsWith("/")?t:NP(t,e):e,search:LP(i),hash:MP(o)}}function NP(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function wf(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ew(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Np(n){let e=ew(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Op(n,e,t,i=!1){let o;typeof n=="string"?o=Ps(n):(o={...n},Ge(!o.pathname||!o.pathname.includes("?"),wf("?","pathname","search",o)),Ge(!o.pathname||!o.pathname.includes("#"),wf("#","pathname","hash",o)),Ge(!o.search||!o.search.includes("#"),wf("#","search","hash",o)));let a=n===""||o.pathname==="",u=a?"/":o.pathname,d;if(u==null)d=t;else{let w=e.length-1;if(!i&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),w-=1;o.pathname=T.join("/")}d=w>=0?e[w]:"/"}let f=bP(o,d),m=u&&u!=="/"&&u.endsWith("/"),v=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}var Hr=n=>n.join("/").replace(/\/\/+/g,"/"),OP=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),LP=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,MP=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,jc=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function ch(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var tw=["POST","PUT","PATCH","DELETE"],VP=new Set(tw),FP=["GET",...tw],UP=new Set(FP),jP=new Set([301,302,303,307,308]),zP=new Set([307,308]),Ef={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},BP={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},rl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Lp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$P=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),nw="remix-router-transitions",rw=Symbol("ResetLoaderData");function HP(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Ge(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=n.mapRouteProperties||$P,o={},a=Fc(n.routes,i,void 0,o),u,d=n.basename||"/",f=n.dataStrategy||QP,m=n.patchRoutesOnNavigation,v={...n.future},w=null,T=new Set,R=null,C=null,M=null,b=n.hydrationData!=null,U=ds(a,n.history.location,d),Z=null;if(U==null&&!m){let O=rr(404,{pathname:n.history.location.pathname}),{matches:z,route:K}=Lv(a);U=z,Z={[K.id]:O}}U&&!n.hydrationData&&ar(U,a,n.history.location.pathname).active&&(U=null);let Q;if(U)if(U.some(O=>O.route.lazy))Q=!1;else if(!U.some(O=>O.route.loader))Q=!0;else{let O=n.hydrationData?n.hydrationData.loaderData:null,z=n.hydrationData?n.hydrationData.errors:null;if(z){let K=U.findIndex(ee=>z[ee.route.id]!==void 0);Q=U.slice(0,K+1).every(ee=>!Wf(ee.route,O,z))}else Q=U.every(K=>!Wf(K.route,O,z))}else{Q=!1,U=[];let O=ar(null,a,n.history.location.pathname);O.active&&O.matches&&(U=O.matches)}let X,L={historyAction:n.history.action,location:n.history.location,matches:U,initialized:Q,navigation:Ef,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||Z,fetchers:new Map,blockers:new Map},te="POP",k=!1,S,P=!1,D=new Map,V=null,B=!1,x=!1,ht=new Set,Ke=new Map,Ct=0,Qe=-1,ue=new Map,Ie=new Set,de=new Map,j=new Map,J=new Set,Ee=new Map,Me,Ne=null;function ze(){if(w=n.history.listen(({action:O,location:z,delta:K})=>{if(Me){Me(),Me=void 0;return}nn(Ee.size===0||K!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ee=Vi({currentLocation:L.location,nextLocation:z,historyAction:O});if(ee&&K!=null){let fe=new Promise(ye=>{Me=ye});n.history.go(K*-1),br(ee,{state:"blocked",location:z,proceed(){br(ee,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),fe.then(()=>n.history.go(K))},reset(){let ye=new Map(L.blockers);ye.set(ee,rl),Fe({blockers:ye})}});return}return sn(O,z)}),t){oC(e,D);let O=()=>aC(e,D);e.addEventListener("pagehide",O),V=()=>e.removeEventListener("pagehide",O)}return L.initialized||sn("POP",L.location,{initialHydration:!0}),X}function Ze(){w&&w(),V&&V(),T.clear(),S&&S.abort(),L.fetchers.forEach((O,z)=>Ln(z)),L.blockers.forEach((O,z)=>Mi(z))}function et(O){return T.add(O),()=>T.delete(O)}function Fe(O,z={}){L={...L,...O};let K=[],ee=[];L.fetchers.forEach((fe,ye)=>{fe.state==="idle"&&(J.has(ye)?K.push(ye):ee.push(ye))}),[...T].forEach(fe=>fe(L,{deletedFetchers:K,viewTransitionOpts:z.viewTransitionOpts,flushSync:z.flushSync===!0})),K.forEach(fe=>Ln(fe)),ee.forEach(fe=>L.fetchers.delete(fe))}function ft(O,z,{flushSync:K}={}){var ce,xe;let ee=L.actionData!=null&&L.navigation.formMethod!=null&&Ir(L.navigation.formMethod)&&L.navigation.state==="loading"&&((ce=O.state)==null?void 0:ce._isRedirect)!==!0,fe;z.actionData?Object.keys(z.actionData).length>0?fe=z.actionData:fe=null:ee?fe=L.actionData:fe=null;let ye=z.loaderData?Nv(L.loaderData,z.loaderData,z.matches||[],z.errors):L.loaderData,Ce=L.blockers;Ce.size>0&&(Ce=new Map(Ce),Ce.forEach((Ue,it)=>Ce.set(it,rl)));let pe=k===!0||L.navigation.formMethod!=null&&Ir(L.navigation.formMethod)&&((xe=O.state)==null?void 0:xe._isRedirect)!==!0;u&&(a=u,u=void 0),B||te==="POP"||(te==="PUSH"?n.history.push(O,O.state):te==="REPLACE"&&n.history.replace(O,O.state));let we;if(te==="POP"){let Ue=D.get(L.location.pathname);Ue&&Ue.has(O.pathname)?we={currentLocation:L.location,nextLocation:O}:D.has(O.pathname)&&(we={currentLocation:O,nextLocation:L.location})}else if(P){let Ue=D.get(L.location.pathname);Ue?Ue.add(O.pathname):(Ue=new Set([O.pathname]),D.set(L.location.pathname,Ue)),we={currentLocation:L.location,nextLocation:O}}Fe({...z,actionData:fe,loaderData:ye,historyAction:te,location:O,initialized:!0,navigation:Ef,revalidation:"idle",restoreScrollPosition:Mn(O,z.matches||L.matches),preventScrollReset:pe,blockers:Ce},{viewTransitionOpts:we,flushSync:K===!0}),te="POP",k=!1,P=!1,B=!1,x=!1,Ne==null||Ne.resolve(),Ne=null}async function Kn(O,z){if(typeof O=="number"){n.history.go(O);return}let K=Hf(L.location,L.matches,d,O,z==null?void 0:z.fromRouteId,z==null?void 0:z.relative),{path:ee,submission:fe,error:ye}=Rv(!1,K,z),Ce=L.location,pe=El(L.location,ee,z&&z.state);pe={...pe,...n.history.encodeLocation(pe)};let we=z&&z.replace!=null?z.replace:void 0,ce="PUSH";we===!0?ce="REPLACE":we===!1||fe!=null&&Ir(fe.formMethod)&&fe.formAction===L.location.pathname+L.location.search&&(ce="REPLACE");let xe=z&&"preventScrollReset"in z?z.preventScrollReset===!0:void 0,Ue=(z&&z.flushSync)===!0,it=Vi({currentLocation:Ce,nextLocation:pe,historyAction:ce});if(it){br(it,{state:"blocked",location:pe,proceed(){br(it,{state:"proceeding",proceed:void 0,reset:void 0,location:pe}),Kn(O,z)},reset(){let Rt=new Map(L.blockers);Rt.set(it,rl),Fe({blockers:Rt})}});return}await sn(ce,pe,{submission:fe,pendingError:ye,preventScrollReset:xe,replace:z&&z.replace,enableViewTransition:z&&z.viewTransition,flushSync:Ue})}function Di(){Ne||(Ne=lC()),kr(),Fe({revalidation:"loading"});let O=Ne.promise;return L.navigation.state==="submitting"?O:L.navigation.state==="idle"?(sn(L.historyAction,L.location,{startUninterruptedRevalidation:!0}),O):(sn(te||L.historyAction,L.navigation.location,{overrideNavigation:L.navigation,enableViewTransition:P===!0}),O)}async function sn(O,z,K){S&&S.abort(),S=null,te=O,B=(K&&K.startUninterruptedRevalidation)===!0,In(L.location,L.matches),k=(K&&K.preventScrollReset)===!0,P=(K&&K.enableViewTransition)===!0;let ee=u||a,fe=K&&K.overrideNavigation,ye=ds(ee,z,d),Ce=(K&&K.flushSync)===!0,pe=ar(ye,ee,z.pathname);if(pe.active&&pe.matches&&(ye=pe.matches),!ye){let{error:He,notFoundMatches:tt,route:st}=or(z.pathname);ft(z,{matches:tt,loaderData:{},errors:{[st.id]:He}},{flushSync:Ce});return}if(L.initialized&&!x&&tC(L.location,z)&&!(K&&K.submission&&Ir(K.submission.formMethod))){ft(z,{matches:ye},{flushSync:Ce});return}S=new AbortController;let we=Jo(n.history,z,S.signal,K&&K.submission),ce;if(K&&K.pendingError)ce=[Zs(ye).route.id,{type:"error",error:K.pendingError}];else if(K&&K.submission&&Ir(K.submission.formMethod)){let He=await Yr(we,z,K.submission,ye,pe.active,{replace:K.replace,flushSync:Ce});if(He.shortCircuited)return;if(He.pendingActionResult){let[tt,st]=He.pendingActionResult;if($n(st)&&ch(st.error)&&st.error.status===404){S=null,ft(z,{matches:He.matches,loaderData:{},errors:{[tt]:st.error}});return}}ye=He.matches||ye,ce=He.pendingActionResult,fe=Tf(z,K.submission),Ce=!1,pe.active=!1,we=Jo(n.history,we.url,we.signal)}let{shortCircuited:xe,matches:Ue,loaderData:it,errors:Rt}=await bi(we,z,ye,pe.active,fe,K&&K.submission,K&&K.fetcherSubmission,K&&K.replace,K&&K.initialHydration===!0,Ce,ce);xe||(S=null,ft(z,{matches:Ue||ye,...Ov(ce),loaderData:it,errors:Rt}))}async function Yr(O,z,K,ee,fe,ye={}){kr();let Ce=iC(z,K);if(Fe({navigation:Ce},{flushSync:ye.flushSync===!0}),fe){let ce=await yn(ee,z.pathname,O.signal);if(ce.type==="aborted")return{shortCircuited:!0};if(ce.type==="error"){let xe=Zs(ce.partialMatches).route.id;return{matches:ce.partialMatches,pendingActionResult:[xe,{type:"error",error:ce.error}]}}else if(ce.matches)ee=ce.matches;else{let{notFoundMatches:xe,error:Ue,route:it}=or(z.pathname);return{matches:xe,pendingActionResult:[it.id,{type:"error",error:Ue}]}}}let pe,we=al(ee,z);if(!we.route.action&&!we.route.lazy)pe={type:"error",error:rr(405,{method:O.method,pathname:z.pathname,routeId:we.route.id})};else if(pe=(await sr("action",L,O,[we],ee,null))[we.route.id],O.signal.aborted)return{shortCircuited:!0};if(to(pe)){let ce;return ye&&ye.replace!=null?ce=ye.replace:ce=xv(pe.response.headers.get("Location"),new URL(O.url),d)===L.location.pathname+L.location.search,await Wt(O,pe,!0,{submission:K,replace:ce}),{shortCircuited:!0}}if($n(pe)){let ce=Zs(ee,we.route.id);return(ye&&ye.replace)!==!0&&(te="PUSH"),{matches:ee,pendingActionResult:[ce.route.id,pe]}}return{matches:ee,pendingActionResult:[we.route.id,pe]}}async function bi(O,z,K,ee,fe,ye,Ce,pe,we,ce,xe){let Ue=fe||Tf(z,ye),it=ye||Ce||Vv(Ue),Rt=!B&&!we;if(ee){if(Rt){let pt=Ni(xe);Fe({navigation:Ue,...pt!==void 0?{actionData:pt}:{}},{flushSync:ce})}let Ye=await yn(K,z.pathname,O.signal);if(Ye.type==="aborted")return{shortCircuited:!0};if(Ye.type==="error"){let pt=Zs(Ye.partialMatches).route.id;return{matches:Ye.partialMatches,loaderData:{},errors:{[pt]:Ye.error}}}else if(Ye.matches)K=Ye.matches;else{let{error:pt,notFoundMatches:Kt,route:hr}=or(z.pathname);return{matches:Kt,loaderData:{},errors:{[hr.id]:pt}}}}let He=u||a,[tt,st]=Cv(n.history,L,K,it,z,we===!0,x,ht,J,de,Ie,He,d,xe);if(Qe=++Ct,tt.length===0&&st.length===0){let Ye=Dr();return ft(z,{matches:K,loaderData:{},errors:xe&&$n(xe[1])?{[xe[0]]:xe[1].error}:null,...Ov(xe),...Ye?{fetchers:new Map(L.fetchers)}:{}},{flushSync:ce}),{shortCircuited:!0}}if(Rt){let Ye={};if(!ee){Ye.navigation=Ue;let pt=Ni(xe);pt!==void 0&&(Ye.actionData=pt)}st.length>0&&(Ye.fetchers=ks(st)),Fe(Ye,{flushSync:ce})}st.forEach(Ye=>{qt(Ye.key),Ye.controller&&Ke.set(Ye.key,Ye.controller)});let lr=()=>st.forEach(Ye=>qt(Ye.key));S&&S.signal.addEventListener("abort",lr);let{loaderResults:ur,fetcherResults:on}=await Xr(L,K,tt,st,O);if(O.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",lr),st.forEach(Ye=>Ke.delete(Ye.key));let Gt=rc(ur);if(Gt)return await Wt(O,Gt.result,!0,{replace:pe}),{shortCircuited:!0};if(Gt=rc(on),Gt)return Ie.add(Gt.key),await Wt(O,Gt.result,!0,{replace:pe}),{shortCircuited:!0};let{loaderData:ei,errors:Nr}=bv(L,K,ur,xe,st,on);we&&L.errors&&(Nr={...L.errors,...Nr});let cr=Dr(),ot=Li(Qe),ti=cr||ot||st.length>0;return{matches:K,loaderData:ei,errors:Nr,...ti?{fetchers:new Map(L.fetchers)}:{}}}function Ni(O){if(O&&!$n(O[1]))return{[O[0]]:O[1].data};if(L.actionData)return Object.keys(L.actionData).length===0?null:L.actionData}function ks(O){return O.forEach(z=>{let K=L.fetchers.get(z.key),ee=il(void 0,K?K.data:void 0);L.fetchers.set(z.key,ee)}),new Map(L.fetchers)}async function yo(O,z,K,ee){qt(O);let fe=(ee&&ee.flushSync)===!0,ye=u||a,Ce=Hf(L.location,L.matches,d,K,z,ee==null?void 0:ee.relative),pe=ds(ye,Ce,d),we=ar(pe,ye,Ce);if(we.active&&we.matches&&(pe=we.matches),!pe){lt(O,z,rr(404,{pathname:Ce}),{flushSync:fe});return}let{path:ce,submission:xe,error:Ue}=Rv(!0,Ce,ee);if(Ue){lt(O,z,Ue,{flushSync:fe});return}let it=al(pe,ce),Rt=(ee&&ee.preventScrollReset)===!0;if(xe&&Ir(xe.formMethod)){await Oi(O,z,ce,it,pe,we.active,fe,Rt,xe);return}de.set(O,{routeId:z,path:ce}),await ir(O,z,ce,it,pe,we.active,fe,Rt,xe)}async function Oi(O,z,K,ee,fe,ye,Ce,pe,we){kr(),de.delete(O);function ce(mt){if(!mt.route.action&&!mt.route.lazy){let Sn=rr(405,{method:we.formMethod,pathname:K,routeId:z});return lt(O,z,Sn,{flushSync:Ce}),!0}return!1}if(!ye&&ce(ee))return;let xe=L.fetchers.get(O);Tn(O,sC(we,xe),{flushSync:Ce});let Ue=new AbortController,it=Jo(n.history,K,Ue.signal,we);if(ye){let mt=await yn(fe,K,it.signal);if(mt.type==="aborted")return;if(mt.type==="error"){lt(O,z,mt.error,{flushSync:Ce});return}else if(mt.matches){if(fe=mt.matches,ee=al(fe,K),ce(ee))return}else{lt(O,z,rr(404,{pathname:K}),{flushSync:Ce});return}}Ke.set(O,Ue);let Rt=Ct,tt=(await sr("action",L,it,[ee],fe,O))[ee.route.id];if(it.signal.aborted){Ke.get(O)===Ue&&Ke.delete(O);return}if(J.has(O)){if(to(tt)||$n(tt)){Tn(O,ls(void 0));return}}else{if(to(tt))if(Ke.delete(O),Qe>Rt){Tn(O,ls(void 0));return}else return Ie.add(O),Tn(O,il(we)),Wt(it,tt,!1,{fetcherSubmission:we,preventScrollReset:pe});if($n(tt)){lt(O,z,tt.error);return}}let st=L.navigation.location||L.location,lr=Jo(n.history,st,Ue.signal),ur=u||a,on=L.navigation.state!=="idle"?ds(ur,L.navigation.location,d):L.matches;Ge(on,"Didn't find any matches after fetcher action");let Gt=++Ct;ue.set(O,Gt);let ei=il(we,tt.data);L.fetchers.set(O,ei);let[Nr,cr]=Cv(n.history,L,on,we,st,!1,x,ht,J,de,Ie,ur,d,[ee.route.id,tt]);cr.filter(mt=>mt.key!==O).forEach(mt=>{let Sn=mt.key,an=L.fetchers.get(Sn),vo=il(void 0,an?an.data:void 0);L.fetchers.set(Sn,vo),qt(Sn),mt.controller&&Ke.set(Sn,mt.controller)}),Fe({fetchers:new Map(L.fetchers)});let ot=()=>cr.forEach(mt=>qt(mt.key));Ue.signal.addEventListener("abort",ot);let{loaderResults:ti,fetcherResults:Ye}=await Xr(L,on,Nr,cr,lr);if(Ue.signal.aborted)return;Ue.signal.removeEventListener("abort",ot),ue.delete(O),Ke.delete(O),cr.forEach(mt=>Ke.delete(mt.key));let pt=rc(ti);if(pt)return Wt(lr,pt.result,!1,{preventScrollReset:pe});if(pt=rc(Ye),pt)return Ie.add(pt.key),Wt(lr,pt.result,!1,{preventScrollReset:pe});let{loaderData:Kt,errors:hr}=bv(L,on,ti,void 0,cr,Ye);if(L.fetchers.has(O)){let mt=ls(tt.data);L.fetchers.set(O,mt)}Li(Gt),L.navigation.state==="loading"&&Gt>Qe?(Ge(te,"Expected pending action"),S&&S.abort(),ft(L.navigation.location,{matches:on,loaderData:Kt,errors:hr,fetchers:new Map(L.fetchers)})):(Fe({errors:hr,loaderData:Nv(L.loaderData,Kt,on,hr),fetchers:new Map(L.fetchers)}),x=!1)}async function ir(O,z,K,ee,fe,ye,Ce,pe,we){let ce=L.fetchers.get(O);Tn(O,il(we,ce?ce.data:void 0),{flushSync:Ce});let xe=new AbortController,Ue=Jo(n.history,K,xe.signal);if(ye){let tt=await yn(fe,K,Ue.signal);if(tt.type==="aborted")return;if(tt.type==="error"){lt(O,z,tt.error,{flushSync:Ce});return}else if(tt.matches)fe=tt.matches,ee=al(fe,K);else{lt(O,z,rr(404,{pathname:K}),{flushSync:Ce});return}}Ke.set(O,xe);let it=Ct,He=(await sr("loader",L,Ue,[ee],fe,O))[ee.route.id];if(Ke.get(O)===xe&&Ke.delete(O),!Ue.signal.aborted){if(J.has(O)){Tn(O,ls(void 0));return}if(to(He))if(Qe>it){Tn(O,ls(void 0));return}else{Ie.add(O),await Wt(Ue,He,!1,{preventScrollReset:pe});return}if($n(He)){lt(O,z,He.error);return}Tn(O,ls(He.data))}}async function Wt(O,z,K,{submission:ee,fetcherSubmission:fe,preventScrollReset:ye,replace:Ce}={}){z.response.headers.has("X-Remix-Revalidate")&&(x=!0);let pe=z.response.headers.get("Location");Ge(pe,"Expected a Location header on the redirect Response"),pe=xv(pe,new URL(O.url),d);let we=El(L.location,pe,{_isRedirect:!0});if(t){let He=!1;if(z.response.headers.has("X-Remix-Reload-Document"))He=!0;else if(Lp.test(pe)){const tt=n.history.createURL(pe);He=tt.origin!==e.location.origin||Cr(tt.pathname,d)==null}if(He){Ce?e.location.replace(pe):e.location.assign(pe);return}}S=null;let ce=Ce===!0||z.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:xe,formAction:Ue,formEncType:it}=L.navigation;!ee&&!fe&&xe&&Ue&&it&&(ee=Vv(L.navigation));let Rt=ee||fe;if(zP.has(z.response.status)&&Rt&&Ir(Rt.formMethod))await sn(ce,we,{submission:{...Rt,formAction:pe},preventScrollReset:ye||k,enableViewTransition:K?P:void 0});else{let He=Tf(we,ee);await sn(ce,we,{overrideNavigation:He,fetcherSubmission:fe,preventScrollReset:ye||k,enableViewTransition:K?P:void 0})}}async function sr(O,z,K,ee,fe,ye){let Ce,pe={};try{Ce=await YP(f,O,z,K,ee,fe,ye,o,i)}catch(we){return ee.forEach(ce=>{pe[ce.route.id]={type:"error",error:we}}),pe}for(let[we,ce]of Object.entries(Ce))if(nC(ce)){let xe=ce.result;pe[we]={type:"redirect",response:ZP(xe,K,we,fe,d)}}else pe[we]=await JP(ce);return pe}async function Xr(O,z,K,ee,fe){let ye=sr("loader",O,fe,K,z,null),Ce=Promise.all(ee.map(async ce=>{if(ce.matches&&ce.match&&ce.controller){let Ue=(await sr("loader",O,Jo(n.history,ce.path,ce.controller.signal),[ce.match],ce.matches,ce.key))[ce.match.route.id];return{[ce.key]:Ue}}else return Promise.resolve({[ce.key]:{type:"error",error:rr(404,{pathname:ce.path})}})})),pe=await ye,we=(await Ce).reduce((ce,xe)=>Object.assign(ce,xe),{});return{loaderResults:pe,fetcherResults:we}}function kr(){x=!0,de.forEach((O,z)=>{Ke.has(z)&&ht.add(z),qt(z)})}function Tn(O,z,K={}){L.fetchers.set(O,z),Fe({fetchers:new Map(L.fetchers)},{flushSync:(K&&K.flushSync)===!0})}function lt(O,z,K,ee={}){let fe=Zs(L.matches,z);Ln(O),Fe({errors:{[fe.route.id]:K},fetchers:new Map(L.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function St(O){return j.set(O,(j.get(O)||0)+1),J.has(O)&&J.delete(O),L.fetchers.get(O)||BP}function Ln(O){let z=L.fetchers.get(O);Ke.has(O)&&!(z&&z.state==="loading"&&ue.has(O))&&qt(O),de.delete(O),ue.delete(O),Ie.delete(O),J.delete(O),ht.delete(O),L.fetchers.delete(O)}function xs(O){let z=(j.get(O)||0)-1;z<=0?(j.delete(O),J.add(O)):j.set(O,z),Fe({fetchers:new Map(L.fetchers)})}function qt(O){let z=Ke.get(O);z&&(z.abort(),Ke.delete(O))}function xr(O){for(let z of O){let K=St(z),ee=ls(K.data);L.fetchers.set(z,ee)}}function Dr(){let O=[],z=!1;for(let K of Ie){let ee=L.fetchers.get(K);Ge(ee,`Expected fetcher: ${K}`),ee.state==="loading"&&(Ie.delete(K),O.push(K),z=!0)}return xr(O),z}function Li(O){let z=[];for(let[K,ee]of ue)if(ee<O){let fe=L.fetchers.get(K);Ge(fe,`Expected fetcher: ${K}`),fe.state==="loading"&&(qt(K),ue.delete(K),z.push(K))}return xr(z),z.length>0}function Ds(O,z){let K=L.blockers.get(O)||rl;return Ee.get(O)!==z&&Ee.set(O,z),K}function Mi(O){L.blockers.delete(O),Ee.delete(O)}function br(O,z){let K=L.blockers.get(O)||rl;Ge(K.state==="unblocked"&&z.state==="blocked"||K.state==="blocked"&&z.state==="blocked"||K.state==="blocked"&&z.state==="proceeding"||K.state==="blocked"&&z.state==="unblocked"||K.state==="proceeding"&&z.state==="unblocked",`Invalid blocker state transition: ${K.state} -> ${z.state}`);let ee=new Map(L.blockers);ee.set(O,z),Fe({blockers:ee})}function Vi({currentLocation:O,nextLocation:z,historyAction:K}){if(Ee.size===0)return;Ee.size>1&&nn(!1,"A router only supports one blocker at a time");let ee=Array.from(Ee.entries()),[fe,ye]=ee[ee.length-1],Ce=L.blockers.get(fe);if(!(Ce&&Ce.state==="proceeding")&&ye({currentLocation:O,nextLocation:z,historyAction:K}))return fe}function or(O){let z=rr(404,{pathname:O}),K=u||a,{matches:ee,route:fe}=Lv(K);return{notFoundMatches:ee,route:fe,error:z}}function Fi(O,z,K){if(R=O,M=z,C=K||null,!b&&L.navigation===Ef){b=!0;let ee=Mn(L.location,L.matches);ee!=null&&Fe({restoreScrollPosition:ee})}return()=>{R=null,M=null,C=null}}function Jr(O,z){return C&&C(O,z.map(ee=>_P(ee,L.loaderData)))||O.key}function In(O,z){if(R&&M){let K=Jr(O,z);R[K]=M()}}function Mn(O,z){if(R){let K=Jr(O,z),ee=R[K];if(typeof ee=="number")return ee}return null}function ar(O,z,K){if(m)if(O){if(Object.keys(O[0].params).length>0)return{active:!0,matches:yc(z,K,d,!0)}}else return{active:!0,matches:yc(z,K,d,!0)||[]};return{active:!1,matches:null}}async function yn(O,z,K){if(!m)return{type:"success",matches:O};let ee=O;for(;;){let fe=u==null,ye=u||a,Ce=o;try{await m({path:z,matches:ee,patch:(ce,xe)=>{K.aborted||kv(ce,xe,ye,Ce,i)}})}catch(ce){return{type:"error",error:ce,partialMatches:ee}}finally{fe&&!K.aborted&&(a=[...a])}if(K.aborted)return{type:"aborted"};let pe=ds(ye,z,d);if(pe)return{type:"success",matches:pe};let we=yc(ye,z,d,!0);if(!we||ee.length===we.length&&ee.every((ce,xe)=>ce.route.id===we[xe].route.id))return{type:"success",matches:null};ee=we}}function bs(O){o={},u=Fc(O,i,void 0,o)}function Zr(O,z){let K=u==null;kv(O,z,u||a,o,i),K&&(a=[...a],Fe({}))}return X={get basename(){return d},get future(){return v},get state(){return L},get routes(){return a},get window(){return e},initialize:ze,subscribe:et,enableScrollRestoration:Fi,navigate:Kn,fetch:yo,revalidate:Di,createHref:O=>n.history.createHref(O),encodeLocation:O=>n.history.encodeLocation(O),getFetcher:St,deleteFetcher:xs,dispose:Ze,getBlocker:Ds,deleteBlocker:Mi,patchRoutes:Zr,_internalFetchControllers:Ke,_internalSetRoutes:bs},X}function WP(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Hf(n,e,t,i,o,a){let u,d;if(o){u=[];for(let m of e)if(u.push(m),m.route.id===o){d=m;break}}else u=e,d=e[e.length-1];let f=Op(i||".",Np(u),Cr(n.pathname,t)||n.pathname,a==="path");if(i==null&&(f.search=n.search,f.hash=n.hash),(i==null||i===""||i===".")&&d){let m=Mp(f.search);if(d.route.index&&!m)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&m){let v=new URLSearchParams(f.search),w=v.getAll("index");v.delete("index"),w.filter(R=>R).forEach(R=>v.append("index",R));let T=v.toString();f.search=T?`?${T}`:""}}return t!=="/"&&(f.pathname=f.pathname==="/"?t:Hr([t,f.pathname])),vs(f)}function Rv(n,e,t){if(!t||!WP(t))return{path:e};if(t.formMethod&&!rC(t.formMethod))return{path:e,error:rr(405,{method:t.formMethod})};let i=()=>({path:e,error:rr(400,{type:"invalid-body"})}),a=(t.formMethod||"get").toUpperCase(),u=sw(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Ir(a))return i();let w=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((T,[R,C])=>`${T}${R}=${C}
`,""):String(t.body);return{path:e,submission:{formMethod:a,formAction:u,formEncType:t.formEncType,formData:void 0,json:void 0,text:w}}}else if(t.formEncType==="application/json"){if(!Ir(a))return i();try{let w=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:a,formAction:u,formEncType:t.formEncType,formData:void 0,json:w,text:void 0}}}catch{return i()}}}Ge(typeof FormData=="function","FormData is not available in this environment");let d,f;if(t.formData)d=qf(t.formData),f=t.formData;else if(t.body instanceof FormData)d=qf(t.body),f=t.body;else if(t.body instanceof URLSearchParams)d=t.body,f=Dv(d);else if(t.body==null)d=new URLSearchParams,f=new FormData;else try{d=new URLSearchParams(t.body),f=Dv(d)}catch{return i()}let m={formMethod:a,formAction:u,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(Ir(m.formMethod))return{path:e,submission:m};let v=Ps(e);return n&&v.search&&Mp(v.search)&&d.append("index",""),v.search=`?${d}`,{path:vs(v),submission:m}}function Pv(n,e,t=!1){let i=n.findIndex(o=>o.route.id===e);return i>=0?n.slice(0,t?i+1:i):n}function Cv(n,e,t,i,o,a,u,d,f,m,v,w,T,R){let C=R?$n(R[1])?R[1].error:R[1].data:void 0,M=n.createURL(e.location),b=n.createURL(o),U=t;a&&e.errors?U=Pv(t,Object.keys(e.errors)[0],!0):R&&$n(R[1])&&(U=Pv(t,R[0]));let Z=R?R[1].statusCode:void 0,Q=Z&&Z>=400,X=U.filter((te,k)=>{let{route:S}=te;if(S.lazy)return!0;if(S.loader==null)return!1;if(a)return Wf(S,e.loaderData,e.errors);if(qP(e.loaderData,e.matches[k],te))return!0;let P=e.matches[k],D=te;return Av(te,{currentUrl:M,currentParams:P.params,nextUrl:b,nextParams:D.params,...i,actionResult:C,actionStatus:Z,defaultShouldRevalidate:Q?!1:u||M.pathname+M.search===b.pathname+b.search||M.search!==b.search||GP(P,D)})}),L=[];return m.forEach((te,k)=>{if(a||!t.some(B=>B.route.id===te.routeId)||f.has(k))return;let S=ds(w,te.path,T);if(!S){L.push({key:k,routeId:te.routeId,path:te.path,matches:null,match:null,controller:null});return}let P=e.fetchers.get(k),D=al(S,te.path),V=!1;v.has(k)?V=!1:d.has(k)?(d.delete(k),V=!0):P&&P.state!=="idle"&&P.data===void 0?V=u:V=Av(D,{currentUrl:M,currentParams:e.matches[e.matches.length-1].params,nextUrl:b,nextParams:t[t.length-1].params,...i,actionResult:C,actionStatus:Z,defaultShouldRevalidate:Q?!1:u}),V&&L.push({key:k,routeId:te.routeId,path:te.path,matches:S,match:D,controller:new AbortController})}),[X,L]}function Wf(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,o=t!=null&&t[n.id]!==void 0;return!i&&o?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!o}function qP(n,e,t){let i=!e||t.route.id!==e.route.id,o=!n.hasOwnProperty(t.route.id);return i||o}function GP(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Av(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function kv(n,e,t,i,o){let a;if(n){let f=i[n];Ge(f,`No route found to patch children into: routeId = ${n}`),f.children||(f.children=[]),a=f.children}else a=t;let u=e.filter(f=>!a.some(m=>iw(f,m))),d=Fc(u,o,[n||"_","patch",String((a==null?void 0:a.length)||"0")],i);a.push(...d)}function iw(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var o;return(o=e.children)==null?void 0:o.some(a=>iw(t,a))}):!1}async function KP(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let o=t[n.id];Ge(o,"No route found in manifest");let a={};for(let u in i){let f=o[u]!==void 0&&u!=="hasErrorBoundary";nn(!f,`Route "${o.id}" has a static property "${u}" defined but its lazy function is also returning a value for this property. The lazy route property "${u}" will be ignored.`),!f&&!yP.has(u)&&(a[u]=i[u])}Object.assign(o,a),Object.assign(o,{...e(o),lazy:void 0})}async function QP({matches:n}){let e=n.filter(i=>i.shouldLoad);return(await Promise.all(e.map(i=>i.resolve()))).reduce((i,o,a)=>Object.assign(i,{[e[a].route.id]:o}),{})}async function YP(n,e,t,i,o,a,u,d,f,m){let v=a.map(R=>R.route.lazy?KP(R.route,f,d):void 0),w=a.map((R,C)=>{let M=v[C],b=o.some(Z=>Z.route.id===R.route.id);return{...R,shouldLoad:b,resolve:async Z=>(Z&&i.method==="GET"&&(R.route.lazy||R.route.loader)&&(b=!0),b?XP(e,i,R,M,Z,m):Promise.resolve({type:"data",result:void 0}))}}),T=await n({matches:w,request:i,params:a[0].params,fetcherKey:u,context:m});try{await Promise.all(v)}catch{}return T}async function XP(n,e,t,i,o,a){let u,d,f=m=>{let v,w=new Promise((C,M)=>v=M);d=()=>v(),e.signal.addEventListener("abort",d);let T=C=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${n}" [routeId: ${t.route.id}]`)):m({request:e,params:t.params,context:a},...C!==void 0?[C]:[]),R=(async()=>{try{return{type:"data",result:await(o?o(M=>T(M)):T())}}catch(C){return{type:"error",result:C}}})();return Promise.race([R,w])};try{let m=t.route[n];if(i)if(m){let v,[w]=await Promise.all([f(m).catch(T=>{v=T}),i]);if(v!==void 0)throw v;u=w}else if(await i,m=t.route[n],m)u=await f(m);else if(n==="action"){let v=new URL(e.url),w=v.pathname+v.search;throw rr(405,{method:e.method,pathname:w,routeId:t.route.id})}else return{type:"data",result:void 0};else if(m)u=await f(m);else{let v=new URL(e.url),w=v.pathname+v.search;throw rr(404,{pathname:w})}}catch(m){return{type:"error",result:m}}finally{d&&e.signal.removeEventListener("abort",d)}return u}async function JP(n){var i,o,a,u;let{result:e,type:t}=n;if(ow(e)){let d;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?d=null:d=await e.json():d=await e.text()}catch(f){return{type:"error",error:f}}return t==="error"?{type:"error",error:new jc(e.status,e.statusText,d),statusCode:e.status,headers:e.headers}:{type:"data",data:d,statusCode:e.status,headers:e.headers}}if(t==="error"){if(Mv(e)){if(e.data instanceof Error)return{type:"error",error:e.data,statusCode:(i=e.init)==null?void 0:i.status};e=new jc(((o=e.init)==null?void 0:o.status)||500,void 0,e.data)}return{type:"error",error:e,statusCode:ch(e)?e.status:void 0}}return Mv(e)?{type:"data",data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function ZP(n,e,t,i,o){let a=n.headers.get("Location");if(Ge(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Lp.test(a)){let u=i.slice(0,i.findIndex(d=>d.route.id===t)+1);a=Hf(new URL(e.url),u,o,a),n.headers.set("Location",a)}return n}function xv(n,e,t){if(Lp.test(n)){let i=n,o=i.startsWith("//")?new URL(e.protocol+i):new URL(i),a=Cr(o.pathname,t)!=null;if(o.origin===e.origin&&a)return o.pathname+o.search+o.hash}return n}function Jo(n,e,t,i){let o=n.createURL(sw(e)).toString(),a={signal:t};if(i&&Ir(i.formMethod)){let{formMethod:u,formEncType:d}=i;a.method=u.toUpperCase(),d==="application/json"?(a.headers=new Headers({"Content-Type":d}),a.body=JSON.stringify(i.json)):d==="text/plain"?a.body=i.text:d==="application/x-www-form-urlencoded"&&i.formData?a.body=qf(i.formData):a.body=i.formData}return new Request(o,a)}function qf(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function Dv(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function eC(n,e,t,i=!1,o=!1){let a={},u=null,d,f=!1,m={},v=t&&$n(t[1])?t[1].error:void 0;return n.forEach(w=>{if(!(w.route.id in e))return;let T=w.route.id,R=e[T];if(Ge(!to(R),"Cannot handle redirect results in processLoaderData"),$n(R)){let C=R.error;if(v!==void 0&&(C=v,v=void 0),u=u||{},o)u[T]=C;else{let M=Zs(n,T);u[M.route.id]==null&&(u[M.route.id]=C)}i||(a[T]=rw),f||(f=!0,d=ch(R.error)?R.error.status:500),R.headers&&(m[T]=R.headers)}else a[T]=R.data,R.statusCode&&R.statusCode!==200&&!f&&(d=R.statusCode),R.headers&&(m[T]=R.headers)}),v!==void 0&&t&&(u={[t[0]]:v},a[t[0]]=void 0),{loaderData:a,errors:u,statusCode:d||200,loaderHeaders:m}}function bv(n,e,t,i,o,a){let{loaderData:u,errors:d}=eC(e,t,i);return o.forEach(f=>{let{key:m,match:v,controller:w}=f,T=a[m];if(Ge(T,"Did not find corresponding fetcher result"),!(w&&w.signal.aborted))if($n(T)){let R=Zs(n.matches,v==null?void 0:v.route.id);d&&d[R.route.id]||(d={...d,[R.route.id]:T.error}),n.fetchers.delete(m)}else if(to(T))Ge(!1,"Unhandled fetcher revalidation redirect");else{let R=ls(T.data);n.fetchers.set(m,R)}}),{loaderData:u,errors:d}}function Nv(n,e,t,i){let o=Object.entries(e).filter(([,a])=>a!==rw).reduce((a,[u,d])=>(a[u]=d,a),{});for(let a of t){let u=a.route.id;if(!e.hasOwnProperty(u)&&n.hasOwnProperty(u)&&a.route.loader&&(o[u]=n[u]),i&&i.hasOwnProperty(u))break}return o}function Ov(n){return n?$n(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Zs(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function Lv(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function rr(n,{pathname:e,routeId:t,method:i,type:o,message:a}={}){let u="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(u="Bad Request",i&&e&&t?d=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:o==="invalid-body"&&(d="Unable to encode submission body")):n===403?(u="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(u="Not Found",d=`No route matches URL "${e}"`):n===405&&(u="Method Not Allowed",i&&e&&t?d=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:i&&(d=`Invalid request method "${i.toUpperCase()}"`)),new jc(n||500,u,new Error(d),!0)}function rc(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,o]=e[t];if(to(o))return{key:i,result:o}}}function sw(n){let e=typeof n=="string"?Ps(n):n;return vs({...e,hash:""})}function tC(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function nC(n){return ow(n.result)&&jP.has(n.result.status)}function $n(n){return n.type==="error"}function to(n){return(n&&n.type)==="redirect"}function Mv(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function ow(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function rC(n){return UP.has(n.toUpperCase())}function Ir(n){return VP.has(n.toUpperCase())}function Mp(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function al(n,e){let t=typeof e=="string"?Ps(e).search:e.search;if(n[n.length-1].route.index&&Mp(t||""))return n[n.length-1];let i=ew(n);return i[i.length-1]}function Vv(n){let{formMethod:e,formAction:t,formEncType:i,text:o,formData:a,json:u}=n;if(!(!e||!t||!i)){if(o!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:o};if(a!=null)return{formMethod:e,formAction:t,formEncType:i,formData:a,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:u,text:void 0}}}function Tf(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function iC(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function il(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function sC(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ls(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function oC(n,e){try{let t=n.sessionStorage.getItem(nw);if(t){let i=JSON.parse(t);for(let[o,a]of Object.entries(i||{}))a&&Array.isArray(a)&&e.set(o,new Set(a||[]))}}catch{}}function aC(n,e){if(e.size>0){let t={};for(let[i,o]of e)t[i]=[...o];try{n.sessionStorage.setItem(nw,JSON.stringify(t))}catch(i){nn(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function lC(){let n,e,t=new Promise((i,o)=>{n=async a=>{i(a);try{await t}catch{}},e=async a=>{o(a);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var ho=H.createContext(null);ho.displayName="DataRouter";var Vl=H.createContext(null);Vl.displayName="DataRouterState";var Vp=H.createContext({isTransitioning:!1});Vp.displayName="ViewTransition";var aw=H.createContext(new Map);aw.displayName="Fetchers";var uC=H.createContext(null);uC.displayName="Await";var Qr=H.createContext(null);Qr.displayName="Navigation";var hh=H.createContext(null);hh.displayName="Location";var xi=H.createContext({outlet:null,matches:[],isDataRoute:!1});xi.displayName="Route";var Fp=H.createContext(null);Fp.displayName="RouteError";function cC(n,{relative:e}={}){Ge(Fl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=H.useContext(Qr),{hash:o,pathname:a,search:u}=Ul(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:Hr([t,a])),i.createHref({pathname:d,search:u,hash:o})}function Fl(){return H.useContext(hh)!=null}function fo(){return Ge(Fl(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(hh).location}var lw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uw(n){H.useContext(Qr).static||H.useLayoutEffect(n)}function cw(){let{isDataRoute:n}=H.useContext(xi);return n?IC():hC()}function hC(){Ge(Fl(),"useNavigate() may be used only in the context of a <Router> component.");let n=H.useContext(ho),{basename:e,navigator:t}=H.useContext(Qr),{matches:i}=H.useContext(xi),{pathname:o}=fo(),a=JSON.stringify(Np(i)),u=H.useRef(!1);return uw(()=>{u.current=!0}),H.useCallback((f,m={})=>{if(nn(u.current,lw),!u.current)return;if(typeof f=="number"){t.go(f);return}let v=Op(f,JSON.parse(a),o,m.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Hr([e,v.pathname])),(m.replace?t.replace:t.push)(v,m.state,m)},[e,t,a,o,n])}H.createContext(null);function Ul(n,{relative:e}={}){let{matches:t}=H.useContext(xi),{pathname:i}=fo(),o=JSON.stringify(Np(t));return H.useMemo(()=>Op(n,JSON.parse(o),i,e==="path"),[n,o,i,e])}function dC(n,e,t,i){Ge(Fl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=H.useContext(Qr),{matches:a}=H.useContext(xi),u=a[a.length-1],d=u?u.params:{},f=u?u.pathname:"/",m=u?u.pathnameBase:"/",v=u&&u.route;{let U=v&&v.path||"";hw(f,!v||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let w=fo(),T;T=w;let R=T.pathname||"/",C=R;if(m!=="/"){let U=m.replace(/^\//,"").split("/");C="/"+R.replace(/^\//,"").split("/").slice(U.length).join("/")}let M=ds(n,{pathname:C});return nn(v||M!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),nn(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),yC(M&&M.map(U=>Object.assign({},U,{params:Object.assign({},d,U.params),pathname:Hr([m,o.encodeLocation?o.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?m:Hr([m,o.encodeLocation?o.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),a,t,i)}function fC(){let n=TC(),e=ch(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=H.createElement(H.Fragment,null,H.createElement("p",null,"💿 Hey developer 👋"),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:a},"ErrorBoundary")," or"," ",H.createElement("code",{style:a},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:o},t):null,u)}var pC=H.createElement(fC,null),mC=class extends H.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?H.createElement(xi.Provider,{value:this.props.routeContext},H.createElement(Fp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gC({routeContext:n,match:e,children:t}){let i=H.useContext(ho);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(xi.Provider,{value:n},t)}function yC(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=t==null?void 0:t.errors;if(a!=null){let f=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);Ge(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(t)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:v,errors:w}=t,T=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||T){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,v)=>{let w,T=!1,R=null,C=null;t&&(w=a&&m.route.id?a[m.route.id]:void 0,R=m.route.errorElement||pC,u&&(d<0&&v===0?(hw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,C=null):d===v&&(T=!0,C=m.route.hydrateFallbackElement||null)));let M=e.concat(o.slice(0,v+1)),b=()=>{let U;return w?U=R:T?U=C:m.route.Component?U=H.createElement(m.route.Component,null):m.route.element?U=m.route.element:U=f,H.createElement(gC,{match:m,routeContext:{outlet:f,matches:M,isDataRoute:t!=null},children:U})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?H.createElement(mC,{location:t.location,revalidation:t.revalidation,component:R,error:w,children:b(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):b()},null)}function Up(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vC(n){let e=H.useContext(ho);return Ge(e,Up(n)),e}function _C(n){let e=H.useContext(Vl);return Ge(e,Up(n)),e}function wC(n){let e=H.useContext(xi);return Ge(e,Up(n)),e}function jp(n){let e=wC(n),t=e.matches[e.matches.length-1];return Ge(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function EC(){return jp("useRouteId")}function TC(){var i;let n=H.useContext(Fp),e=_C("useRouteError"),t=jp("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function IC(){let{router:n}=vC("useNavigate"),e=jp("useNavigate"),t=H.useRef(!1);return uw(()=>{t.current=!0}),H.useCallback(async(o,a={})=>{nn(t.current,lw),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...a}))},[n,e])}var Fv={};function hw(n,e,t){!e&&!Fv[n]&&(Fv[n]=!0,nn(!1,t))}var Uv={};function jv(n,e){!n&&!Uv[e]&&(Uv[e]=!0,console.warn(e))}function SC(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&nn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:H.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&nn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:H.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&nn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:H.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var RC=class{constructor(){this.status="pending",this.promise=new Promise((n,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",n(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function PC({router:n,flushSync:e}){let[t,i]=H.useState(n.state),[o,a]=H.useState(),[u,d]=H.useState({isTransitioning:!1}),[f,m]=H.useState(),[v,w]=H.useState(),[T,R]=H.useState(),C=H.useRef(new Map),M=H.useCallback((Q,{deletedFetchers:X,flushSync:L,viewTransitionOpts:te})=>{X.forEach(S=>C.current.delete(S)),Q.fetchers.forEach((S,P)=>{S.data!==void 0&&C.current.set(P,S.data)}),jv(L===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let k=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(jv(te==null||k,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!te||!k){e&&L?e(()=>i(Q)):H.startTransition(()=>i(Q));return}if(e&&L){e(()=>{v&&(f&&f.resolve(),v.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:te.currentLocation,nextLocation:te.nextLocation})});let S=n.window.document.startViewTransition(()=>{e(()=>i(Q))});S.finished.finally(()=>{e(()=>{m(void 0),w(void 0),a(void 0),d({isTransitioning:!1})})}),e(()=>w(S));return}v?(f&&f.resolve(),v.skipTransition(),R({state:Q,currentLocation:te.currentLocation,nextLocation:te.nextLocation})):(a(Q),d({isTransitioning:!0,flushSync:!1,currentLocation:te.currentLocation,nextLocation:te.nextLocation}))},[n.window,e,v,f]);H.useLayoutEffect(()=>n.subscribe(M),[n,M]),H.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new RC)},[u]),H.useEffect(()=>{if(f&&o&&n.window){let Q=o,X=f.promise,L=n.window.document.startViewTransition(async()=>{H.startTransition(()=>i(Q)),await X});L.finished.finally(()=>{m(void 0),w(void 0),a(void 0),d({isTransitioning:!1})}),w(L)}},[o,f,n.window]),H.useEffect(()=>{f&&o&&t.location.key===o.location.key&&f.resolve()},[f,v,t.location,o]),H.useEffect(()=>{!u.isTransitioning&&T&&(a(T.state),d({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),R(void 0))},[u.isTransitioning,T]);let b=H.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:Q=>n.navigate(Q),push:(Q,X,L)=>n.navigate(Q,{state:X,preventScrollReset:L==null?void 0:L.preventScrollReset}),replace:(Q,X,L)=>n.navigate(Q,{replace:!0,state:X,preventScrollReset:L==null?void 0:L.preventScrollReset})}),[n]),U=n.basename||"/",Z=H.useMemo(()=>({router:n,navigator:b,static:!1,basename:U}),[n,b,U]);return H.createElement(H.Fragment,null,H.createElement(ho.Provider,{value:Z},H.createElement(Vl.Provider,{value:t},H.createElement(aw.Provider,{value:C.current},H.createElement(Vp.Provider,{value:u},H.createElement(kC,{basename:U,location:t.location,navigationType:t.historyAction,navigator:b},H.createElement(CC,{routes:n.routes,future:n.future,state:t})))))),null)}var CC=H.memo(AC);function AC({routes:n,future:e,state:t}){return dC(n,void 0,t,e)}function kC({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:a=!1}){Ge(!Fl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=H.useMemo(()=>({basename:u,navigator:o,static:a,future:{}}),[u,o,a]);typeof t=="string"&&(t=Ps(t));let{pathname:f="/",search:m="",hash:v="",state:w=null,key:T="default"}=t,R=H.useMemo(()=>{let C=Cr(f,u);return C==null?null:{location:{pathname:C,search:m,hash:v,state:w,key:T},navigationType:i}},[u,f,m,v,w,T,i]);return nn(R!=null,`<Router basename="${u}"> is not able to match the URL "${f}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:H.createElement(Qr.Provider,{value:d},H.createElement(hh.Provider,{children:e,value:R}))}var vc="get",_c="application/x-www-form-urlencoded";function dh(n){return n!=null&&typeof n.tagName=="string"}function xC(n){return dh(n)&&n.tagName.toLowerCase()==="button"}function DC(n){return dh(n)&&n.tagName.toLowerCase()==="form"}function bC(n){return dh(n)&&n.tagName.toLowerCase()==="input"}function NC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function OC(n,e){return n.button===0&&(!e||e==="_self")&&!NC(n)}var ic=null;function LC(){if(ic===null)try{new FormData(document.createElement("form"),0),ic=!1}catch{ic=!0}return ic}var MC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function If(n){return n!=null&&!MC.has(n)?(nn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_c}"`),null):n}function VC(n,e){let t,i,o,a,u;if(DC(n)){let d=n.getAttribute("action");i=d?Cr(d,e):null,t=n.getAttribute("method")||vc,o=If(n.getAttribute("enctype"))||_c,a=new FormData(n)}else if(xC(n)||bC(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(i=f?Cr(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||vc,o=If(n.getAttribute("formenctype"))||If(d.getAttribute("enctype"))||_c,a=new FormData(d,n),!LC()){let{name:m,type:v,value:w}=n;if(v==="image"){let T=m?`${m}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else m&&a.append(m,w)}}else{if(dh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=vc,i=null,o=_c,u=n}return a&&o==="text/plain"&&(u=a,a=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:a,body:u}}function zp(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function FC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function UC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function jC(n,e,t){let i=await Promise.all(n.map(async o=>{let a=e.routes[o.route.id];if(a){let u=await FC(a,t);return u.links?u.links():[]}return[]}));return HC(i.flat(1).filter(UC).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function zv(n,e,t,i,o,a){let u=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,d=(f,m)=>{var v;return t[m].pathname!==f.pathname||((v=t[m].route.path)==null?void 0:v.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,m)=>u(f,m)||d(f,m)):a==="data"?e.filter((f,m)=>{var w;let v=i.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(u(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let T=f.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=t[0])==null?void 0:w.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function zC(n,e){return BC(n.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let o=[i.module];return i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function BC(n){return[...new Set(n)]}function $C(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function HC(n,e){let t=new Set;return new Set(e),n.reduce((i,o)=>{let a=JSON.stringify($C(o));return t.has(a)||(t.add(a),i.push({key:a,link:o})),i},[])}function WC(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function qC(){let n=H.useContext(ho);return zp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function GC(){let n=H.useContext(Vl);return zp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Bp=H.createContext(void 0);Bp.displayName="FrameworkContext";function dw(){let n=H.useContext(Bp);return zp(n,"You must render this element inside a <HydratedRouter> element"),n}function KC(n,e){let t=H.useContext(Bp),[i,o]=H.useState(!1),[a,u]=H.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:v,onTouchStart:w}=e,T=H.useRef(null);H.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let M=U=>{U.forEach(Z=>{u(Z.isIntersecting)})},b=new IntersectionObserver(M,{threshold:.5});return T.current&&b.observe(T.current),()=>{b.disconnect()}}},[n]),H.useEffect(()=>{if(i){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[i]);let R=()=>{o(!0)},C=()=>{o(!1),u(!1)};return t?n!=="intent"?[a,T,{}]:[a,T,{onFocus:sl(d,R),onBlur:sl(f,C),onMouseEnter:sl(m,R),onMouseLeave:sl(v,C),onTouchStart:sl(w,R)}]:[!1,T,{}]}function sl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function QC({page:n,...e}){let{router:t}=qC(),i=H.useMemo(()=>ds(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?H.createElement(XC,{page:n,matches:i,...e}):(console.warn(`Tried to prefetch ${n} but no routes matched.`),null)}function YC(n){let{manifest:e,routeModules:t}=dw(),[i,o]=H.useState([]);return H.useEffect(()=>{let a=!1;return jC(n,e,t).then(u=>{a||o(u)}),()=>{a=!0}},[n,e,t]),i}function XC({page:n,matches:e,...t}){let i=fo(),{manifest:o,routeModules:a}=dw(),{loaderData:u,matches:d}=GC(),f=H.useMemo(()=>zv(n,e,d,o,i,"data"),[n,e,d,o,i]),m=H.useMemo(()=>zv(n,e,d,o,i,"assets"),[n,e,d,o,i]),v=H.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let R=new Set,C=!1;if(e.forEach(b=>{var Z;let U=o.routes[b.route.id];!U||!U.hasLoader||(!f.some(Q=>Q.route.id===b.route.id)&&b.route.id in u&&((Z=a[b.route.id])!=null&&Z.shouldRevalidate)||U.hasClientLoader?C=!0:R.add(b.route.id))}),R.size===0)return[];let M=WC(n);return C&&R.size>0&&M.searchParams.set("_routes",e.filter(b=>R.has(b.route.id)).map(b=>b.route.id).join(",")),[M.pathname+M.search]},[u,i,o,f,e,n,a]),w=H.useMemo(()=>zC(m,o),[m,o]),T=YC(m);return H.createElement(H.Fragment,null,v.map(R=>H.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),w.map(R=>H.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),T.map(({key:R,link:C})=>H.createElement("link",{key:R,...C})))}function JC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var fw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fw&&(window.__reactRouterVersion="7.0.2")}catch{}function ZC(n,e){return HP({basename:e==null?void 0:e.basename,future:e==null?void 0:e.future,history:pP({window:e==null?void 0:e.window}),hydrationData:eA(),routes:n,mapRouteProperties:SC,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function eA(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:tA(n.errors)}),n}function tA(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,o]of e)if(o&&o.__type==="RouteErrorResponse")t[i]=new jc(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let a=window[o.__subType];if(typeof a=="function")try{let u=new a(o.message);u.stack="",t[i]=u}catch{}}if(t[i]==null){let a=new Error(o.message);a.stack="",t[i]=a}}else t[i]=o;return t}var pw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mw=H.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:a,replace:u,state:d,target:f,to:m,preventScrollReset:v,viewTransition:w,...T},R){let{basename:C}=H.useContext(Qr),M=typeof m=="string"&&pw.test(m),b,U=!1;if(typeof m=="string"&&M&&(b=m,fw))try{let P=new URL(window.location.href),D=m.startsWith("//")?new URL(P.protocol+m):new URL(m),V=Cr(D.pathname,C);D.origin===P.origin&&V!=null?m=V+D.search+D.hash:U=!0}catch{nn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=cC(m,{relative:o}),[Q,X,L]=KC(i,T),te=sA(m,{replace:u,state:d,target:f,preventScrollReset:v,relative:o,viewTransition:w});function k(P){e&&e(P),P.defaultPrevented||te(P)}let S=H.createElement("a",{...T,...L,href:b||Z,onClick:U||a?e:k,ref:JC(R,X),target:f,"data-discover":!M&&t==="render"?"true":void 0});return Q&&!M?H.createElement(H.Fragment,null,S,H.createElement(QC,{page:Z})):S});mw.displayName="Link";var nA=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:a,to:u,viewTransition:d,children:f,...m},v){let w=Ul(u,{relative:m.relative}),T=fo(),R=H.useContext(Vl),{navigator:C,basename:M}=H.useContext(Qr),b=R!=null&&cA(w)&&d===!0,U=C.encodeLocation?C.encodeLocation(w).pathname:w.pathname,Z=T.pathname,Q=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(Z=Z.toLowerCase(),Q=Q?Q.toLowerCase():null,U=U.toLowerCase()),Q&&M&&(Q=Cr(Q,M)||Q);const X=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let L=Z===U||!o&&Z.startsWith(U)&&Z.charAt(X)==="/",te=Q!=null&&(Q===U||!o&&Q.startsWith(U)&&Q.charAt(U.length)==="/"),k={isActive:L,isPending:te,isTransitioning:b},S=L?e:void 0,P;typeof i=="function"?P=i(k):P=[i,L?"active":null,te?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let D=typeof a=="function"?a(k):a;return H.createElement(mw,{...m,"aria-current":S,className:P,ref:v,style:D,to:u,viewTransition:d},typeof f=="function"?f(k):f)});nA.displayName="NavLink";var rA=H.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:a,method:u=vc,action:d,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:w,...T},R)=>{let C=lA(),M=uA(d,{relative:m}),b=u.toLowerCase()==="get"?"get":"post",U=typeof d=="string"&&pw.test(d),Z=Q=>{if(f&&f(Q),Q.defaultPrevented)return;Q.preventDefault();let X=Q.nativeEvent.submitter,L=(X==null?void 0:X.getAttribute("formmethod"))||u;C(X||Q.currentTarget,{fetcherKey:e,method:L,navigate:t,replace:o,state:a,relative:m,preventScrollReset:v,viewTransition:w})};return H.createElement("form",{ref:R,method:b,action:M,onSubmit:i?f:Z,...T,"data-discover":!U&&n==="render"?"true":void 0})});rA.displayName="Form";function iA(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gw(n){let e=H.useContext(ho);return Ge(e,iA(n)),e}function sA(n,{target:e,replace:t,state:i,preventScrollReset:o,relative:a,viewTransition:u}={}){let d=cw(),f=fo(),m=Ul(n,{relative:a});return H.useCallback(v=>{if(OC(v,e)){v.preventDefault();let w=t!==void 0?t:vs(f)===vs(m);d(n,{replace:w,state:i,preventScrollReset:o,relative:a,viewTransition:u})}},[f,d,m,t,i,e,n,o,a,u])}var oA=0,aA=()=>`__${String(++oA)}__`;function lA(){let{router:n}=gw("useSubmit"),{basename:e}=H.useContext(Qr),t=EC();return H.useCallback(async(i,o={})=>{let{action:a,method:u,encType:d,formData:f,body:m}=VC(i,e);if(o.navigate===!1){let v=o.fetcherKey||aA();await n.fetch(v,t,o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await n.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function uA(n,{relative:e}={}){let{basename:t}=H.useContext(Qr),i=H.useContext(xi);Ge(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a={...Ul(n||".",{relative:e})},u=fo();if(n==null){a.search=u.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(v=>v==="")){d.delete("index"),f.filter(w=>w).forEach(w=>d.append("index",w));let v=d.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Hr([t,a.pathname])),vs(a)}function cA(n,e={}){let t=H.useContext(Vp);Ge(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=gw("useViewTransitionState"),o=Ul(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Cr(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Cr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Uc(o.pathname,u)!=null||Uc(o.pathname,a)!=null}new TextEncoder;var hA=a0();/**
 * react-router v7.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dA(n){return H.createElement(PC,{flushSync:hA.flushSync,...n})}var Bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var so,yw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function P(){}P.prototype=S.prototype,k.D=S.prototype,k.prototype=new P,k.prototype.constructor=k,k.C=function(D,V,B){for(var x=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)x[ht-2]=arguments[ht];return S.prototype[V].apply(D,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,S,P){P||(P=0);var D=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)D[V]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(V=0;16>V;++V)D[V]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=k.g[0],P=k.g[1],V=k.g[2];var B=k.g[3],x=S+(B^P&(V^B))+D[0]+3614090360&4294967295;S=P+(x<<7&4294967295|x>>>25),x=B+(V^S&(P^V))+D[1]+3905402710&4294967295,B=S+(x<<12&4294967295|x>>>20),x=V+(P^B&(S^P))+D[2]+606105819&4294967295,V=B+(x<<17&4294967295|x>>>15),x=P+(S^V&(B^S))+D[3]+3250441966&4294967295,P=V+(x<<22&4294967295|x>>>10),x=S+(B^P&(V^B))+D[4]+4118548399&4294967295,S=P+(x<<7&4294967295|x>>>25),x=B+(V^S&(P^V))+D[5]+1200080426&4294967295,B=S+(x<<12&4294967295|x>>>20),x=V+(P^B&(S^P))+D[6]+2821735955&4294967295,V=B+(x<<17&4294967295|x>>>15),x=P+(S^V&(B^S))+D[7]+4249261313&4294967295,P=V+(x<<22&4294967295|x>>>10),x=S+(B^P&(V^B))+D[8]+1770035416&4294967295,S=P+(x<<7&4294967295|x>>>25),x=B+(V^S&(P^V))+D[9]+2336552879&4294967295,B=S+(x<<12&4294967295|x>>>20),x=V+(P^B&(S^P))+D[10]+4294925233&4294967295,V=B+(x<<17&4294967295|x>>>15),x=P+(S^V&(B^S))+D[11]+2304563134&4294967295,P=V+(x<<22&4294967295|x>>>10),x=S+(B^P&(V^B))+D[12]+1804603682&4294967295,S=P+(x<<7&4294967295|x>>>25),x=B+(V^S&(P^V))+D[13]+4254626195&4294967295,B=S+(x<<12&4294967295|x>>>20),x=V+(P^B&(S^P))+D[14]+2792965006&4294967295,V=B+(x<<17&4294967295|x>>>15),x=P+(S^V&(B^S))+D[15]+1236535329&4294967295,P=V+(x<<22&4294967295|x>>>10),x=S+(V^B&(P^V))+D[1]+4129170786&4294967295,S=P+(x<<5&4294967295|x>>>27),x=B+(P^V&(S^P))+D[6]+3225465664&4294967295,B=S+(x<<9&4294967295|x>>>23),x=V+(S^P&(B^S))+D[11]+643717713&4294967295,V=B+(x<<14&4294967295|x>>>18),x=P+(B^S&(V^B))+D[0]+3921069994&4294967295,P=V+(x<<20&4294967295|x>>>12),x=S+(V^B&(P^V))+D[5]+3593408605&4294967295,S=P+(x<<5&4294967295|x>>>27),x=B+(P^V&(S^P))+D[10]+38016083&4294967295,B=S+(x<<9&4294967295|x>>>23),x=V+(S^P&(B^S))+D[15]+3634488961&4294967295,V=B+(x<<14&4294967295|x>>>18),x=P+(B^S&(V^B))+D[4]+3889429448&4294967295,P=V+(x<<20&4294967295|x>>>12),x=S+(V^B&(P^V))+D[9]+568446438&4294967295,S=P+(x<<5&4294967295|x>>>27),x=B+(P^V&(S^P))+D[14]+3275163606&4294967295,B=S+(x<<9&4294967295|x>>>23),x=V+(S^P&(B^S))+D[3]+4107603335&4294967295,V=B+(x<<14&4294967295|x>>>18),x=P+(B^S&(V^B))+D[8]+1163531501&4294967295,P=V+(x<<20&4294967295|x>>>12),x=S+(V^B&(P^V))+D[13]+2850285829&4294967295,S=P+(x<<5&4294967295|x>>>27),x=B+(P^V&(S^P))+D[2]+4243563512&4294967295,B=S+(x<<9&4294967295|x>>>23),x=V+(S^P&(B^S))+D[7]+1735328473&4294967295,V=B+(x<<14&4294967295|x>>>18),x=P+(B^S&(V^B))+D[12]+2368359562&4294967295,P=V+(x<<20&4294967295|x>>>12),x=S+(P^V^B)+D[5]+4294588738&4294967295,S=P+(x<<4&4294967295|x>>>28),x=B+(S^P^V)+D[8]+2272392833&4294967295,B=S+(x<<11&4294967295|x>>>21),x=V+(B^S^P)+D[11]+1839030562&4294967295,V=B+(x<<16&4294967295|x>>>16),x=P+(V^B^S)+D[14]+4259657740&4294967295,P=V+(x<<23&4294967295|x>>>9),x=S+(P^V^B)+D[1]+2763975236&4294967295,S=P+(x<<4&4294967295|x>>>28),x=B+(S^P^V)+D[4]+1272893353&4294967295,B=S+(x<<11&4294967295|x>>>21),x=V+(B^S^P)+D[7]+4139469664&4294967295,V=B+(x<<16&4294967295|x>>>16),x=P+(V^B^S)+D[10]+3200236656&4294967295,P=V+(x<<23&4294967295|x>>>9),x=S+(P^V^B)+D[13]+681279174&4294967295,S=P+(x<<4&4294967295|x>>>28),x=B+(S^P^V)+D[0]+3936430074&4294967295,B=S+(x<<11&4294967295|x>>>21),x=V+(B^S^P)+D[3]+3572445317&4294967295,V=B+(x<<16&4294967295|x>>>16),x=P+(V^B^S)+D[6]+76029189&4294967295,P=V+(x<<23&4294967295|x>>>9),x=S+(P^V^B)+D[9]+3654602809&4294967295,S=P+(x<<4&4294967295|x>>>28),x=B+(S^P^V)+D[12]+3873151461&4294967295,B=S+(x<<11&4294967295|x>>>21),x=V+(B^S^P)+D[15]+530742520&4294967295,V=B+(x<<16&4294967295|x>>>16),x=P+(V^B^S)+D[2]+3299628645&4294967295,P=V+(x<<23&4294967295|x>>>9),x=S+(V^(P|~B))+D[0]+4096336452&4294967295,S=P+(x<<6&4294967295|x>>>26),x=B+(P^(S|~V))+D[7]+1126891415&4294967295,B=S+(x<<10&4294967295|x>>>22),x=V+(S^(B|~P))+D[14]+2878612391&4294967295,V=B+(x<<15&4294967295|x>>>17),x=P+(B^(V|~S))+D[5]+4237533241&4294967295,P=V+(x<<21&4294967295|x>>>11),x=S+(V^(P|~B))+D[12]+1700485571&4294967295,S=P+(x<<6&4294967295|x>>>26),x=B+(P^(S|~V))+D[3]+2399980690&4294967295,B=S+(x<<10&4294967295|x>>>22),x=V+(S^(B|~P))+D[10]+4293915773&4294967295,V=B+(x<<15&4294967295|x>>>17),x=P+(B^(V|~S))+D[1]+2240044497&4294967295,P=V+(x<<21&4294967295|x>>>11),x=S+(V^(P|~B))+D[8]+1873313359&4294967295,S=P+(x<<6&4294967295|x>>>26),x=B+(P^(S|~V))+D[15]+4264355552&4294967295,B=S+(x<<10&4294967295|x>>>22),x=V+(S^(B|~P))+D[6]+2734768916&4294967295,V=B+(x<<15&4294967295|x>>>17),x=P+(B^(V|~S))+D[13]+1309151649&4294967295,P=V+(x<<21&4294967295|x>>>11),x=S+(V^(P|~B))+D[4]+4149444226&4294967295,S=P+(x<<6&4294967295|x>>>26),x=B+(P^(S|~V))+D[11]+3174756917&4294967295,B=S+(x<<10&4294967295|x>>>22),x=V+(S^(B|~P))+D[2]+718787259&4294967295,V=B+(x<<15&4294967295|x>>>17),x=P+(B^(V|~S))+D[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(V+(x<<21&4294967295|x>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+B&4294967295}i.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var P=S-this.blockSize,D=this.B,V=this.h,B=0;B<S;){if(V==0)for(;B<=P;)o(this,k,B),B+=this.blockSize;if(typeof k=="string"){for(;B<S;)if(D[V++]=k.charCodeAt(B++),V==this.blockSize){o(this,D),V=0;break}}else for(;B<S;)if(D[V++]=k[B++],V==this.blockSize){o(this,D),V=0;break}}this.h=V,this.o+=S},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var P=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=P&255,P/=256;for(this.u(k),k=Array(16),S=P=0;4>S;++S)for(var D=0;32>D;D+=8)k[P++]=this.g[S]>>>D&255;return k};function a(k,S){var P=d;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=S(k)}function u(k,S){this.h=S;for(var P=[],D=!0,V=k.length-1;0<=V;V--){var B=k[V]|0;D&&B==S||(P[V]=B,D=!1)}this.g=P}var d={};function f(k){return-128<=k&&128>k?a(k,function(S){return new u([S|0],0>S?-1:0)}):new u([k|0],0>k?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return w;if(0>k)return b(m(-k));for(var S=[],P=1,D=0;k>=P;D++)S[D]=k/P|0,P*=4294967296;return new u(S,0)}function v(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return b(v(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=m(Math.pow(S,8)),D=w,V=0;V<k.length;V+=8){var B=Math.min(8,k.length-V),x=parseInt(k.substring(V,V+B),S);8>B?(B=m(Math.pow(S,B)),D=D.j(B).add(m(x))):(D=D.j(P),D=D.add(m(x)))}return D}var w=f(0),T=f(1),R=f(16777216);n=u.prototype,n.m=function(){if(M(this))return-b(this).m();for(var k=0,S=1,P=0;P<this.g.length;P++){var D=this.i(P);k+=(0<=D?D:4294967296+D)*S,S*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(C(this))return"0";if(M(this))return"-"+b(this).toString(k);for(var S=m(Math.pow(k,6)),P=this,D="";;){var V=X(P,S).g;P=U(P,V.j(S));var B=((0<P.g.length?P.g[0]:P.h)>>>0).toString(k);if(P=V,C(P))return B+D;for(;6>B.length;)B="0"+B;D=B+D}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function C(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function M(k){return k.h==-1}n.l=function(k){return k=U(this,k),M(k)?-1:C(k)?0:1};function b(k){for(var S=k.g.length,P=[],D=0;D<S;D++)P[D]=~k.g[D];return new u(P,~k.h).add(T)}n.abs=function(){return M(this)?b(this):this},n.add=function(k){for(var S=Math.max(this.g.length,k.g.length),P=[],D=0,V=0;V<=S;V++){var B=D+(this.i(V)&65535)+(k.i(V)&65535),x=(B>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);D=x>>>16,B&=65535,x&=65535,P[V]=x<<16|B}return new u(P,P[P.length-1]&-2147483648?-1:0)};function U(k,S){return k.add(b(S))}n.j=function(k){if(C(this)||C(k))return w;if(M(this))return M(k)?b(this).j(b(k)):b(b(this).j(k));if(M(k))return b(this.j(b(k)));if(0>this.l(R)&&0>k.l(R))return m(this.m()*k.m());for(var S=this.g.length+k.g.length,P=[],D=0;D<2*S;D++)P[D]=0;for(D=0;D<this.g.length;D++)for(var V=0;V<k.g.length;V++){var B=this.i(D)>>>16,x=this.i(D)&65535,ht=k.i(V)>>>16,Ke=k.i(V)&65535;P[2*D+2*V]+=x*Ke,Z(P,2*D+2*V),P[2*D+2*V+1]+=B*Ke,Z(P,2*D+2*V+1),P[2*D+2*V+1]+=x*ht,Z(P,2*D+2*V+1),P[2*D+2*V+2]+=B*ht,Z(P,2*D+2*V+2)}for(D=0;D<S;D++)P[D]=P[2*D+1]<<16|P[2*D];for(D=S;D<2*S;D++)P[D]=0;return new u(P,0)};function Z(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function Q(k,S){this.g=k,this.h=S}function X(k,S){if(C(S))throw Error("division by zero");if(C(k))return new Q(w,w);if(M(k))return S=X(b(k),S),new Q(b(S.g),b(S.h));if(M(S))return S=X(k,b(S)),new Q(b(S.g),S.h);if(30<k.g.length){if(M(k)||M(S))throw Error("slowDivide_ only works with positive integers.");for(var P=T,D=S;0>=D.l(k);)P=L(P),D=L(D);var V=te(P,1),B=te(D,1);for(D=te(D,2),P=te(P,2);!C(D);){var x=B.add(D);0>=x.l(k)&&(V=V.add(P),B=x),D=te(D,1),P=te(P,1)}return S=U(k,V.j(S)),new Q(V,S)}for(V=w;0<=k.l(S);){for(P=Math.max(1,Math.floor(k.m()/S.m())),D=Math.ceil(Math.log(P)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),B=m(P),x=B.j(S);M(x)||0<x.l(k);)P-=D,B=m(P),x=B.j(S);C(B)&&(B=T),V=V.add(B),k=U(k,x)}return new Q(V,k)}n.A=function(k){return X(this,k).h},n.and=function(k){for(var S=Math.max(this.g.length,k.g.length),P=[],D=0;D<S;D++)P[D]=this.i(D)&k.i(D);return new u(P,this.h&k.h)},n.or=function(k){for(var S=Math.max(this.g.length,k.g.length),P=[],D=0;D<S;D++)P[D]=this.i(D)|k.i(D);return new u(P,this.h|k.h)},n.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),P=[],D=0;D<S;D++)P[D]=this.i(D)^k.i(D);return new u(P,this.h^k.h)};function L(k){for(var S=k.g.length+1,P=[],D=0;D<S;D++)P[D]=k.i(D)<<1|k.i(D-1)>>>31;return new u(P,k.h)}function te(k,S){var P=S>>5;S%=32;for(var D=k.g.length-P,V=[],B=0;B<D;B++)V[B]=0<S?k.i(B+P)>>>S|k.i(B+P+1)<<32-S:k.i(B+P);return new u(V,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,yw=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=v,so=u}).apply(typeof Bv<"u"?Bv:typeof self<"u"?self:typeof window<"u"?window:{});var sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vw,ll,_w,wc,Gf,ww,Ew,Tw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof sc=="object"&&sc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(c,g){if(g)e:{var _=i;c=c.split(".");for(var I=0;I<c.length-1;I++){var $=c[I];if(!($ in _))break e;_=_[$]}c=c[c.length-1],I=_[c],g=g(I),g!=I&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var _=0,I=!1,$={next:function(){if(!I&&_<c.length){var Y=_++;return{value:g(Y,c[Y]),done:!1}}return I=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}o("Array.prototype.values",function(c){return c||function(){return a(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function v(c,g,_){return c.call.apply(c.bind,arguments)}function w(c,g,_){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,I),c.apply(g,$)}}return function(){return c.apply(g,arguments)}}function T(c,g,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,T.apply(null,arguments)}function R(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function C(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(I,$,Y){for(var he=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)he[ut-2]=arguments[ut];return g.prototype[$].apply(I,he)}}function M(c){const g=c.length;if(0<g){const _=Array(g);for(let I=0;I<g;I++)_[I]=c[I];return _}return[]}function b(c,g){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(f(I)){const $=c.length||0,Y=I.length||0;c.length=$+Y;for(let he=0;he<Y;he++)c[$+he]=I[he]}else c.push(I)}}class U{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Z(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function X(c){return X[" "](c),c}X[" "]=function(){};var L=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function te(c,g,_){for(const I in c)g.call(_,c[I],I,c)}function k(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function S(c){const g={};for(const _ in c)g[_]=c[_];return g}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,g){let _,I;for(let $=1;$<arguments.length;$++){I=arguments[$];for(_ in I)c[_]=I[_];for(let Y=0;Y<P.length;Y++)_=P[Y],Object.prototype.hasOwnProperty.call(I,_)&&(c[_]=I[_])}}function V(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function B(c){d.setTimeout(()=>{throw c},0)}function x(){var c=Ie;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ht{constructor(){this.h=this.g=null}add(g,_){const I=Ke.get();I.set(g,_),this.h?this.h.next=I:this.g=I,this.h=I}}var Ke=new U(()=>new Ct,c=>c.reset());class Ct{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Qe,ue=!1,Ie=new ht,de=()=>{const c=d.Promise.resolve(void 0);Qe=()=>{c.then(j)}};var j=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(_){B(_)}var g=Ke;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}ue=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Me=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};d.addEventListener("test",_,g),d.removeEventListener("test",_,g)}catch{}return c}();function Ne(c,g){if(Ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(L){e:{try{X(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ze[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ne.aa.h.call(this)}}C(Ne,Ee);var ze={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ze="closure_listenable_"+(1e6*Math.random()|0),et=0;function Fe(c,g,_,I,$){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!I,this.ha=$,this.key=++et,this.da=this.fa=!1}function ft(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Kn(c){this.src=c,this.g={},this.h=0}Kn.prototype.add=function(c,g,_,I,$){var Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);var he=sn(c,g,I,$);return-1<he?(g=c[he],_||(g.fa=!1)):(g=new Fe(g,this.src,Y,!!I,$),g.fa=_,c.push(g)),g};function Di(c,g){var _=g.type;if(_ in c.g){var I=c.g[_],$=Array.prototype.indexOf.call(I,g,void 0),Y;(Y=0<=$)&&Array.prototype.splice.call(I,$,1),Y&&(ft(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function sn(c,g,_,I){for(var $=0;$<c.length;++$){var Y=c[$];if(!Y.da&&Y.listener==g&&Y.capture==!!_&&Y.ha==I)return $}return-1}var Yr="closure_lm_"+(1e6*Math.random()|0),bi={};function Ni(c,g,_,I,$){if(Array.isArray(g)){for(var Y=0;Y<g.length;Y++)Ni(c,g[Y],_,I,$);return null}return _=Tn(_),c&&c[Ze]?c.K(g,_,m(I)?!!I.capture:!!I,$):ks(c,g,_,!1,I,$)}function ks(c,g,_,I,$,Y){if(!g)throw Error("Invalid event type");var he=m($)?!!$.capture:!!$,ut=Xr(c);if(ut||(c[Yr]=ut=new Kn(c)),_=ut.add(g,_,I,he,Y),_.proxy)return _;if(I=yo(),_.proxy=I,I.src=c,I.listener=_,c.addEventListener)Me||($=he),$===void 0&&($=!1),c.addEventListener(g.toString(),I,$);else if(c.attachEvent)c.attachEvent(Wt(g.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function yo(){function c(_){return g.call(c.src,c.listener,_)}const g=sr;return c}function Oi(c,g,_,I,$){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)Oi(c,g[Y],_,I,$);else I=m(I)?!!I.capture:!!I,_=Tn(_),c&&c[Ze]?(c=c.i,g=String(g).toString(),g in c.g&&(Y=c.g[g],_=sn(Y,_,I,$),-1<_&&(ft(Y[_]),Array.prototype.splice.call(Y,_,1),Y.length==0&&(delete c.g[g],c.h--)))):c&&(c=Xr(c))&&(g=c.g[g.toString()],c=-1,g&&(c=sn(g,_,I,$)),(_=-1<c?g[c]:null)&&ir(_))}function ir(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Ze])Di(g.i,c);else{var _=c.type,I=c.proxy;g.removeEventListener?g.removeEventListener(_,I,c.capture):g.detachEvent?g.detachEvent(Wt(_),I):g.addListener&&g.removeListener&&g.removeListener(I),(_=Xr(g))?(Di(_,c),_.h==0&&(_.src=null,g[Yr]=null)):ft(c)}}}function Wt(c){return c in bi?bi[c]:bi[c]="on"+c}function sr(c,g){if(c.da)c=!0;else{g=new Ne(g,this);var _=c.listener,I=c.ha||c.src;c.fa&&ir(c),c=_.call(I,g)}return c}function Xr(c){return c=c[Yr],c instanceof Kn?c:null}var kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(c){return typeof c=="function"?c:(c[kr]||(c[kr]=function(g){return c.handleEvent(g)}),c[kr])}function lt(){J.call(this),this.i=new Kn(this),this.M=this,this.F=null}C(lt,J),lt.prototype[Ze]=!0,lt.prototype.removeEventListener=function(c,g,_,I){Oi(this,c,g,_,I)};function St(c,g){var _,I=c.F;if(I)for(_=[];I;I=I.F)_.push(I);if(c=c.M,I=g.type||g,typeof g=="string")g=new Ee(g,c);else if(g instanceof Ee)g.target=g.target||c;else{var $=g;g=new Ee(I,c),D(g,$)}if($=!0,_)for(var Y=_.length-1;0<=Y;Y--){var he=g.g=_[Y];$=Ln(he,I,!0,g)&&$}if(he=g.g=c,$=Ln(he,I,!0,g)&&$,$=Ln(he,I,!1,g)&&$,_)for(Y=0;Y<_.length;Y++)he=g.g=_[Y],$=Ln(he,I,!1,g)&&$}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],I=0;I<_.length;I++)ft(_[I]);delete c.g[g],c.h--}}this.F=null},lt.prototype.K=function(c,g,_,I){return this.i.add(String(c),g,!1,_,I)},lt.prototype.L=function(c,g,_,I){return this.i.add(String(c),g,!0,_,I)};function Ln(c,g,_,I){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,Y=0;Y<g.length;++Y){var he=g[Y];if(he&&!he.da&&he.capture==_){var ut=he.listener,Lt=he.ha||he.src;he.fa&&Di(c.i,he),$=ut.call(Lt,I)!==!1&&$}}return $&&!I.defaultPrevented}function xs(c,g,_){if(typeof c=="function")_&&(c=T(c,_));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function qt(c){c.g=xs(()=>{c.g=null,c.i&&(c.i=!1,qt(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class xr extends J{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:qt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(c){J.call(this),this.h=c,this.g={}}C(Dr,J);var Li=[];function Ds(c){te(c.g,function(g,_){this.g.hasOwnProperty(_)&&ir(g)},c),c.g={}}Dr.prototype.N=function(){Dr.aa.N.call(this),Ds(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mi=d.JSON.stringify,br=d.JSON.parse,Vi=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function or(){}or.prototype.h=null;function Fi(c){return c.h||(c.h=c.i())}function Jr(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mn(){Ee.call(this,"d")}C(Mn,Ee);function ar(){Ee.call(this,"c")}C(ar,Ee);var yn={},bs=null;function Zr(){return bs=bs||new lt}yn.La="serverreachability";function O(c){Ee.call(this,yn.La,c)}C(O,Ee);function z(c){const g=Zr();St(g,new O(g))}yn.STAT_EVENT="statevent";function K(c,g){Ee.call(this,yn.STAT_EVENT,c),this.stat=g}C(K,Ee);function ee(c){const g=Zr();St(g,new K(g,c))}yn.Ma="timingevent";function fe(c,g){Ee.call(this,yn.Ma,c),this.size=g}C(fe,Ee);function ye(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function Ce(){this.g=!0}Ce.prototype.xa=function(){this.g=!1};function pe(c,g,_,I,$,Y){c.info(function(){if(c.g)if(Y)for(var he="",ut=Y.split("&"),Lt=0;Lt<ut.length;Lt++){var Xe=ut[Lt].split("=");if(1<Xe.length){var Ut=Xe[0];Xe=Xe[1];var Dt=Ut.split("_");he=2<=Dt.length&&Dt[1]=="type"?he+(Ut+"="+Xe+"&"):he+(Ut+"=redacted&")}}else he=null;else he=Y;return"XMLHTTP REQ ("+I+") [attempt "+$+"]: "+g+`
`+_+`
`+he})}function we(c,g,_,I,$,Y,he){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+$+"]: "+g+`
`+_+`
`+Y+" "+he})}function ce(c,g,_,I){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ue(c,_)+(I?" "+I:"")})}function xe(c,g){c.info(function(){return"TIMEOUT: "+g})}Ce.prototype.info=function(){};function Ue(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var I=_[c];if(!(2>I.length)){var $=I[1];if(Array.isArray($)&&!(1>$.length)){var Y=$[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var he=1;he<$.length;he++)$[he]=""}}}}return Mi(_)}catch{return g}}var it={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},He;function tt(){}C(tt,or),tt.prototype.g=function(){return new XMLHttpRequest},tt.prototype.i=function(){return{}},He=new tt;function st(c,g,_,I){this.j=c,this.i=g,this.l=_,this.R=I||1,this.U=new Dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lr}function lr(){this.i=null,this.g="",this.h=!1}var ur={},on={};function Gt(c,g,_){c.L=1,c.v=Bi(Vn(g)),c.m=_,c.P=!0,ei(c,null)}function ei(c,g){c.F=Date.now(),ot(c),c.A=Vn(c.v);var _=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),Hi(_.i,"t",I),c.C=0,_=c.j.J,c.h=new lr,c.g=ou(c.j,_?g:null,!c.m),0<c.O&&(c.M=new xr(T(c.Y,c,c.g),c.O)),g=c.U,_=c.g,I=c.ca;var $="readystatechange";Array.isArray($)||($&&(Li[0]=$.toString()),$=Li);for(var Y=0;Y<$.length;Y++){var he=Ni(_,$[Y],I||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),z(),pe(c.i,c.u,c.A,c.l,c.R,c.m)}st.prototype.ca=function(c){c=c.target;const g=this.M;g&&Pn(c)==3?g.j():this.Y(c)},st.prototype.Y=function(c){try{if(c==this.g)e:{const Dt=Pn(this.g);var g=this.g.Ba();const Yn=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||Aa(this.g)))){this.J||Dt!=4||g==7||(g==8||0>=Yn?z(3):z(2)),Ye(this);var _=this.g.Z();this.X=_;t:if(Nr(this)){var I=Aa(this.g);c="";var $=I.length,Y=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kt(this),pt(this);var he="";break t}this.h.i=new d.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,c+=this.h.i.decode(I[g],{stream:!(Y&&g==$-1)});I.length=0,this.h.g+=c,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=_==200,we(this.i,this.u,this.A,this.l,this.R,Dt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Lt=this.g;if((ut=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(ut)){var Xe=ut;break t}}Xe=null}if(_=Xe)ce(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hr(this,_);else{this.o=!1,this.s=3,ee(12),Kt(this),pt(this);break e}}if(this.P){_=!0;let Un;for(;!this.J&&this.C<he.length;)if(Un=cr(this,he),Un==on){Dt==4&&(this.s=4,ee(14),_=!1),ce(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==ur){this.s=4,ee(15),ce(this.i,this.l,he,"[Invalid Chunk]"),_=!1;break}else ce(this.i,this.l,Un,null),hr(this,Un);if(Nr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||he.length!=0||this.h.h||(this.s=1,ee(16),_=!1),this.o=this.o&&_,!_)ce(this.i,this.l,he,"[Invalid Chunked Response]"),Kt(this),pt(this);else if(0<he.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),xa(Ut),Ut.M=!0,ee(11))}}else ce(this.i,this.l,he,null),hr(this,he);Dt==4&&Kt(this),this.o&&!this.J&&(Dt==4?ko(this.j,this):(this.o=!1,ot(this)))}else So(this.g),_==400&&0<he.indexOf("Unknown SID")?(this.s=3,ee(12)):(this.s=0,ee(13)),Kt(this),pt(this)}}}catch{}finally{}};function Nr(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function cr(c,g){var _=c.C,I=g.indexOf(`
`,_);return I==-1?on:(_=Number(g.substring(_,I)),isNaN(_)?ur:(I+=1,I+_>g.length?on:(g=g.slice(I,I+_),c.C=I+_,g)))}st.prototype.cancel=function(){this.J=!0,Kt(this)};function ot(c){c.S=Date.now()+c.I,ti(c,c.I)}function ti(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ye(T(c.ba,c),g)}function Ye(c){c.B&&(d.clearTimeout(c.B),c.B=null)}st.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(xe(this.i,this.A),this.L!=2&&(z(),ee(17)),Kt(this),this.s=2,pt(this)):ti(this,this.S-c)};function pt(c){c.j.G==0||c.J||ko(c.j,c)}function Kt(c){Ye(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Ds(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function hr(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||vn(_.h,c))){if(!c.K&&vn(_.h,c)&&_.G==3){try{var I=_.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var $=I;if($[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Ao(_),gr(_);else break e;Co(_),ee(18)}}else _.za=$[1],0<_.za-_.T&&37500>$[2]&&_.F&&_.v==0&&!_.C&&(_.C=ye(T(_.Za,_),6e3));if(1>=vo(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else oi(_,11)}else if((c.K||_.g==c)&&Ao(_),!Z(g))for($=_.Da.g.parse(g),g=0;g<$.length;g++){let Xe=$[g];if(_.T=Xe[0],Xe=Xe[1],_.G==2)if(Xe[0]=="c"){_.K=Xe[1],_.ia=Xe[2];const Ut=Xe[3];Ut!=null&&(_.la=Ut,_.j.info("VER="+_.la));const Dt=Xe[4];Dt!=null&&(_.Aa=Dt,_.j.info("SVER="+_.Aa));const Yn=Xe[5];Yn!=null&&typeof Yn=="number"&&0<Yn&&(I=1.5*Yn,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const Un=c.g;if(Un){const Fs=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var Y=I.h;Y.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Sa(Y,Y.h),Y.h=null))}if(I.D){const Do=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;Do&&(I.ya=Do,ct(I.I,I.D,Do))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var he=c;if(I.qa=su(I,I.J?I.ia:null,I.W),he.K){Gl(I.h,he);var ut=he,Lt=I.L;Lt&&(ut.I=Lt),ut.B&&(Ye(ut),ot(ut)),I.g=he}else Vs(I);0<_.i.length&&Vr(_)}else Xe[0]!="stop"&&Xe[0]!="close"||oi(_,7);else _.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?oi(_,7):Yt(_):Xe[0]!="noop"&&_.l&&_.l.ta(Xe),_.v=0)}}z(4)}catch{}}var mt=class{constructor(c,g){this.g=c,this.map=g}};function Sn(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function an(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function vo(c){return c.h?1:c.g?c.g.size:0}function vn(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Sa(c,g){c.g?c.g.add(g):c.h=g}function Gl(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Sn.prototype.cancel=function(){if(this.i=Kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Kl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return M(c.i)}function _o(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],_=c.length,I=0;I<_;I++)g.push(c[I]);return g}g=[],_=0;for(I in c)g[_++]=c[I];return g}function wo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const I in c)g[_++]=I;return g}}}function Ui(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=wo(c),I=_o(c),$=I.length,Y=0;Y<$;Y++)g.call(void 0,I[Y],_&&_[Y],c)}var Ns=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vh(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var I=c[_].indexOf("="),$=null;if(0<=I){var Y=c[_].substring(0,I);$=c[_].substring(I+1)}else Y=c[_];g(Y,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ni(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ni){this.h=c.h,Os(this,c.j),this.o=c.o,this.g=c.g,ji(this,c.s),this.l=c.l;var g=c.i,_=new Or;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),zi(this,_),this.m=c.m}else c&&(g=String(c).match(Ns))?(this.h=!1,Os(this,g[1]||"",!0),this.o=We(g[2]||""),this.g=We(g[3]||"",!0),ji(this,g[4]),this.l=We(g[5]||"",!0),zi(this,g[6]||"",!0),this.m=We(g[7]||"")):(this.h=!1,this.i=new Or(null,this.h))}ni.prototype.toString=function(){var c=[],g=this.j;g&&c.push($i(g,Eo,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push($i(g,Eo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push($i(_,_.charAt(0)=="/"?Xl:Yl,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",$i(_,Ra)),c.join("")};function Vn(c){return new ni(c)}function Os(c,g,_){c.j=_?We(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ji(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function zi(c,g,_){g instanceof Or?(c.i=g,Lr(c.i,c.h)):(_||(g=$i(g,Jl)),c.i=new Or(g,c.h))}function ct(c,g,_){c.i.set(g,_)}function Bi(c){return ct(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function We(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function $i(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Ql),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ql(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Eo=/[#\/\?@]/g,Yl=/[#\?:]/g,Xl=/[#\?]/g,Jl=/[#\?@]/g,Ra=/#/g;function Or(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Qt(c){c.g||(c.g=new Map,c.h=0,c.i&&Vh(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=Or.prototype,n.add=function(c,g){Qt(this),this.i=null,c=Qn(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function dr(c,g){Qt(c),g=Qn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function fr(c,g){return Qt(c),g=Qn(c,g),c.g.has(g)}n.forEach=function(c,g){Qt(this),this.g.forEach(function(_,I){_.forEach(function($){c.call(g,$,I,this)},this)},this)},n.na=function(){Qt(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let I=0;I<g.length;I++){const $=c[I];for(let Y=0;Y<$.length;Y++)_.push(g[I])}return _},n.V=function(c){Qt(this);let g=[];if(typeof c=="string")fr(this,c)&&(g=g.concat(this.g.get(Qn(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},n.set=function(c,g){return Qt(this),this.i=null,c=Qn(this,c),fr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Hi(c,g,_){dr(c,g),0<_.length&&(c.i=null,c.g.set(Qn(c,g),M(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var I=g[_];const Y=encodeURIComponent(String(I)),he=this.V(I);for(I=0;I<he.length;I++){var $=Y;he[I]!==""&&($+="="+encodeURIComponent(String(he[I]))),c.push($)}}return this.i=c.join("&")};function Qn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Lr(c,g){g&&!c.j&&(Qt(c),c.i=null,c.g.forEach(function(_,I){var $=I.toLowerCase();I!=$&&(dr(this,I),Hi(this,$,_))},c)),c.j=g}function Fh(c,g){const _=new Ce;if(d.Image){const I=new Image;I.onload=R(Rn,_,"TestLoadImage: loaded",!0,g,I),I.onerror=R(Rn,_,"TestLoadImage: error",!1,g,I),I.onabort=R(Rn,_,"TestLoadImage: abort",!1,g,I),I.ontimeout=R(Rn,_,"TestLoadImage: timeout",!1,g,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else g(!1)}function Zl(c,g){const _=new Ce,I=new AbortController,$=setTimeout(()=>{I.abort(),Rn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:I.signal}).then(Y=>{clearTimeout($),Y.ok?Rn(_,"TestPingServer: ok",!0,g):Rn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),Rn(_,"TestPingServer: error",!1,g)})}function Rn(c,g,_,I,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),I(_)}catch{}}function Uh(){this.g=new Vi}function eu(c,g,_){const I=_||"";try{Ui(c,function($,Y){let he=$;m($)&&(he=Mi($)),g.push(I+Y+"="+encodeURIComponent(he))})}catch($){throw g.push(I+"type="+encodeURIComponent("_badmap")),$}}function ri(c){this.l=c.Ub||null,this.j=c.eb||!1}C(ri,or),ri.prototype.g=function(){return new Ls(this.l,this.j)},ri.prototype.i=function(c){return function(){return c}}({});function Ls(c,g){lt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ls,lt),n=Ls.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,mr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,mr(this)),this.g&&(this.readyState=3,mr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function tu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?pr(this):mr(this),this.readyState==3&&tu(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,pr(this))},n.Qa=function(c){this.g&&(this.response=c,pr(this))},n.ga=function(){this.g&&pr(this)};function pr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,mr(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function mr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ii(c){let g="";return te(c,function(_,I){g+=I,g+=":",g+=_,g+=`\r
`}),g}function Wi(c,g,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=ii(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):ct(c,g,_))}function _t(c){lt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(_t,lt);var jh=/^https?$/i,Pa=["POST","PUT"];n=_t.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():He.g(),this.v=this.o?Fi(this.o):Fi(He),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(Y){Ms(this,Y);return}if(c=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var $ in I)_.set($,I[$]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Y of I.keys())_.set(Y,I.get(Y));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(Y=>Y.toLowerCase()=="content-type"),$=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Pa,g,void 0))||I||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,he]of _)this.g.setRequestHeader(Y,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Io(this),this.u=!0,this.g.send(c),this.u=!1}catch(Y){Ms(this,Y)}};function Ms(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,To(c),Fn(c)}function To(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,St(this,"complete"),St(this,"abort"),Fn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fn(this,!0)),_t.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ca(this):this.bb())},n.bb=function(){Ca(this)};function Ca(c){if(c.h&&typeof u<"u"&&(!c.v[1]||Pn(c)!=4||c.Z()!=2)){if(c.u&&Pn(c)==4)xs(c.Ea,0,c);else if(St(c,"readystatechange"),Pn(c)==4){c.h=!1;try{const he=c.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var I;if(I=he===0){var $=String(c.D).match(Ns)[1]||null;!$&&d.self&&d.self.location&&($=d.self.location.protocol.slice(0,-1)),I=!jh.test($?$.toLowerCase():"")}_=I}if(_)St(c,"complete"),St(c,"success");else{c.m=6;try{var Y=2<Pn(c)?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.Z()+"]",To(c)}}finally{Fn(c)}}}}function Fn(c,g){if(c.g){Io(c);const _=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||St(c,"ready");try{_.onreadystatechange=I}catch{}}}function Io(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Pn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),br(g)}};function Aa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function So(c){const g={};c=(c.g&&2<=Pn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(Z(c[I]))continue;var _=V(c[I]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Y=g[$]||[];g[$]=Y,Y.push(_)}k(g,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mr(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function ka(c){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mr("baseRetryDelayMs",5e3,c),this.cb=Mr("retryDelaySeedMs",1e4,c),this.Wa=Mr("forwardChannelMaxRetries",2,c),this.wa=Mr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Sn(c&&c.concurrentRequestLimit),this.Da=new Uh,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ka.prototype,n.la=8,n.G=1,n.connect=function(c,g,_,I){ee(0),this.W=c,this.H=g||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=su(this,null,this.W),Vr(this)};function Yt(c){if(Ro(c),c.G==3){var g=c.U++,_=Vn(c.I);if(ct(_,"SID",c.K),ct(_,"RID",g),ct(_,"TYPE","terminate"),si(c,_),g=new st(c,c.j,g),g.L=2,g.v=Bi(Vn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=g.v,_=!0),_||(g.g=ou(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ot(g)}iu(c)}function gr(c){c.g&&(xa(c),c.g.cancel(),c.g=null)}function Ro(c){gr(c),c.u&&(d.clearTimeout(c.u),c.u=null),Ao(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Vr(c){if(!an(c.h)&&!c.s){c.s=!0;var g=c.Ga;Qe||de(),ue||(Qe(),ue=!0),Ie.add(g,c),c.B=0}}function zh(c,g){return vo(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ye(T(c.Ga,c,g),ru(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new st(this,this.j,c);let Y=this.o;if(this.S&&(Y?(Y=S(Y),D(Y,this.S)):Y=this.S),this.m!==null||this.O||($.H=Y,Y=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=qi(this,$,g),_=Vn(this.I),ct(_,"RID",c),ct(_,"CVER",22),this.D&&ct(_,"X-HTTP-Session-Id",this.D),si(this,_),Y&&(this.O?g="headers="+encodeURIComponent(String(ii(Y)))+"&"+g:this.m&&Wi(_,this.m,Y)),Sa(this.h,$),this.Ua&&ct(_,"TYPE","init"),this.P?(ct(_,"$req",g),ct(_,"SID","null"),$.T=!0,Gt($,_,null)):Gt($,_,g),this.G=2}}else this.G==3&&(c?Po(this,c):this.i.length==0||an(this.h)||Po(this))};function Po(c,g){var _;g?_=g.l:_=c.U++;const I=Vn(c.I);ct(I,"SID",c.K),ct(I,"RID",_),ct(I,"AID",c.T),si(c,I),c.m&&c.o&&Wi(I,c.m,c.o),_=new st(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=qi(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Sa(c.h,_),Gt(_,I,g)}function si(c,g){c.H&&te(c.H,function(_,I){ct(g,I,_)}),c.l&&Ui({},function(_,I){ct(g,I,_)})}function qi(c,g,_){_=Math.min(c.i.length,_);var I=c.l?T(c.l.Na,c.l,c):null;e:{var $=c.i;let Y=-1;for(;;){const he=["count="+_];Y==-1?0<_?(Y=$[0].g,he.push("ofs="+Y)):Y=0:he.push("ofs="+Y);let ut=!0;for(let Lt=0;Lt<_;Lt++){let Xe=$[Lt].g;const Ut=$[Lt].map;if(Xe-=Y,0>Xe)Y=Math.max(0,$[Lt].g-100),ut=!1;else try{eu(Ut,he,"req"+Xe+"_")}catch{I&&I(Ut)}}if(ut){I=he.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,I}function Vs(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Qe||de(),ue||(Qe(),ue=!0),Ie.add(g,c),c.v=0}}function Co(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ye(T(c.Fa,c),ru(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ye(T(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ee(10),gr(this),nu(this))};function xa(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function nu(c){c.g=new st(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=Vn(c.qa);ct(g,"RID","rpc"),ct(g,"SID",c.K),ct(g,"AID",c.T),ct(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&ct(g,"TO",c.ja),ct(g,"TYPE","xmlhttp"),si(c,g),c.m&&c.o&&Wi(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Bi(Vn(g)),_.m=null,_.P=!0,ei(_,c)}n.Za=function(){this.C!=null&&(this.C=null,gr(this),Co(this),ee(19))};function Ao(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function ko(c,g){var _=null;if(c.g==g){Ao(c),xa(c),c.g=null;var I=2}else if(vn(c.h,g))_=g.D,Gl(c.h,g),I=1;else return;if(c.G!=0){if(g.o)if(I==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var $=c.B;I=Zr(),St(I,new fe(I,_)),Vr(c)}else Vs(c);else if($=g.s,$==3||$==0&&0<g.X||!(I==1&&zh(c,g)||I==2&&Co(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),$){case 1:oi(c,5);break;case 4:oi(c,10);break;case 3:oi(c,6);break;default:oi(c,2)}}}function ru(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function oi(c,g){if(c.j.info("Error code "+g),g==2){var _=T(c.fb,c),I=c.Xa;const $=!I;I=new ni(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Os(I,"https"),Bi(I),$?Fh(I.toString(),_):Zl(I.toString(),_)}else ee(2);c.G=0,c.l&&c.l.sa(g),iu(c),Ro(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ee(2)):(this.j.info("Failed to ping google.com"),ee(1))};function iu(c){if(c.G=0,c.ka=[],c.l){const g=Kl(c.h);(g.length!=0||c.i.length!=0)&&(b(c.ka,g),b(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function su(c,g,_){var I=_ instanceof ni?Vn(_):new ni(_);if(I.g!="")g&&(I.g=g+"."+I.g),ji(I,I.s);else{var $=d.location;I=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var Y=new ni(null);I&&Os(Y,I),g&&(Y.g=g),$&&ji(Y,$),_&&(Y.l=_),I=Y}return _=c.D,g=c.ya,_&&g&&ct(I,_,g),ct(I,"VER",c.la),si(c,I),I}function ou(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new _t(new ri({eb:_})):new _t(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Da(){}n=Da.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function xo(){}xo.prototype.g=function(c,g){return new _n(c,g)};function _n(c,g){lt.call(this),this.g=new ka(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!Z(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!Z(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Fr(this)}C(_n,lt),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Yt(this.g)},_n.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Mi(c),c=_);g.i.push(new mt(g.Ya++,c)),g.G==3&&Vr(g)},_n.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,_n.aa.N.call(this)};function au(c){Mn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}C(au,Mn);function lu(){ar.call(this),this.status=1}C(lu,ar);function Fr(c){this.g=c}C(Fr,Da),Fr.prototype.ua=function(){St(this.g,"a")},Fr.prototype.ta=function(c){St(this.g,new au(c))},Fr.prototype.sa=function(c){St(this.g,new lu)},Fr.prototype.ra=function(){St(this.g,"b")},xo.prototype.createWebChannel=xo.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,Tw=function(){return new xo},Ew=function(){return Zr()},ww=yn,Gf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},it.NO_ERROR=0,it.TIMEOUT=8,it.HTTP_ERROR=6,wc=it,Rt.COMPLETE="complete",_w=Rt,Jr.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",lt.prototype.listen=lt.prototype.K,ll=Jr,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,vw=_t}).apply(typeof sc<"u"?sc:typeof self<"u"?self:typeof window<"u"?window:{});const $v="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new vp("@firebase/firestore");function Zo(){return lo.logLevel}function ge(n,...e){if(lo.logLevel<=Be.DEBUG){const t=e.map($p);lo.debug(`Firestore (${wa}): ${n}`,...t)}}function Pi(n,...e){if(lo.logLevel<=Be.ERROR){const t=e.map($p);lo.error(`Firestore (${wa}): ${n}`,...t)}}function ca(n,...e){if(lo.logLevel<=Be.WARN){const t=e.map($p);lo.warn(`Firestore (${wa}): ${n}`,...t)}}function $p(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(n="Unexpected state"){const e=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: `+n;throw Pi(e),new Error(e)}function at(n,e){n||be()}function Ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ki{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fn.UNAUTHENTICATED))}shutdown(){}}class pA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mA{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){at(this.o===void 0);let i=this.i;const o=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ti,e.enqueueRetryable(()=>o(this.currentUser))};const u=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await o(this.currentUser)})},d=f=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ti)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(at(typeof i.accessToken=="string"),new Iw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string"),new fn(e)}}class gA{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class yA{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new gA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _A{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){at(this.o===void 0);const i=a=>{a.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const o=a=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?o(a):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(at(typeof t.token=="string"),this.R=t.token,new vA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=wA(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%e.length))}return i}}function qe(n,e){return n<e?-1:n>e?1:0}function ha(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new xt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new xt(0,0))}static max(){return new Le(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t,i){t===void 0?t=0:t>e.length&&be(),i===void 0?i=e.length-t:i>e.length-t&&be(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Tl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tl?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=e.get(o),u=t.get(o);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class vt extends Tl{construct(e,t,i){return new vt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new vt(t)}static emptyPath(){return new vt([])}}const EA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Tl{construct(e,t,i){return new tn(e,t,i)}static isValidIdentifier(e){return EA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new tn(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new _e(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new _e(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new _e(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(vt.fromString(e))}static fromName(e){return new Pe(vt.fromString(e).popFirst(5))}static empty(){return new Pe(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new vt(e.slice()))}}function TA(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Le.fromTimestamp(i===1e9?new xt(t+1,0):new xt(t,i));return new _s(o,Pe.empty(),e)}function IA(n){return new _s(n.readTime,n.key,-1)}class _s{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new _s(Le.min(),Pe.empty(),-1)}static max(){return new _s(Le.max(),Pe.empty(),-1)}}function SA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==RA)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,i)=>{t(e)})}static reject(e){return new ne((t,i)=>{i(e)})}static waitFor(e){return new ne((t,i)=>{let o=0,a=0,u=!1;e.forEach(d=>{++o,d.next(()=>{++a,u&&a===o&&t()},f=>i(f))}),u=!0,a===o&&t()})}static or(e){let t=ne.resolve(!1);for(const i of e)t=t.next(o=>o?ne.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,a)=>{i.push(t.call(this,o,a))}),this.waitFor(i)}static mapArray(e,t){return new ne((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next(v=>{u[m]=v,++d,d===a&&i(u)},v=>o(v))}})}static doWhile(e,t){return new ne((i,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):i()};a()})}}function CA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ta(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}fh.oe=-1;function ph(n){return n==null}function zc(n){return n===0&&1/n==-1/0}function AA(n){return typeof n=="number"&&Number.isInteger(n)&&!zc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Hv(e)),e=xA(n.get(t),e);return Hv(e)}function xA(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function Hv(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Rw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new It(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oc(this.root,e,this.comparator,!0)}}class oc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??en.RED,this.left=o??en.EMPTY,this.right=a??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new en(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(e,t,i,o,a){return this}insert(e,t,i){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qv(this.data.getIterator())}getIteratorFrom(e){return new qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new Ft(tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ha(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Pw("Invalid base64 string: "+a):a}}(e);return new rn(t)}static fromUint8Array(e){const t=function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a}(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const DA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(n){if(at(!!n),typeof n=="string"){let e=0;const t=DA.exec(n);if(at(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:kt(n.seconds),nanos:kt(n.nanos)}}function kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Es(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function mh(n){const e=n.mapValue.fields.__previous_value__;return Hp(e)?mh(e):e}function Il(n){const e=ws(n.mapValue.fields.__local_write_time__.timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t,i,o,a,u,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m}}class Sl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ts(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hp(n)?4:OA(n)?9007199254740991:NA(n)?10:11:be()}function Kr(n,e){if(n===e)return!0;const t=Ts(n);if(t!==Ts(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Il(n).isEqual(Il(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=ws(o.timestampValue),d=ws(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return Es(o.bytesValue).isEqual(Es(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return kt(o.geoPointValue.latitude)===kt(a.geoPointValue.latitude)&&kt(o.geoPointValue.longitude)===kt(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return kt(o.integerValue)===kt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=kt(o.doubleValue),d=kt(a.doubleValue);return u===d?zc(u)===zc(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return ha(n.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:case 11:return function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(Wv(u)!==Wv(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!Kr(u[f],d[f])))return!1;return!0}(n,e);default:return be()}}function Rl(n,e){return(n.values||[]).find(t=>Kr(t,e))!==void 0}function da(n,e){if(n===e)return 0;const t=Ts(n),i=Ts(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return function(a,u){const d=kt(a.integerValue||a.doubleValue),f=kt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return Gv(n.timestampValue,e.timestampValue);case 4:return Gv(Il(n),Il(e));case 5:return qe(n.stringValue,e.stringValue);case 6:return function(a,u){const d=Es(a),f=Es(u);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const v=qe(d[m],f[m]);if(v!==0)return v}return qe(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,u){const d=qe(kt(a.latitude),kt(u.latitude));return d!==0?d:qe(kt(a.longitude),kt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Kv(n.arrayValue,e.arrayValue);case 10:return function(a,u){var d,f,m,v;const w=a.fields||{},T=u.fields||{},R=(d=w.value)===null||d===void 0?void 0:d.arrayValue,C=(f=T.value)===null||f===void 0?void 0:f.arrayValue,M=qe(((m=R==null?void 0:R.values)===null||m===void 0?void 0:m.length)||0,((v=C==null?void 0:C.values)===null||v===void 0?void 0:v.length)||0);return M!==0?M:Kv(R,C)}(n.mapValue,e.mapValue);case 11:return function(a,u){if(a===ac.mapValue&&u===ac.mapValue)return 0;if(a===ac.mapValue)return 1;if(u===ac.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let w=0;w<f.length&&w<v.length;++w){const T=qe(f[w],v[w]);if(T!==0)return T;const R=da(d[f[w]],m[v[w]]);if(R!==0)return R}return qe(f.length,v.length)}(n.mapValue,e.mapValue);default:throw be()}}function Gv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=ws(n),i=ws(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function Kv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=da(t[o],i[o]);if(a)return a}return qe(t.length,i.length)}function fa(n){return Kf(n)}function Kf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=ws(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Es(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Pe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Kf(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Kf(t.fields[u])}`;return o+"}"}(n.mapValue):be()}function Ec(n){switch(Ts(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mh(n);return e?16+Ec(e):16;case 5:return 2*n.stringValue.length;case 6:return Es(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,a)=>o+Ec(a),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return Cs(i.fields,(a,u)=>{o+=a.length+Ec(u)}),o}(n.mapValue);default:throw be()}}function Qv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qf(n){return!!n&&"integerValue"in n}function Wp(n){return!!n&&"arrayValue"in n}function Yv(n){return!!n&&"nullValue"in n}function Xv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tc(n){return!!n&&"mapValue"in n}function NA(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function pl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Cs(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=pl(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Tc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pl(t)}setAll(e){let t=tn.emptyPath(),i={},o=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=pl(u):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Tc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Tc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Cs(t,(o,a)=>e[o]=a);for(const o of i)delete e[o]}clone(){return new On(pl(this.value))}}function Cw(n){const e=[];return Cs(n.fields,(t,i)=>{const o=new tn([t]);if(Tc(i)){const a=Cw(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new pn(e,0,Le.min(),Le.min(),Le.min(),On.empty(),0)}static newFoundDocument(e,t,i,o){return new pn(e,1,t,Le.min(),i,o,0)}static newNoDocument(e,t){return new pn(e,2,t,Le.min(),Le.min(),On.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,Le.min(),Le.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t){this.position=e,this.inclusive=t}}function Jv(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Pe.comparator(Pe.fromName(u.referenceValue),t.key):i=da(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function Zv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Kr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t="asc"){this.field=e,this.dir=t}}function LA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{}class Ot extends Aw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new VA(e,t,i):t==="array-contains"?new jA(e,i):t==="in"?new zA(e,i):t==="not-in"?new BA(e,i):t==="array-contains-any"?new $A(e,i):new Ot(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new FA(e,i):new UA(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(da(t,this.value)):t!==null&&Ts(this.value)===Ts(t)&&this.matchesComparison(da(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends Aw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ar(e,t)}matches(e){return kw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function kw(n){return n.op==="and"}function xw(n){return MA(n)&&kw(n)}function MA(n){for(const e of n.filters)if(e instanceof Ar)return!1;return!0}function Yf(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+fa(n.value);if(xw(n))return n.filters.map(e=>Yf(e)).join(",");{const e=n.filters.map(t=>Yf(t)).join(",");return`${n.op}(${e})`}}function Dw(n,e){return n instanceof Ot?function(i,o){return o instanceof Ot&&i.op===o.op&&i.field.isEqual(o.field)&&Kr(i.value,o.value)}(n,e):n instanceof Ar?function(i,o){return o instanceof Ar&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((a,u,d)=>a&&Dw(u,o.filters[d]),!0):!1}(n,e):void be()}function bw(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${fa(t.value)}`}(n):n instanceof Ar?function(t){return t.op.toString()+" {"+t.getFilters().map(bw).join(" ,")+"}"}(n):"Filter"}class VA extends Ot{constructor(e,t,i){super(e,t,i),this.key=Pe.fromName(i.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class FA extends Ot{constructor(e,t){super(e,"in",t),this.keys=Nw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class UA extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=Nw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Nw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Pe.fromName(i.referenceValue))}class jA extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wp(t)&&Rl(t.arrayValue,this.value)}}class zA extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rl(this.value.arrayValue,t)}}class BA extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Rl(this.value.arrayValue,t)}}class $A extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Rl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function e_(n,e=null,t=[],i=[],o=null,a=null,u=null){return new HA(n,e,t,i,o,a,u)}function qp(n){const e=Ve(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Yf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),ph(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>fa(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>fa(i)).join(",")),e.ue=t}return e.ue}function Gp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!LA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Dw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zv(n.startAt,e.startAt)&&Zv(n.endAt,e.endAt)}function Xf(n){return Pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function WA(n,e,t,i,o,a,u,d){return new jl(n,e,t,i,o,a,u,d)}function gh(n){return new jl(n)}function t_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ow(n){return n.collectionGroup!==null}function ml(n){const e=Ve(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ft(tn.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(d=d.add(m.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new $c(a,i))}),t.has(tn.keyField().canonicalString())||e.ce.push(new $c(tn.keyField(),i))}return e.ce}function Wr(n){const e=Ve(n);return e.le||(e.le=qA(e,ml(n))),e.le}function qA(n,e){if(n.limitType==="F")return e_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new $c(o.field,a)});const t=n.endAt?new Bc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Bc(n.startAt.position,n.startAt.inclusive):null;return e_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Jf(n,e){const t=n.filters.concat([e]);return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zf(n,e,t){return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yh(n,e){return Gp(Wr(n),Wr(e))&&n.limitType===e.limitType}function Lw(n){return`${qp(Wr(n))}|lt:${n.limitType}`}function ea(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>bw(o)).join(", ")}]`),ph(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>fa(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>fa(o)).join(",")),`Target(${i})`}(Wr(n))}; limitType=${n.limitType})`}function vh(n,e){return e.isFoundDocument()&&function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Pe.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,o){for(const a of ml(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(u,d,f){const m=Jv(u,d,f);return u.inclusive?m<=0:m<0}(i.startAt,ml(i),o)||i.endAt&&!function(u,d,f){const m=Jv(u,d,f);return u.inclusive?m>=0:m>0}(i.endAt,ml(i),o))}(n,e)}function GA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Mw(n){return(e,t)=>{let i=!1;for(const o of ml(n)){const a=KA(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function KA(n,e,t){const i=n.field.isKeyField()?Pe.comparator(e.key,t.key):function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?da(f,m):be()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(t,i)=>{for(const[o,a]of i)e(o,a)})}isEmpty(){return Rw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=new It(Pe.comparator);function Ci(){return QA}const Vw=new It(Pe.comparator);function ul(...n){let e=Vw;for(const t of n)e=e.insert(t.key,t);return e}function Fw(n){let e=Vw;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function no(){return gl()}function Uw(){return gl()}function gl(){return new po(n=>n.toString(),(n,e)=>n.isEqual(e))}const YA=new It(Pe.comparator),XA=new Ft(Pe.comparator);function $e(...n){let e=XA;for(const t of n)e=e.add(t);return e}const JA=new Ft(qe);function ZA(){return JA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function jw(n){return{integerValue:""+n}}function ek(n,e){return AA(e)?jw(e):Kp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this._=void 0}}function tk(n,e,t){return n instanceof Pl?function(o,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Hp(a)&&(a=mh(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}}(t,e):n instanceof Cl?Bw(n,e):n instanceof Al?$w(n,e):function(o,a){const u=zw(o,a),d=n_(u)+n_(o.Pe);return Qf(u)&&Qf(o.Pe)?jw(d):Kp(o.serializer,d)}(n,e)}function nk(n,e,t){return n instanceof Cl?Bw(n,e):n instanceof Al?$w(n,e):t}function zw(n,e){return n instanceof Hc?function(i){return Qf(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Pl extends _h{}class Cl extends _h{constructor(e){super(),this.elements=e}}function Bw(n,e){const t=Hw(e);for(const i of n.elements)t.some(o=>Kr(o,i))||t.push(i);return{arrayValue:{values:t}}}class Al extends _h{constructor(e){super(),this.elements=e}}function $w(n,e){let t=Hw(e);for(const i of n.elements)t=t.filter(o=>!Kr(o,i));return{arrayValue:{values:t}}}class Hc extends _h{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function n_(n){return kt(n.integerValue||n.doubleValue)}function Hw(n){return Wp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t){this.field=e,this.transform=t}}function ik(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof Cl&&o instanceof Cl||i instanceof Al&&o instanceof Al?ha(i.elements,o.elements,Kr):i instanceof Hc&&o instanceof Hc?Kr(i.Pe,o.Pe):i instanceof Pl&&o instanceof Pl}(n.transform,e.transform)}class sk{constructor(e,t){this.version=e,this.transformResults=t}}class Pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pr}static exists(e){return new Pr(void 0,e)}static updateTime(e){return new Pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ic(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class wh{}function Ww(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gw(n.key,Pr.none()):new zl(n.key,n.data,Pr.none());{const t=n.data,i=On.empty();let o=new Ft(tn.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new As(n.key,i,new Hn(o.toArray()),Pr.none())}}function ok(n,e,t){n instanceof zl?function(o,a,u){const d=o.value.clone(),f=i_(o.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof As?function(o,a,u){if(!Ic(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=i_(o.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(qw(o)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function yl(n,e,t,i){return n instanceof zl?function(a,u,d,f){if(!Ic(a.precondition,u))return d;const m=a.value.clone(),v=s_(a.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,i):n instanceof As?function(a,u,d,f){if(!Ic(a.precondition,u))return d;const m=s_(a.fieldTransforms,f,u),v=u.data;return v.setAll(qw(a)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(n,e,t,i):function(a,u,d){return Ic(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d}(n,e,t)}function ak(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=zw(i.transform,o||null);a!=null&&(t===null&&(t=On.empty()),t.set(i.field,a))}return t||null}function r_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&ha(i,o,(a,u)=>ik(a,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class zl extends wh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class As extends wh{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function qw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function i_(n,e,t){const i=new Map;at(n.length===t.length);for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,nk(u,d,t[o]))}return i}function s_(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,tk(a,u,e))}return i}class Gw extends wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lk extends wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&ok(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=yl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=yl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Uw();return this.mutations.forEach(o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const f=Ww(u,d);f!==null&&i.set(o.key,f),u.isValidDocument()||u.convertToNoDocument(Le.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$e())}isEqual(e){return this.batchId===e.batchId&&ha(this.mutations,e.mutations,(t,i)=>r_(t,i))&&ha(this.baseMutations,e.baseMutations,(t,i)=>r_(t,i))}}class Qp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){at(e.mutations.length===i.length);let o=function(){return YA}();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Qp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Je;function dk(n){switch(n){default:return be();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0}}function Kw(n){if(n===void 0)return Pi("GRPC error has no .code"),re.UNKNOWN;switch(n){case Nt.OK:return re.OK;case Nt.CANCELLED:return re.CANCELLED;case Nt.UNKNOWN:return re.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return re.INTERNAL;case Nt.UNAVAILABLE:return re.UNAVAILABLE;case Nt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Nt.NOT_FOUND:return re.NOT_FOUND;case Nt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Nt.ABORTED:return re.ABORTED;case Nt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Nt.DATA_LOSS:return re.DATA_LOSS;default:return be()}}(Je=Nt||(Nt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=new so([4294967295,4294967295],0);function o_(n){const e=fk().encode(n),t=new yw;return t.update(e),new Uint8Array(t.digest())}function a_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new so([t,i],0),new so([o,a],0)]}class Yp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new cl(`Invalid padding: ${t}`);if(i<0)throw new cl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new cl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new cl(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=so.fromNumber(this.Te)}Ee(e,t,i){let o=e.add(t.multiply(so.fromNumber(i)));return o.compare(pk)===1&&(o=new so([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=o_(e),[i,o]=a_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);if(!this.de(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Yp(a,o,t);return i.forEach(d=>u.insert(d)),u}insert(e){if(this.Te===0)return;const t=o_(e),[i,o]=a_(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(i,o,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Bl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Eh(Le.min(),o,new It(qe),Ci(),$e())}}class Bl{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Bl(i,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class Qw{constructor(e,t){this.targetId=e,this.me=t}}class Yw{constructor(e,t,i=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class l_{constructor(){this.fe=0,this.ge=u_(),this.pe=rn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=$e(),t=$e(),i=$e();return this.ge.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:be()}}),new Bl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=u_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,at(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class mk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ci(),this.qe=lc(),this.Qe=lc(),this.Ke=new It(qe)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:be()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,i=e.me.count,o=this.Ye(t);if(o){const a=o.target;if(Xf(a))if(i===0){const u=new Pe(a.path);this.We(t,u,pn.newNoDocument(u,Le.min()))}else at(i===1);else{const u=this.Ze(t);if(u!==i){const d=this.Xe(e),f=d?this.et(d,e,u):1;if(f!==0){this.He(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,m)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Es(i).toUint8Array()}catch(f){if(f instanceof Pw)return ca("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new Yp(u,o,a)}catch(f){return ca(f instanceof cl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Te===0?null:d}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach(a=>{const u=this.Le.nt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.We(t,a,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((a,u)=>{const d=this.Ye(u);if(d){if(a.current&&Xf(d.target)){const f=new Pe(d.target.path);this.st(f).has(u)||this.ot(u,f)||this.We(u,f,pn.newNoDocument(f,e))}a.be&&(t.set(u,a.ve()),a.Ce())}});let i=$e();this.Qe.forEach((a,u)=>{let d=!0;u.forEachWhile(f=>{const m=this.Ye(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(a))}),this.ke.forEach((a,u)=>u.setReadTime(e));const o=new Eh(e,t,this.Ke,this.ke,i);return this.ke=Ci(),this.qe=lc(),this.Qe=lc(),this.Ke=new It(qe),o}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new l_,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Ft(qe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ft(qe),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new l_),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function lc(){return new It(Pe.comparator)}function u_(){return new It(Pe.comparator)}const gk={asc:"ASCENDING",desc:"DESCENDING"},yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vk={and:"AND",or:"OR"};class _k{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ep(n,e){return n.useProto3Json||ph(e)?e:{value:e}}function Wc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wk(n,e){return Wc(n,e.toTimestamp())}function qr(n){return at(!!n),Le.fromTimestamp(function(t){const i=ws(t);return new xt(i.seconds,i.nanos)}(n))}function Xp(n,e){return tp(n,e).canonicalString()}function tp(n,e){const t=function(o){return new vt(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Jw(n){const e=vt.fromString(n);return at(rE(e)),e}function np(n,e){return Xp(n.databaseId,e.path)}function Sf(n,e){const t=Jw(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(eE(t))}function Zw(n,e){return Xp(n.databaseId,e)}function Ek(n){const e=Jw(n);return e.length===4?vt.emptyPath():eE(e)}function rp(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eE(n){return at(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function c_(n,e,t){return{name:np(n,e),fields:t.value.mapValue.fields}}function Tk(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(m,v){return m.useProto3Json?(at(v===void 0||typeof v=="string"),rn.fromBase64String(v||"")):(at(v===void 0||v instanceof Buffer||v instanceof Uint8Array),rn.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(m){const v=m.code===void 0?re.UNKNOWN:Kw(m.code);return new _e(v,m.message||"")}(u);t=new Yw(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Sf(n,i.document.name),a=qr(i.document.updateTime),u=i.document.createTime?qr(i.document.createTime):Le.min(),d=new On({mapValue:{fields:i.document.fields}}),f=pn.newFoundDocument(o,a,u,d),m=i.targetIds||[],v=i.removedTargetIds||[];t=new Sc(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Sf(n,i.document),a=i.readTime?qr(i.readTime):Le.min(),u=pn.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Sc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Sf(n,i.document),a=i.removedTargetIds||[];t=new Sc([],a,o,null)}else{if(!("filter"in e))return be();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new hk(o,a),d=i.targetId;t=new Qw(d,u)}}return t}function Ik(n,e){let t;if(e instanceof zl)t={update:c_(n,e.key,e.value)};else if(e instanceof Gw)t={delete:np(n,e.key)};else if(e instanceof As)t={update:c_(n,e.key,e.data),updateMask:bk(e.fieldMask)};else{if(!(e instanceof lk))return be();t={verify:np(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,u){const d=u.transform;if(d instanceof Pl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Cl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Al)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Hc)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw be()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:wk(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:be()}(n,e.precondition)),t}function Sk(n,e){return n&&n.length>0?(at(e!==void 0),n.map(t=>function(o,a){let u=o.updateTime?qr(o.updateTime):qr(a);return u.isEqual(Le.min())&&(u=qr(a)),new sk(u,o.transformResults||[])}(t,e))):[]}function Rk(n,e){return{documents:[Zw(n,e.path)]}}function Pk(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Zw(n,o);const a=function(m){if(m.length!==0)return nE(Ar.create(m,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(m){if(m.length!==0)return m.map(v=>function(T){return{field:ta(T.field),direction:kk(T.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=ep(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{ct:t,parent:o}}function Ck(n){let e=Ek(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){at(i===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(w){const T=tE(w);return T instanceof Ar&&xw(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(w){return w.map(T=>function(C){return new $c(na(C.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(T))}(t.orderBy));let d=null;t.limit&&(d=function(w){let T;return T=typeof w=="object"?w.value:w,ph(T)?null:T}(t.limit));let f=null;t.startAt&&(f=function(w){const T=!!w.before,R=w.values||[];return new Bc(R,T)}(t.startAt));let m=null;return t.endAt&&(m=function(w){const T=!w.before,R=w.values||[];return new Bc(R,T)}(t.endAt)),WA(e,o,u,a,d,"F",f,m)}function Ak(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=na(t.unaryFilter.field);return Ot.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=na(t.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=na(t.unaryFilter.field);return Ot.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=na(t.unaryFilter.field);return Ot.create(u,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(n):n.fieldFilter!==void 0?function(t){return Ot.create(na(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ar.create(t.compositeFilter.filters.map(i=>tE(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be()}}(t.compositeFilter.op))}(n):be()}function kk(n){return gk[n]}function xk(n){return yk[n]}function Dk(n){return vk[n]}function ta(n){return{fieldPath:n.canonicalString()}}function na(n){return tn.fromServerFormat(n.fieldPath)}function nE(n){return n instanceof Ot?function(t){if(t.op==="=="){if(Xv(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NAN"}};if(Yv(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Xv(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NOT_NAN"}};if(Yv(t.value))return{unaryFilter:{field:ta(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(t.field),op:xk(t.op),value:t.value}}}(n):n instanceof Ar?function(t){const i=t.getFilters().map(o=>nE(o));return i.length===1?i[0]:{compositeFilter:{op:Dk(t.op),filters:i}}}(n):be()}function bk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,t,i,o,a=Le.min(),u=Le.min(),d=rn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.ht=e}}function Ok(n){const e=Ck({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.ln=new Mk}addToCollectionParentIndex(e,t){return this.ln.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(_s.min())}updateCollectionGroup(e,t,i){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class Mk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ft(vt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ft(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(41943040,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new pa(0)}static Qn(){return new pa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_([n,e],[t,i]){const o=qe(n,t);return o===0?qe(e,i):o}class Vk{constructor(e){this.Gn=e,this.buffer=new Ft(d_),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();d_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fk{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ta(t)?ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ea(t)}await this.Yn(3e5)})}}class Uk{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(fh.oe);const i=new Vk(t);return this.Zn.forEachTarget(e,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(h_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),h_):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,o,a,u,d,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,u=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(i=w,d=Date.now(),this.removeTargets(e,i,t))).next(w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(m=Date.now(),Zo()<=Be.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w})))}}function jk(n,e){return new Uk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(){this.changes=new po(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ne.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&yl(i.mutation,o,Hn.empty(),xt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,$e()).next(()=>i))}getLocalViewOfDocuments(e,t,i=$e()){const o=no();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(a=>{let u=ul();return a.forEach((d,f)=>{u=u.insert(d,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=no();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,$e()))}populateOverlays(e,t,i){const o=[];return i.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,i,o){let a=Ci();const u=gl(),d=function(){return gl()}();return t.forEach((f,m)=>{const v=i.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof As)?a=a.insert(m.key,m):v!==void 0?(u.set(m.key,v.mutation.getFieldMask()),yl(v.mutation,m,v.mutation.getFieldMask(),xt.now())):u.set(m.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,v)=>u.set(m,v)),t.forEach((m,v)=>{var w;return d.set(m,new Bk(v,(w=u.get(m))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const i=gl();let o=new It((u,d)=>u-d),a=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let v=i.get(f)||Hn.empty();v=d.applyToLocalView(m,v),i.set(f,v);const w=(o.get(d.batchId)||$e()).add(f);o=o.insert(d.batchId,w)})}).next(()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,v=f.value,w=Uw();v.forEach(T=>{if(!a.has(T)){const R=Ww(t.get(T),i.get(T));R!==null&&w.set(T,R),a=a.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,w))}return ne.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(u){return Pe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ow(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):ne.resolve(no());let d=-1,f=a;return u.next(m=>ne.forEach(m,(v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(v)?ne.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{f=f.insert(v,T)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,$e())).next(v=>({batchId:d,changes:Fw(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next(i=>{let o=ul();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=ul();return this.indexManager.getCollectionParents(e,a).next(d=>ne.forEach(d,f=>{const m=function(w,T){return new jl(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,i,o).next(v=>{v.forEach((w,T)=>{u=u.insert(w,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o))).next(u=>{a.forEach((f,m)=>{const v=m.getKey();u.get(v)===null&&(u=u.insert(v,pn.newInvalidDocument(v)))});let d=ul();return u.forEach((f,m)=>{const v=a.get(f);v!==void 0&&yl(v.mutation,m,Hn.empty(),xt.now()),vh(t,m)&&(d=d.insert(f,m))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return ne.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:qr(o.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:Ok(o.bundledQuery),readTime:qr(o.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.overlays=new It(Pe.comparator),this.Er=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const i=no();return ne.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&i.set(o,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,a)=>{this.Tt(e,t,a)}),ne.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Er.get(i);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Er.delete(i)),ne.resolve()}getOverlaysForCollection(e,t,i){const o=no(),a=t.length+1,u=new Pe(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>i&&o.set(f.getKey(),f)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new It((m,v)=>m-v);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let v=a.get(m.largestBatchId);v===null&&(v=no(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=no(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,v)=>d.set(m,v)),!(d.size()>=o)););return ne.resolve(d)}Tt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Er.get(o.largestBatchId).delete(i.key);this.Er.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new ck(t,i));let a=this.Er.get(t);a===void 0&&(a=$e(),this.Er.set(t,a)),this.Er.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(){this.dr=new Ft($t.Ar),this.Rr=new Ft($t.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const i=new $t(e,t);this.dr=this.dr.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new $t(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new Pe(new vt([])),i=new $t(t,e),o=new $t(t,e+1),a=[];return this.Rr.forEachInRange([i,o],u=>{this.gr(u),a.push(u.key)}),a}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Pe(new vt([])),i=new $t(t,e),o=new $t(t,e+1);let a=$e();return this.Rr.forEachInRange([i,o],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new $t(e,0),i=this.dr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Pe.comparator(e.key,t.key)||qe(e.br,t.br)}static Vr(e,t){return qe(e.br,t.br)||Pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Ft($t.Ar)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new uk(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.vr=this.vr.add(new $t(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ne.resolve(u)}lookupMutationBatch(e,t){return ne.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Fr(i),a=o<0?0:o;return ne.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $t(t,0),o=new $t(t,Number.POSITIVE_INFINITY),a=[];return this.vr.forEachInRange([i,o],u=>{const d=this.Cr(u.br);a.push(d)}),ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ft(qe);return t.forEach(o=>{const a=new $t(o,0),u=new $t(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([a,u],d=>{i=i.add(d.br)})}),ne.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Pe.isDocumentKey(a)||(a=a.child(""));const u=new $t(new Pe(a),0);let d=new Ft(qe);return this.vr.forEachWhile(f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===o&&(d=d.add(f.br)),!0)},u),ne.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach(i=>{const o=this.Cr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){at(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return ne.forEach(t.mutations,o=>{const a=new $t(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=i})}Ln(e){}containsKey(e,t){const i=new $t(t,0),o=this.vr.firstAfterOrEqual(i);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.Nr=e,this.docs=function(){return new It(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ne.resolve(i?i.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let i=Ci();return t.forEach(o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():pn.newInvalidDocument(o))}),ne.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Ci();const u=t.path,d=new Pe(u.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||SA(IA(v),i)<=0||(o.has(v.key)||vh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ne.resolve(a)}getAllFromCollectionGroup(e,t,i,o){be()}Lr(e,t){return ne.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Qk(this)}getSize(e){return ne.resolve(this.size)}}class Qk extends zk{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(i)}),ne.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.persistence=e,this.Br=new po(t=>qp(t),Gp),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.kr=0,this.qr=new Jp,this.targetCount=0,this.Qr=pa.qn()}forEachTarget(e,t){return this.Br.forEach((i,o)=>t(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),ne.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new pa(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Un(t),ne.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.Br.forEach((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Br.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),ne.waitFor(a).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const i=this.Br.get(t)||null;return ne.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),ne.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(u=>{a.push(o.markPotentiallyOrphaned(e,u))}),ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return ne.resolve(i)}containsKey(e,t){return ne.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,t){this.Kr={},this.overlays={},this.$r=new fh(0),this.Ur=!1,this.Ur=!0,this.Wr=new qk,this.referenceDelegate=e(this),this.Gr=new Yk(this),this.indexManager=new Lk,this.remoteDocumentCache=function(o){return new Kk(o)}(i=>this.referenceDelegate.zr(i)),this.serializer=new Nk(t),this.jr=new Hk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Wk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new Gk(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const o=new Xk(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(a=>this.referenceDelegate.Jr(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Yr(e,t){return ne.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class Xk extends PA{constructor(e){super(),this.currentSequenceNumber=e}}class Zp{constructor(e){this.persistence=e,this.Zr=new Jp,this.Xr=null}static ei(e){return new Zp(e)}get ti(){if(this.Xr)return this.Xr;throw be()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),ne.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.ti.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ti,i=>{const o=Pe.fromPath(i);return this.ni(e,o).next(a=>{a||t.removeEntry(o,Le.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return ne.or([()=>ne.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class qc{constructor(e,t){this.persistence=e,this.ri=new po(i=>kA(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=jk(this,t)}static ei(e,t){return new qc(e,t)}Hr(){}Jr(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return ne.forEach(this.ri,(i,o)=>this.ir(e,i,o).next(a=>a?ne.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.Lr(e,u=>this.ir(e,u,t).next(d=>{d||(i++,a.removeEntry(u,Le.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),ne.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ec(e.data.value)),t}ir(e,t,i){return ne.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return ne.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(e,t){let i=$e(),o=$e();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new em(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return H1()?8:CA(gn())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.Xi(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.es(e,t,o,i).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new Jk;return this.ts(e,t,u).next(d=>{if(a.result=d,this.Hi)return this.ns(e,t,u,d.size)})}).next(()=>a.result)}ns(e,t,i,o){return i.documentReadCount<this.Ji?(Zo()<=Be.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",ea(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),ne.resolve()):(Zo()<=Be.DEBUG&&ge("QueryEngine","Query:",ea(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(Zo()<=Be.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",ea(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wr(t))):ne.resolve())}Xi(e,t){if(t_(t))return ne.resolve(null);let i=Wr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Zf(t,null,"F"),i=Wr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const u=$e(...a);return this.Zi.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const m=this.rs(t,d);return this.ss(t,m,u,f.readTime)?this.Xi(e,Zf(t,null,"F")):this.os(e,m,t,f)}))})))}es(e,t,i,o){return t_(t)||o.isEqual(Le.min())?ne.resolve(null):this.Zi.getDocuments(e,i).next(a=>{const u=this.rs(t,a);return this.ss(t,u,i,o)?ne.resolve(null):(Zo()<=Be.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ea(t)),this.os(e,u,t,TA(o,-1)).next(d=>d))})}rs(e,t){let i=new Ft(Mw(e));return t.forEach((o,a)=>{vh(e,a)&&(i=i.add(a))}),i}ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ts(e,t,i){return Zo()<=Be.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",ea(t)),this.Zi.getDocumentsMatchingQuery(e,t,_s.min(),i)}os(e,t,i,o){return this.Zi.getDocumentsMatchingQuery(e,i,o).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t,i,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new It(qe),this.cs=new po(a=>qp(a),Gp),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $k(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function tx(n,e,t,i){return new ex(n,e,t,i)}async function sE(n,e){const t=Ve(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(a=>(o=a,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const u=[],d=[];let f=$e();for(const m of o){u.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(i,f).next(m=>({Ts:m,removedBatchIds:u,addedBatchIds:d}))})})}function nx(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),a=t.hs.newChangeBuffer({trackRemovals:!0});return function(d,f,m,v){const w=m.batch,T=w.keys();let R=ne.resolve();return T.forEach(C=>{R=R.next(()=>v.getEntry(f,C)).next(M=>{const b=m.docVersions.get(C);at(b!==null),M.version.compareTo(b)<0&&(w.applyToRemoteDocument(M,m),M.isValidDocument()&&(M.setReadTime(m.commitVersion),v.addEntry(M)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(f,w))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let f=$e();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function oE(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function rx(n,e){const t=Ve(n),i=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const d=[];e.targetChanges.forEach((v,w)=>{const T=o.get(w);if(!T)return;d.push(t.Gr.removeMatchingKeys(a,v.removedDocuments,w).next(()=>t.Gr.addMatchingKeys(a,v.addedDocuments,w)));let R=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?R=R.withResumeToken(rn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,i)),o=o.insert(w,R),function(M,b,U){return M.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(T,R,v)&&d.push(t.Gr.updateTargetData(a,R))});let f=Ci(),m=$e();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),d.push(ix(a,u,e.documentUpdates).next(v=>{f=v.Is,m=v.Es})),!i.isEqual(Le.min())){const v=t.Gr.getLastRemoteSnapshotVersion(a).next(w=>t.Gr.setTargetsMetadata(a,a.currentSequenceNumber,i));d.push(v)}return ne.waitFor(d).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(t.us=o,a))}function ix(n,e,t){let i=$e(),o=$e();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let u=Ci();return t.forEach((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(d)),f.isNoDocument()&&f.version.isEqual(Le.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):ge("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{Is:u,Es:o}})}function sx(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function ox(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,e).next(a=>a?(o=a,ne.resolve(o)):t.Gr.allocateTargetId(i).next(u=>(o=new fs(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function ip(n,e,t){const i=Ve(n),o=i.us.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,u=>i.persistence.referenceDelegate.removeTarget(u,o))}catch(u){if(!Ta(u))throw u;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.us=i.us.remove(e),i.cs.delete(o.target)}function f_(n,e,t){const i=Ve(n);let o=Le.min(),a=$e();return i.persistence.runTransaction("Execute query","readwrite",u=>function(f,m,v){const w=Ve(f),T=w.cs.get(v);return T!==void 0?ne.resolve(w.us.get(T)):w.Gr.getTargetData(m,v)}(i,u,Wr(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(u,d.targetId).next(f=>{a=f})}).next(()=>i._s.getDocumentsMatchingQuery(u,e,t?o:Le.min(),t?a:$e())).next(d=>(ax(i,GA(e),d),{documents:d,ds:a})))}function ax(n,e,t){let i=n.ls.get(e)||Le.min();t.forEach((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.ls.set(e,i)}class p_{constructor(){this.activeTargetIds=ZA()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lx{constructor(){this._o=new p_,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new p_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=null;function Rf(){return uc===null?uc=function(){return 268435456+Math.round(2147483648*Math.random())}():uc++,"0x"+uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class dx extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${a}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Oo(t,i,o,a,u){const d=Rf(),f=this.No(t,i.toUriEncodedString());ge("RestConnection",`Sending RPC '${t}' ${d}:`,f,o);const m={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(m,a,u),this.Bo(t,f,m,o).then(v=>(ge("RestConnection",`Received RPC '${t}' ${d}: `,v),v),v=>{throw ca("RestConnection",`RPC '${t}' ${d} failed with error: `,v,"url: ",f,"request:",o),v})}ko(t,i,o,a,u,d){return this.Oo(t,i,o,a,u)}Lo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((a,u)=>t[u]=a),o&&o.headers.forEach((a,u)=>t[u]=a)}No(t,i){const o=cx[t];return`${this.Fo}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,i,o){const a=Rf();return new Promise((u,d)=>{const f=new vw;f.setWithCredentials(!0),f.listenOnce(_w.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case wc.NO_ERROR:const v=f.getResponseJson();ge(dn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),u(v);break;case wc.TIMEOUT:ge(dn,`RPC '${e}' ${a} timed out`),d(new _e(re.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:const w=f.getStatus();if(ge(dn,`RPC '${e}' ${a} failed with status:`,w,"response text:",f.getResponseText()),w>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const R=T==null?void 0:T.error;if(R&&R.status&&R.message){const C=function(b){const U=b.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(U)>=0?U:re.UNKNOWN}(R.status);d(new _e(C,R.message))}else d(new _e(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new _e(re.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{ge(dn,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(o);ge(dn,`RPC '${e}' ${a} sending request:`,o),f.send(t,"POST",m,i,15)})}qo(e,t,i){const o=Rf(),a=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Tw(),d=Ew(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Lo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const v=a.join("");ge(dn,`Creating RPC '${e}' stream ${o}: ${v}`,f);const w=u.createWebChannel(v,f);let T=!1,R=!1;const C=new hx({Eo:b=>{R?ge(dn,`Not sending because RPC '${e}' stream ${o} is closed:`,b):(T||(ge(dn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),ge(dn,`RPC '${e}' stream ${o} sending:`,b),w.send(b))},Ao:()=>w.close()}),M=(b,U,Z)=>{b.listen(U,Q=>{try{Z(Q)}catch(X){setTimeout(()=>{throw X},0)}})};return M(w,ll.EventType.OPEN,()=>{R||(ge(dn,`RPC '${e}' stream ${o} transport opened.`),C.So())}),M(w,ll.EventType.CLOSE,()=>{R||(R=!0,ge(dn,`RPC '${e}' stream ${o} transport closed`),C.Do())}),M(w,ll.EventType.ERROR,b=>{R||(R=!0,ca(dn,`RPC '${e}' stream ${o} transport errored:`,b),C.Do(new _e(re.UNAVAILABLE,"The operation could not be completed")))}),M(w,ll.EventType.MESSAGE,b=>{var U;if(!R){const Z=b.data[0];at(!!Z);const Q=Z,X=(Q==null?void 0:Q.error)||((U=Q[0])===null||U===void 0?void 0:U.error);if(X){ge(dn,`RPC '${e}' stream ${o} received error:`,X);const L=X.status;let te=function(P){const D=Nt[P];if(D!==void 0)return Kw(D)}(L),k=X.message;te===void 0&&(te=re.INTERNAL,k="Unknown error status: "+L+" with message "+X.message),R=!0,C.Do(new _e(te,k)),w.close()}else ge(dn,`RPC '${e}' stream ${o} received:`,Z),C.vo(Z)}}),M(d,ww.STAT_EVENT,b=>{b.stat===Gf.PROXY?ge(dn,`RPC '${e}' stream ${o} detected buffering proxy`):b.stat===Gf.NOPROXY&&ge(dn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{C.bo()},0),C}}function Pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(n){return new _k(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,t,i=1e3,o=1.5,a=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=a,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,t,i,o,a,u,d,f){this.li=e,this.Yo=i,this.Zo=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new aE(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Pi(t.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{e(()=>{const o=new _e(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.E_(o)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.E_(o))}),this.stream.onMessage(o=>{i(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fx extends lE{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=Tk(this.serializer,e),i=function(a){if(!("targetChange"in a))return Le.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Le.min():u.readTime?qr(u.readTime):Le.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=rp(this.serializer),t.addTarget=function(a,u){let d;const f=u.target;if(d=Xf(f)?{documents:Rk(a,f)}:{query:Pk(a,f).ct},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=Xw(a,u.resumeToken);const m=ep(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo(Le.min())>0){d.readTime=Wc(a,u.snapshotVersion.toTimestamp());const m=ep(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d}(this.serializer,e);const i=Ak(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=rp(this.serializer),t.removeTarget=e,this.c_(t)}}class px extends lE{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return at(!!e.streamToken),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){at(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=Sk(e.writeResults,e.commitTime),i=qr(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=rp(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Ik(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Oo(e,tp(t,i),o,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(re.UNKNOWN,a.toString())})}ko(e,t,i,o,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.ko(e,tp(t,i),o,u,d,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(re.UNKNOWN,u.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class gx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Pi(t),this.C_=!1):ge("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=a,this.Q_.uo(u=>{i.enqueueAndForget(async()=>{mo(this)&&(ge("RemoteStore","Restarting streams for network reachability change."),await async function(f){const m=Ve(f);m.k_.add(4),await $l(m),m.K_.set("Unknown"),m.k_.delete(4),await Ih(m)}(this))})}),this.K_=new gx(i,o)}}async function Ih(n){if(mo(n))for(const e of n.q_)await e(!0)}async function $l(n){for(const e of n.q_)await e(!1)}function uE(n,e){const t=Ve(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),im(t)?rm(t):Ia(t).s_()&&nm(t,e))}function tm(n,e){const t=Ve(n),i=Ia(t);t.B_.delete(e),i.s_()&&cE(t,e),t.B_.size===0&&(i.s_()?i.a_():mo(t)&&t.K_.set("Unknown"))}function nm(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ia(n).V_(e)}function cE(n,e){n.U_.xe(e),Ia(n).m_(e)}function rm(n){n.U_=new mk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Ia(n).start(),n.K_.F_()}function im(n){return mo(n)&&!Ia(n).i_()&&n.B_.size>0}function mo(n){return Ve(n).k_.size===0}function hE(n){n.U_=void 0}async function vx(n){n.K_.set("Online")}async function _x(n){n.B_.forEach((e,t)=>{nm(n,e)})}async function wx(n,e){hE(n),im(n)?(n.K_.O_(e),rm(n)):n.K_.set("Unknown")}async function Ex(n,e,t){if(n.K_.set("Online"),e instanceof Yw&&e.state===2&&e.cause)try{await async function(o,a){const u=a.cause;for(const d of a.targetIds)o.B_.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.B_.delete(d),o.U_.removeTarget(d))}(n,e)}catch(i){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gc(n,i)}else if(e instanceof Sc?n.U_.$e(e):e instanceof Qw?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Le.min()))try{const i=await oE(n.localStore);t.compareTo(i)>=0&&await function(a,u){const d=a.U_.it(u);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.B_.get(m);v&&a.B_.set(m,v.withResumeToken(f.resumeToken,u))}}),d.targetMismatches.forEach((f,m)=>{const v=a.B_.get(f);if(!v)return;a.B_.set(f,v.withResumeToken(rn.EMPTY_BYTE_STRING,v.snapshotVersion)),cE(a,f);const w=new fs(v.target,f,m,v.sequenceNumber);nm(a,w)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){ge("RemoteStore","Failed to raise snapshot:",i),await Gc(n,i)}}async function Gc(n,e,t){if(!Ta(e))throw e;n.k_.add(1),await $l(n),n.K_.set("Offline"),t||(t=()=>oE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await Ih(n)})}function dE(n,e){return e().catch(t=>Gc(n,t,e))}async function Sh(n){const e=Ve(n),t=Is(e);let i=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;Tx(e);)try{const o=await sx(e.localStore,i);if(o===null){e.L_.length===0&&t.a_();break}i=o.batchId,Ix(e,o)}catch(o){await Gc(e,o)}fE(e)&&pE(e)}function Tx(n){return mo(n)&&n.L_.length<10}function Ix(n,e){n.L_.push(e);const t=Is(n);t.s_()&&t.f_&&t.g_(e.mutations)}function fE(n){return mo(n)&&!Is(n).i_()&&n.L_.length>0}function pE(n){Is(n).start()}async function Sx(n){Is(n).w_()}async function Rx(n){const e=Is(n);for(const t of n.L_)e.g_(t.mutations)}async function Px(n,e,t){const i=n.L_.shift(),o=Qp.from(i,e,t);await dE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Sh(n)}async function Cx(n,e){e&&Is(n).f_&&await async function(i,o){if(function(u){return dk(u)&&u!==re.ABORTED}(o.code)){const a=i.L_.shift();Is(i).__(),await dE(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o)),await Sh(i)}}(n,e),fE(n)&&pE(n)}async function g_(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const i=mo(t);t.k_.add(3),await $l(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Ih(t)}async function Ax(n,e){const t=Ve(n);e?(t.k_.delete(2),await Ih(t)):e||(t.k_.add(2),await $l(t),t.K_.set("Unknown"))}function Ia(n){return n.W_||(n.W_=function(t,i,o){const a=Ve(t);return a.b_(),new fx(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Ro:vx.bind(null,n),mo:_x.bind(null,n),po:wx.bind(null,n),R_:Ex.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),im(n)?rm(n):n.K_.set("Unknown")):(await n.W_.stop(),hE(n))})),n.W_}function Is(n){return n.G_||(n.G_=function(t,i,o){const a=Ve(t);return a.b_(),new px(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:Sx.bind(null,n),po:Cx.bind(null,n),p_:Rx.bind(null,n),y_:Px.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await Sh(n)):(await n.G_.stop(),n.L_.length>0&&(ge("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new sm(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function om(n,e){if(Pi("AsyncQueue",`${e}: ${n}`),Ta(n))return new _e(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{static emptySet(e){return new aa(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Pe.comparator(t.key,i.key):(t,i)=>Pe.comparator(t.key,i.key),this.keyedMap=ul(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof aa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new aa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(){this.z_=new It(Pe.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):be():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class ma{constructor(e,t,i,o,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new ma(e,t,aa.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class xx{constructor(){this.queries=v_(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const o=Ve(t),a=o.queries;o.queries=v_(),a.forEach((u,d)=>{for(const f of d.J_)f.onError(i)})})(this,new _e(re.ABORTED,"Firestore shutting down"))}}function v_(){return new po(n=>Lw(n),yh)}async function am(n,e){const t=Ve(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Y_()&&e.Z_()&&(i=2):(a=new kx,i=e.Z_()?0:1);try{switch(i){case 0:a.H_=await t.onListen(o,!0);break;case 1:a.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=om(u,`Initialization of query '${ea(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.J_.push(e),e.ea(t.onlineState),a.H_&&e.ta(a.H_)&&um(t)}async function lm(n,e){const t=Ve(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.J_.indexOf(e);u>=0&&(a.J_.splice(u,1),a.J_.length===0?o=e.Z_()?0:1:!a.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Dx(n,e){const t=Ve(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.J_)d.ta(o)&&(i=!0);u.H_=o}}i&&um(t)}function bx(n,e,t){const i=Ve(n),o=i.queries.get(e);if(o)for(const a of o.J_)a.onError(t);i.queries.delete(e)}function um(n){n.X_.forEach(e=>{e.next()})}var sp,__;(__=sp||(sp={})).na="default",__.Cache="cache";class cm{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ma(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==sp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e){this.key=e}}class gE{constructor(e){this.key=e}}class Nx{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=$e(),this.mutatedKeys=$e(),this.Va=Mw(e),this.ma=new aa(this.Va)}get fa(){return this.da}ga(e,t){const i=t?t.pa:new y_,o=t?t.ma:this.ma;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,w)=>{const T=o.get(v),R=vh(this.query,w)?w:null,C=!!T&&this.mutatedKeys.has(T.key),M=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let b=!1;T&&R?T.data.isEqual(R.data)?C!==M&&(i.track({type:3,doc:R}),b=!0):this.ya(T,R)||(i.track({type:2,doc:R}),b=!0,(f&&this.Va(R,f)>0||m&&this.Va(R,m)<0)&&(d=!0)):!T&&R?(i.track({type:0,doc:R}),b=!0):T&&!R&&(i.track({type:1,doc:T}),b=!0,(f||m)&&(d=!0)),b&&(R?(u=u.add(R),a=M?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{ma:u,pa:i,ss:d,mutatedKeys:a}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const u=e.pa.j_();u.sort((v,w)=>function(R,C){const M=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return M(R)-M(C)}(v.type,w.type)||this.Va(v.doc,w.doc)),this.wa(i),o=o!=null&&o;const d=t&&!o?this.Sa():[],f=this.Ra.size===0&&this.current&&!o?1:0,m=f!==this.Aa;return this.Aa=f,u.length!==0||m?{snapshot:new ma(this.query,e.ma,a,u,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new y_,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=$e(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new gE(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new mE(i))}),t}va(e){this.da=e.ds,this.Ra=$e();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return ma.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class Ox{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Lx{constructor(e){this.key=e,this.Fa=!1}}class Mx{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ma={},this.xa=new po(d=>Lw(d),yh),this.Oa=new Map,this.Na=new Set,this.La=new It(Pe.comparator),this.Ba=new Map,this.ka=new Jp,this.qa={},this.Qa=new Map,this.Ka=pa.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Vx(n,e,t=!0){const i=TE(n);let o;const a=i.xa.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.Ca()):o=await yE(i,e,t,!0),o}async function Fx(n,e){const t=TE(n);await yE(t,e,!0,!1)}async function yE(n,e,t,i){const o=await ox(n.localStore,Wr(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await Ux(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&uE(n.remoteStore,o),d}async function Ux(n,e,t,i,o){n.Ua=(w,T,R)=>async function(M,b,U,Z){let Q=b.view.ga(U);Q.ss&&(Q=await f_(M.localStore,b.query,!1).then(({documents:k})=>b.view.ga(k,Q)));const X=Z&&Z.targetChanges.get(b.targetId),L=Z&&Z.targetMismatches.get(b.targetId)!=null,te=b.view.applyChanges(Q,M.isPrimaryClient,X,L);return E_(M,b.targetId,te.ba),te.snapshot}(n,w,T,R);const a=await f_(n.localStore,e,!0),u=new Nx(e,a.ds),d=u.ga(a.documents),f=Bl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),m=u.applyChanges(d,n.isPrimaryClient,f);E_(n,t,m.ba);const v=new Ox(e,t,u);return n.xa.set(e,v),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),m.snapshot}async function jx(n,e,t){const i=Ve(n),o=i.xa.get(e),a=i.Oa.get(o.targetId);if(a.length>1)return i.Oa.set(o.targetId,a.filter(u=>!yh(u,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await ip(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&tm(i.remoteStore,o.targetId),op(i,o.targetId)}).catch(Ea)):(op(i,o.targetId),await ip(i.localStore,o.targetId,!0))}async function zx(n,e){const t=Ve(n),i=t.xa.get(e),o=t.Oa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),tm(t.remoteStore,i.targetId))}async function Bx(n,e,t){const i=Qx(n);try{const o=await function(u,d){const f=Ve(u),m=xt.now(),v=d.reduce((R,C)=>R.add(C.key),$e());let w,T;return f.persistence.runTransaction("Locally write mutations","readwrite",R=>{let C=Ci(),M=$e();return f.hs.getEntries(R,v).next(b=>{C=b,C.forEach((U,Z)=>{Z.isValidDocument()||(M=M.add(U))})}).next(()=>f.localDocuments.getOverlayedDocuments(R,C)).next(b=>{w=b;const U=[];for(const Z of d){const Q=ak(Z,w.get(Z.key).overlayedDocument);Q!=null&&U.push(new As(Z.key,Q,Cw(Q.value.mapValue),Pr.exists(!0)))}return f.mutationQueue.addMutationBatch(R,m,U,d)}).next(b=>{T=b;const U=b.applyToLocalDocumentSet(w,M);return f.documentOverlayCache.saveOverlays(R,b.batchId,U)})}).then(()=>({batchId:T.batchId,changes:Fw(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(u,d,f){let m=u.qa[u.currentUser.toKey()];m||(m=new It(qe)),m=m.insert(d,f),u.qa[u.currentUser.toKey()]=m}(i,o.batchId,t),await Hl(i,o.changes),await Sh(i.remoteStore)}catch(o){const a=om(o,"Failed to persist write");t.reject(a)}}async function vE(n,e){const t=Ve(n);try{const i=await rx(t.localStore,e);e.targetChanges.forEach((o,a)=>{const u=t.Ba.get(a);u&&(at(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.Fa=!0:o.modifiedDocuments.size>0?at(u.Fa):o.removedDocuments.size>0&&(at(u.Fa),u.Fa=!1))}),await Hl(t,i,e)}catch(i){await Ea(i)}}function w_(n,e,t){const i=Ve(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.xa.forEach((a,u)=>{const d=u.view.ea(e);d.snapshot&&o.push(d.snapshot)}),function(u,d){const f=Ve(u);f.onlineState=d;let m=!1;f.queries.forEach((v,w)=>{for(const T of w.J_)T.ea(d)&&(m=!0)}),m&&um(f)}(i.eventManager,e),o.length&&i.Ma.R_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function $x(n,e,t){const i=Ve(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Ba.get(e),a=o&&o.key;if(a){let u=new It(Pe.comparator);u=u.insert(a,pn.newNoDocument(a,Le.min()));const d=$e().add(a),f=new Eh(Le.min(),new Map,new It(qe),u,d);await vE(i,f),i.La=i.La.remove(a),i.Ba.delete(e),hm(i)}else await ip(i.localStore,e,!1).then(()=>op(i,e,t)).catch(Ea)}async function Hx(n,e){const t=Ve(n),i=e.batch.batchId;try{const o=await nx(t.localStore,e);wE(t,i,null),_E(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Hl(t,o)}catch(o){await Ea(o)}}async function Wx(n,e,t){const i=Ve(n);try{const o=await function(u,d){const f=Ve(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,d).next(w=>(at(w!==null),v=w.keys(),f.mutationQueue.removeMutationBatch(m,w))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(i.localStore,e);wE(i,e,t),_E(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Hl(i,o)}catch(o){await Ea(o)}}function _E(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function wE(n,e,t){const i=Ve(n);let o=i.qa[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.qa[i.currentUser.toKey()]=o}}function op(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Oa.get(e))n.xa.delete(i),t&&n.Ma.Wa(i,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(i=>{n.ka.containsKey(i)||EE(n,i)})}function EE(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(tm(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),hm(n))}function E_(n,e,t){for(const i of t)i instanceof mE?(n.ka.addReference(i.key,e),qx(n,i)):i instanceof gE?(ge("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,e),n.ka.containsKey(i.key)||EE(n,i.key)):be()}function qx(n,e){const t=e.key,i=t.path.canonicalString();n.La.get(t)||n.Na.has(i)||(ge("SyncEngine","New document in limbo: "+t),n.Na.add(i),hm(n))}function hm(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new Pe(vt.fromString(e)),i=n.Ka.next();n.Ba.set(i,new Lx(t)),n.La=n.La.insert(t,i),uE(n.remoteStore,new fs(Wr(gh(t.path)),i,"TargetPurposeLimboResolution",fh.oe))}}async function Hl(n,e,t){const i=Ve(n),o=[],a=[],u=[];i.xa.isEmpty()||(i.xa.forEach((d,f)=>{u.push(i.Ua(f,e,t).then(m=>{var v;if((m||t)&&i.isPrimaryClient){const w=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(m){o.push(m);const w=em.zi(f.targetId,m);a.push(w)}}))}),await Promise.all(u),i.Ma.R_(o),await async function(f,m){const v=Ve(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ne.forEach(m,T=>ne.forEach(T.Wi,R=>v.persistence.referenceDelegate.addReference(w,T.targetId,R)).next(()=>ne.forEach(T.Gi,R=>v.persistence.referenceDelegate.removeReference(w,T.targetId,R)))))}catch(w){if(!Ta(w))throw w;ge("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const T=w.targetId;if(!w.fromCache){const R=v.us.get(T),C=R.snapshotVersion,M=R.withLastLimboFreeSnapshotVersion(C);v.us=v.us.insert(T,M)}}}(i.localStore,a))}async function Gx(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const i=await sE(t.localStore,e);t.currentUser=e,function(a,u){a.Qa.forEach(d=>{d.forEach(f=>{f.reject(new _e(re.CANCELLED,u))})}),a.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Hl(t,i.Ts)}}function Kx(n,e){const t=Ve(n),i=t.Ba.get(e);if(i&&i.Fa)return $e().add(i.key);{let o=$e();const a=t.Oa.get(e);if(!a)return o;for(const u of a){const d=t.xa.get(u);o=o.unionWith(d.view.fa)}return o}}function TE(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$x.bind(null,e),e.Ma.R_=Dx.bind(null,e.eventManager),e.Ma.Wa=bx.bind(null,e.eventManager),e}function Qx(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wx.bind(null,e),e}class Kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Th(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return tx(this.persistence,new Zk,e.initialUser,this.serializer)}ja(e){return new iE(Zp.ei,this.serializer)}za(e){return new lx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kc.provider={build:()=>new Kc};class Yx extends Kc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){at(this.persistence.referenceDelegate instanceof qc);const i=this.persistence.referenceDelegate.garbageCollector;return new Fk(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new iE(i=>qc.ei(i,t),this.serializer)}}class ap{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>w_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gx.bind(null,this.syncEngine),await Ax(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xx}()}createDatastore(e){const t=Th(e.databaseInfo.databaseId),i=function(a){return new dx(a)}(e.databaseInfo);return function(a,u,d,f){return new mx(a,u,d,f)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,a,u,d){return new yx(i,o,a,u,d)}(this.localStore,this.datastore,e.asyncQueue,t=>w_(this.syncEngine,t,0),function(){return m_.p()?new m_:new ux}())}createSyncEngine(e,t){return function(o,a,u,d,f,m,v){const w=new Mx(o,a,u,d,f,m);return v&&(w.$a=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=Ve(o);ge("RemoteStore","RemoteStore shutting down."),a.k_.add(5),await $l(a),a.Q_.shutdown(),a.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ap.provider={build:()=>new ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Pi("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=fn.UNAUTHENTICATED,this.clientId=Sw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async u=>{ge("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(ge("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=om(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Cf(n,e){n.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await sE(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function T_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Jx(n);ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>g_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>g_(e.remoteStore,o)),n._onlineComponents=e}async function Jx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;ca("Error using user provided cache. Falling back to memory cache: "+t),await Cf(n,new Kc)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),await Cf(n,new Yx(void 0));return n._offlineComponents}async function IE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),await T_(n,n._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),await T_(n,new ap))),n._onlineComponents}function Zx(n){return IE(n).then(e=>e.syncEngine)}async function Qc(n){const e=await IE(n),t=e.eventManager;return t.onListen=Vx.bind(null,e.syncEngine),t.onUnlisten=jx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Fx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zx.bind(null,e.syncEngine),t}function eD(n,e,t={}){const i=new Ti;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,d,f,m){const v=new dm({next:T=>{v.eu(),u.enqueueAndForget(()=>lm(a,w));const R=T.docs.has(d);!R&&T.fromCache?m.reject(new _e(re.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&f&&f.source==="server"?m.reject(new _e(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new cm(gh(d.path),v,{includeMetadataChanges:!0,ua:!0});return am(a,w)}(await Qc(n),n.asyncQueue,e,t,i)),i.promise}function tD(n,e,t={}){const i=new Ti;return n.asyncQueue.enqueueAndForget(async()=>function(a,u,d,f,m){const v=new dm({next:T=>{v.eu(),u.enqueueAndForget(()=>lm(a,w)),T.fromCache&&f.source==="server"?m.reject(new _e(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),w=new cm(d,v,{includeMetadataChanges:!0,ua:!0});return am(a,w)}(await Qc(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n,e,t){if(!t)throw new _e(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nD(n,e,t,i){if(e===!0&&i===!0)throw new _e(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function S_(n){if(!Pe.isDocumentKey(n))throw new _e(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function R_(n){if(Pe.isDocumentKey(n))throw new _e(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Rh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":be()}function Wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rh(n);throw new _e(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _e(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ph{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P_(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new fA;switch(i.type){case"firstParty":return new yA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=I_.get(t);i&&(ge("ComponentProvider","Removing Datastore"),I_.delete(t),i.terminate())}(this),Promise.resolve()}}function rD(n,e,t,i={}){var o;const a=(n=Wn(n,Ph))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),i.mockUserToken){let d,f;if(typeof i.mockUserToken=="string")d=i.mockUserToken,f=fn.MOCK_USER;else{d=V1(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new _e(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new fn(m)}n._authCredentials=new pA(new Iw(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new go(this.firestore,e,this._query)}}class mn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class ys extends go{constructor(e,t,i){super(e,t,gh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new Pe(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function kl(n,e,...t){if(n=Ht(n),RE("collection","path",e),n instanceof Ph){const i=vt.fromString(e,...t);return R_(i),new ys(n,null,i)}{if(!(n instanceof mn||n instanceof ys))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(vt.fromString(e,...t));return R_(i),new ys(n.firestore,null,i)}}function fm(n,e,...t){if(n=Ht(n),arguments.length===1&&(e=Sw.newId()),RE("doc","path",e),n instanceof Ph){const i=vt.fromString(e,...t);return S_(i),new mn(n,null,new Pe(i))}{if(!(n instanceof mn||n instanceof ys))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(vt.fromString(e,...t));return S_(i),new mn(n.firestore,n instanceof ys?n.converter:null,new Pe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new aE(this,"async_queue_retry"),this.fu=()=>{const i=Pf();i&&ge("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=Pf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Pf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Ti;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ta(e))throw e;ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const o=function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d}(i);throw Pi("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=sm.createAndSchedule(this,e,t,i,a=>this.Su(a));return this.du.push(o),o}pu(){this.Au&&be()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function A_(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1}(n,["next","error","complete"])}class Ss extends Ph{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new C_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new C_(e),this._firestoreClient=void 0,await e}}}function pm(n,e){const t=typeof n=="object"?n:g0(),i=typeof n=="string"?n:"(default)",o=wp(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=L1("firestore");a&&rD(o,...a)}return o}function Ch(n){if(n._terminated)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iD(n),n._firestoreClient}function iD(n){var e,t,i;const o=n._freezeSettings(),a=function(d,f,m,v){return new bA(d,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,SE(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new Xx(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ga(rn.fromBase64String(e))}catch(t){throw new _e(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ga(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=/^__.*__$/;class oD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,t,this.fieldTransforms):new zl(e,this.data,t,this.fieldTransforms)}}class PE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new As(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class ym{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Fu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new ym(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Lu(e),o}Bu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Yc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(CE(this.Mu)&&sD.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class aD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Th(e)}$u(e,t,i,o=!1){return new ym({Mu:e,methodName:t,Ku:i,path:tn.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xh(n){const e=n._freezeSettings(),t=Th(n._databaseId);return new aD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AE(n,e,t,i,o,a={}){const u=n.$u(a.merge||a.mergeFields?2:0,e,t,o);_m("Data must be an object, but it was:",u,i);const d=kE(i,u);let f,m;if(a.merge)f=new Hn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const w of a.mergeFields){const T=lp(e,w,t);if(!u.contains(T))throw new _e(re.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);DE(v,T)||v.push(T)}f=new Hn(v),m=u.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,m=u.fieldTransforms;return new oD(new On(d),f,m)}class Dh extends kh{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dh}}class vm extends kh{_toFieldTransform(e){return new rk(e.path,new Pl)}isEqual(e){return e instanceof vm}}function lD(n,e,t,i){const o=n.$u(1,e,t);_m("Data must be an object, but it was:",o,i);const a=[],u=On.empty();Cs(i,(f,m)=>{const v=wm(e,f,t);m=Ht(m);const w=o.Bu(v);if(m instanceof Dh)a.push(v);else{const T=Wl(m,w);T!=null&&(a.push(v),u.set(v,T))}});const d=new Hn(a);return new PE(u,d,o.fieldTransforms)}function uD(n,e,t,i,o,a){const u=n.$u(1,e,t),d=[lp(e,i,t)],f=[o];if(a.length%2!=0)throw new _e(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(lp(e,a[T])),f.push(a[T+1]);const m=[],v=On.empty();for(let T=d.length-1;T>=0;--T)if(!DE(m,d[T])){const R=d[T];let C=f[T];C=Ht(C);const M=u.Bu(R);if(C instanceof Dh)m.push(R);else{const b=Wl(C,M);b!=null&&(m.push(R),v.set(R,b))}}const w=new Hn(m);return new PE(v,w,u.fieldTransforms)}function cD(n,e,t,i=!1){return Wl(t,n.$u(i?4:3,e))}function Wl(n,e){if(xE(n=Ht(n)))return _m("Unsupported field value:",e,n),kE(n,e);if(n instanceof kh)return function(i,o){if(!CE(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,o){const a=[];let u=0;for(const d of i){let f=Wl(d,o.ku(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}}(n,e)}return function(i,o){if((i=Ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ek(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=xt.fromDate(i);return{timestampValue:Wc(o.serializer,a)}}if(i instanceof xt){const a=new xt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Wc(o.serializer,a)}}if(i instanceof mm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ga)return{bytesValue:Xw(o.serializer,i._byteString)};if(i instanceof mn){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.qu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Xp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof gm)return function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map(f=>{if(typeof f!="number")throw d.qu("VectorValues must only contain numeric values.");return Kp(d.serializer,f)})}}}}}}(i,o);throw o.qu(`Unsupported field value: ${Rh(i)}`)}(n,e)}function kE(n,e){const t={};return Rw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(n,(i,o)=>{const a=Wl(o,e.Ou(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function xE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof xt||n instanceof mm||n instanceof ga||n instanceof mn||n instanceof kh||n instanceof gm)}function _m(n,e,t){if(!xE(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Rh(t);throw i==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+i)}}function lp(n,e,t){if((e=Ht(e))instanceof Ah)return e._internalPath;if(typeof e=="string")return wm(n,e);throw Yc("Field path arguments must be of type string or ",n,!1,void 0,t)}const hD=new RegExp("[~\\*/\\[\\]]");function wm(n,e,t){if(e.search(hD)>=0)throw Yc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ah(...e.split("."))._internalPath}catch{throw Yc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yc(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${i}`),u&&(f+=` in document ${o}`),f+=")"),new _e(re.INVALID_ARGUMENT,d+n+f)}function DE(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Em("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dD extends bE{data(){return super.data()}}function Em(n,e){return typeof e=="string"?wm(n,e):e instanceof Ah?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tm{}class fD extends Tm{}function OE(n,e,...t){let i=[];e instanceof Tm&&i.push(e),i=i.concat(t),function(a){const u=a.filter(f=>f instanceof Im).length,d=a.filter(f=>f instanceof bh).length;if(u>1||u>0&&d>0)throw new _e(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class bh extends fD{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new bh(e,t,i)}_apply(e){const t=this._parse(e);return ME(e._query,t),new go(e.firestore,e.converter,Jf(e._query,t))}_parse(e){const t=xh(e.firestore);return function(a,u,d,f,m,v,w){let T;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new _e(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){x_(w,v);const R=[];for(const C of w)R.push(k_(f,a,C));T={arrayValue:{values:R}}}else T=k_(f,a,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||x_(w,v),T=cD(d,u,w,v==="in"||v==="not-in");return Ot.create(m,v,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function LE(n,e,t){const i=e,o=Em("where",n);return bh._create(o,i,t)}class Im extends Tm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Im(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let u=o;const d=a.getFlattenedFilters();for(const f of d)ME(u,f),u=Jf(u,f)}(e._query,t),new go(e.firestore,e.converter,Jf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function k_(n,e,t){if(typeof(t=Ht(t))=="string"){if(t==="")throw new _e(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ow(e)&&t.indexOf("/")!==-1)throw new _e(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(vt.fromString(t));if(!Pe.isDocumentKey(i))throw new _e(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Qv(n,new Pe(i))}if(t instanceof mn)return Qv(n,t._key);throw new _e(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rh(t)}.`)}function x_(n,e){if(!Array.isArray(n)||n.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ME(n,e){const t=function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new _e(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class pD{convertValue(e,t="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Cs(e,(o,a)=>{i[o]=this.convertValue(a,t)}),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(u=>kt(u.doubleValue));return new gm(a)}convertGeoPoint(e){return new mm(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=mh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Il(e));default:return null}}convertTimestamp(e){const t=ws(e);return new xt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=vt.fromString(e);at(rE(i));const o=new Sl(i.get(1),i.get(3)),a=new Pe(i.popFirst(5));return o.isEqual(t)||Pi(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class FE extends bE{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Em("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Rc extends FE{data(e={}){return super.data(e)}}class UE{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new hl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Rc(this._firestore,this._userDataWriter,i.key,i,new hl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map(d=>{const f=new Rc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new hl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}})}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const f=new Rc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new hl(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),v=u.indexOf(d.doc.key)),{type:mD(d.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(n){n=Wn(n,mn);const e=Wn(n.firestore,Ss);return eD(Ch(e),n._key).then(t=>BE(e,n,t))}class Sm extends pD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ga(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function jE(n){n=Wn(n,go);const e=Wn(n.firestore,Ss),t=Ch(e),i=new Sm(e);return NE(n._query),tD(t,n._query).then(o=>new UE(e,i,n,o))}function D_(n,e,t){n=Wn(n,mn);const i=Wn(n.firestore,Ss),o=VE(n.converter,e,t);return Rm(i,[AE(xh(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Pr.none())])}function yD(n,e,t,...i){n=Wn(n,mn);const o=Wn(n.firestore,Ss),a=xh(o);let u;return u=typeof(e=Ht(e))=="string"||e instanceof Ah?uD(a,"updateDoc",n._key,e,t,i):lD(a,"updateDoc",n._key,e),Rm(o,[u.toMutation(n._key,Pr.exists(!0))])}function zE(n,e){const t=Wn(n.firestore,Ss),i=fm(n),o=VE(n.converter,e);return Rm(t,[AE(xh(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Pr.exists(!1))]).then(()=>i)}function b_(n,...e){var t,i,o;n=Ht(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||A_(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(A_(e[u])){const w=e[u];e[u]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[u+1]=(i=w.error)===null||i===void 0?void 0:i.bind(w),e[u+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let f,m,v;if(n instanceof mn)m=Wn(n.firestore,Ss),v=gh(n._key.path),f={next:w=>{e[u]&&e[u](BE(m,n,w))},error:e[u+1],complete:e[u+2]};else{const w=Wn(n,go);m=Wn(w.firestore,Ss),v=w._query;const T=new Sm(m);f={next:R=>{e[u]&&e[u](new UE(m,T,w,R))},error:e[u+1],complete:e[u+2]},NE(n._query)}return function(T,R,C,M){const b=new dm(M),U=new cm(R,b,C);return T.asyncQueue.enqueueAndForget(async()=>am(await Qc(T),U)),()=>{b.eu(),T.asyncQueue.enqueueAndForget(async()=>lm(await Qc(T),U))}}(Ch(m),v,d,f)}function Rm(n,e){return function(i,o){const a=new Ti;return i.asyncQueue.enqueueAndForget(async()=>Bx(await Zx(i),o,a)),a.promise}(Ch(n),e)}function BE(n,e,t){const i=t.docs.get(e._key),o=new Sm(n);return new FE(n,o,e._key,i,new hl(t.hasPendingWrites,t.fromCache),e.converter)}function vl(){return new vm("serverTimestamp")}(function(e,t=!0){(function(o){wa=o})(va),la(new oo("firestore",(i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Ss(new mA(i.getProvider("auth-internal")),new _A(i.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new _e(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(m.options.projectId,v)}(u,o),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),gs($v,"4.7.5",e),gs($v,"4.7.5","esm2017")})();const vD={apiKey:"AIzaSyD9k8GDXbmvoUNHcDp37-btDzaCWQ3foy0",authDomain:"chat-app-b1c95.firebaseapp.com",projectId:"chat-app-b1c95",storageBucket:"chat-app-b1c95.firebasestorage.app",messagingSenderId:"620860256772",appId:"1:620860256772:web:a3595728e608212f63bb51"},_D=Ep(vD),Xc=pm(_D),wD=async n=>{try{const e=fm(Xc,"users",n.uid);(await gD(e)).exists()?(await D_(e,{lastLogin:vl()},{merge:!0}),console.log("Час останнього входу оновлено.")):(await D_(e,{uid:n.uid,name:n.displayName||"Unknown",email:n.email,photo:n.photoURL,profilePic:n.photoURL||"",createdAt:vl(),lastLogin:vl()}),console.log("Новий користувач доданий до бази даних."))}catch(e){console.error("Помилка під час обробки користувача:",e)}};var Af={exports:{}},kf={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function ED(){if(N_)return kf;N_=1;var n=sh();function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,o=n.useRef,a=n.useEffect,u=n.useMemo,d=n.useDebugValue;return kf.useSyncExternalStoreWithSelector=function(f,m,v,w,T){var R=o(null);if(R.current===null){var C={hasValue:!1,value:null};R.current=C}else C=R.current;R=u(function(){function b(L){if(!U){if(U=!0,Z=L,L=w(L),T!==void 0&&C.hasValue){var te=C.value;if(T(te,L))return Q=te}return Q=L}if(te=Q,t(Z,L))return te;var k=w(L);return T!==void 0&&T(te,k)?(Z=L,te):(Z=L,Q=k)}var U=!1,Z,Q,X=v===void 0?null:v;return[function(){return b(m())},X===null?void 0:function(){return b(X())}]},[m,v,w,T]);var M=i(f,R[0],R[1]);return a(function(){C.hasValue=!0,C.value=M},[M]),d(M),M},kf}var O_;function TD(){return O_||(O_=1,Af.exports=ED()),Af.exports}var ID=TD();function SD(n){n()}function RD(){let n=null,e=null;return{clear(){n=null,e=null},notify(){SD(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const o=e={callback:t,next:null,prev:e};return o.prev?o.prev.next=o:n=o,function(){!i||n===null||(i=!1,o.next?o.next.prev=o.prev:e=o.prev,o.prev?o.prev.next=o.next:n=o.next)}}}}var L_={notify(){},get:()=>[]};function PD(n,e){let t,i=L_,o=0,a=!1;function u(M){v();const b=i.subscribe(M);let U=!1;return()=>{U||(U=!0,b(),w())}}function d(){i.notify()}function f(){C.onStateChange&&C.onStateChange()}function m(){return a}function v(){o++,t||(t=n.subscribe(f),i=RD())}function w(){o--,t&&o===0&&(t(),t=void 0,i.clear(),i=L_)}function T(){a||(a=!0,v())}function R(){a&&(a=!1,w())}const C={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:f,isSubscribed:m,trySubscribe:T,tryUnsubscribe:R,getListeners:()=>i};return C}var CD=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AD=CD(),kD=()=>typeof navigator<"u"&&navigator.product==="ReactNative",xD=kD(),DD=()=>AD||xD?H.useLayoutEffect:H.useEffect,bD=DD(),xf=Symbol.for("react-redux-context"),Df=typeof globalThis<"u"?globalThis:{};function ND(){if(!H.createContext)return{};const n=Df[xf]??(Df[xf]=new Map);let e=n.get(H.createContext);return e||(e=H.createContext(null),n.set(H.createContext,e)),e}var Rs=ND();function OD(n){const{children:e,context:t,serverState:i,store:o}=n,a=H.useMemo(()=>{const f=PD(o);return{store:o,subscription:f,getServerState:i?()=>i:void 0}},[o,i]),u=H.useMemo(()=>o.getState(),[o]);bD(()=>{const{subscription:f}=a;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),u!==o.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[a,u]);const d=t||Rs;return H.createElement(d.Provider,{value:a},e)}var LD=OD;function Pm(n=Rs){return function(){return H.useContext(n)}}var $E=Pm();function HE(n=Rs){const e=n===Rs?$E:Pm(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var MD=HE();function VD(n=Rs){const e=n===Rs?MD:HE(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var WE=VD(),FD=(n,e)=>n===e;function UD(n=Rs){const e=n===Rs?$E:Pm(n),t=(i,o={})=>{const{equalityFn:a=FD}=typeof o=="function"?{equalityFn:o}:o,u=e(),{store:d,subscription:f,getServerState:m}=u;H.useRef(!0);const v=H.useCallback({[i.name](T){return i(T)}}[i.name],[i]),w=ID.useSyncExternalStoreWithSelector(f.addNestedSub,d.getState,m||d.getState,v,a);return H.useDebugValue(w),w};return Object.assign(t,{withTypes:()=>t}),t}var Ei=UD();function Zt(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var jD=typeof Symbol=="function"&&Symbol.observable||"@@observable",M_=jD,bf=()=>Math.random().toString(36).substring(7).split("").join("."),zD={INIT:`@@redux/INIT${bf()}`,REPLACE:`@@redux/REPLACE${bf()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${bf()}`},Jc=zD;function Cm(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function Am(n,e,t){if(typeof n!="function")throw new Error(Zt(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Zt(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Zt(1));return t(Am)(n,e)}let i=n,o=e,a=new Map,u=a,d=0,f=!1;function m(){u===a&&(u=new Map,a.forEach((b,U)=>{u.set(U,b)}))}function v(){if(f)throw new Error(Zt(3));return o}function w(b){if(typeof b!="function")throw new Error(Zt(4));if(f)throw new Error(Zt(5));let U=!0;m();const Z=d++;return u.set(Z,b),function(){if(U){if(f)throw new Error(Zt(6));U=!1,m(),u.delete(Z),a=null}}}function T(b){if(!Cm(b))throw new Error(Zt(7));if(typeof b.type>"u")throw new Error(Zt(8));if(typeof b.type!="string")throw new Error(Zt(17));if(f)throw new Error(Zt(9));try{f=!0,o=i(o,b)}finally{f=!1}return(a=u).forEach(Z=>{Z()}),b}function R(b){if(typeof b!="function")throw new Error(Zt(10));i=b,T({type:Jc.REPLACE})}function C(){const b=w;return{subscribe(U){if(typeof U!="object"||U===null)throw new Error(Zt(11));function Z(){const X=U;X.next&&X.next(v())}return Z(),{unsubscribe:b(Z)}},[M_](){return this}}}return T({type:Jc.INIT}),{dispatch:T,subscribe:w,getState:v,replaceReducer:R,[M_]:C}}function BD(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Jc.INIT})>"u")throw new Error(Zt(12));if(typeof t(void 0,{type:Jc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zt(13))})}function qE(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const u=e[a];typeof n[u]=="function"&&(t[u]=n[u])}const i=Object.keys(t);let o;try{BD(t)}catch(a){o=a}return function(u={},d){if(o)throw o;let f=!1;const m={};for(let v=0;v<i.length;v++){const w=i[v],T=t[w],R=u[w],C=T(R,d);if(typeof C>"u")throw d&&d.type,new Error(Zt(14));m[w]=C,f=f||C!==R}return f=f||i.length!==Object.keys(u).length,f?m:u}}function Zc(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function $D(...n){return e=>(t,i)=>{const o=e(t,i);let a=()=>{throw new Error(Zt(15))};const u={getState:o.getState,dispatch:(f,...m)=>a(f,...m)},d=n.map(f=>f(u));return a=Zc(...d)(o.dispatch),{...o,dispatch:a}}}function HD(n){return Cm(n)&&"type"in n&&typeof n.type=="string"}var GE=Symbol.for("immer-nothing"),V_=Symbol.for("immer-draftable"),qn=Symbol.for("immer-state");function Sr(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var ya=Object.getPrototypeOf;function uo(n){return!!n&&!!n[qn]}function Ai(n){var e;return n?KE(n)||Array.isArray(n)||!!n[V_]||!!((e=n.constructor)!=null&&e[V_])||Oh(n)||Lh(n):!1}var WD=Object.prototype.constructor.toString();function KE(n){if(!n||typeof n!="object")return!1;const e=ya(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===WD}function eh(n,e){Nh(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,i)=>e(i,t,n))}function Nh(n){const e=n[qn];return e?e.type_:Array.isArray(n)?1:Oh(n)?2:Lh(n)?3:0}function up(n,e){return Nh(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function QE(n,e,t){const i=Nh(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function qD(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Oh(n){return n instanceof Map}function Lh(n){return n instanceof Set}function Js(n){return n.copy_||n.base_}function cp(n,e){if(Oh(n))return new Map(n);if(Lh(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=KE(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[qn];let o=Reflect.ownKeys(i);for(let a=0;a<o.length;a++){const u=o[a],d=i[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(i[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:n[u]})}return Object.create(ya(n),i)}else{const i=ya(n);if(i!==null&&t)return{...n};const o=Object.create(i);return Object.assign(o,n)}}function km(n,e=!1){return Mh(n)||uo(n)||!Ai(n)||(Nh(n)>1&&(n.set=n.add=n.clear=n.delete=GD),Object.freeze(n),e&&Object.entries(n).forEach(([t,i])=>km(i,!0))),n}function GD(){Sr(2)}function Mh(n){return Object.isFrozen(n)}var KD={};function co(n){const e=KD[n];return e||Sr(0,n),e}var xl;function YE(){return xl}function QD(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function F_(n,e){e&&(co("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function hp(n){dp(n),n.drafts_.forEach(YD),n.drafts_=null}function dp(n){n===xl&&(xl=n.parent_)}function U_(n){return xl=QD(xl,n)}function YD(n){const e=n[qn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function j_(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[qn].modified_&&(hp(e),Sr(4)),Ai(n)&&(n=th(e,n),e.parent_||nh(e,n)),e.patches_&&co("Patches").generateReplacementPatches_(t[qn].base_,n,e.patches_,e.inversePatches_)):n=th(e,t,[]),hp(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==GE?n:void 0}function th(n,e,t){if(Mh(e))return e;const i=e[qn];if(!i)return eh(e,(o,a)=>z_(n,i,e,o,a,t)),e;if(i.scope_!==n)return e;if(!i.modified_)return nh(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const o=i.copy_;let a=o,u=!1;i.type_===3&&(a=new Set(o),o.clear(),u=!0),eh(a,(d,f)=>z_(n,i,o,d,f,t,u)),nh(n,o,!1),t&&n.patches_&&co("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function z_(n,e,t,i,o,a,u){if(uo(o)){const d=a&&e&&e.type_!==3&&!up(e.assigned_,i)?a.concat(i):void 0,f=th(n,o,d);if(QE(t,i,f),uo(f))n.canAutoFreeze_=!1;else return}else u&&t.add(o);if(Ai(o)&&!Mh(o)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;th(n,o),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,i)&&nh(n,o)}}function nh(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&km(e,t)}function XD(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:YE(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=i,a=xm;t&&(o=[i],a=Dl);const{revoke:u,proxy:d}=Proxy.revocable(o,a);return i.draft_=d,i.revoke_=u,d}var xm={get(n,e){if(e===qn)return n;const t=Js(n);if(!up(t,e))return JD(n,t,e);const i=t[e];return n.finalized_||!Ai(i)?i:i===Nf(n.base_,e)?(Of(n),n.copy_[e]=pp(i,n)):i},has(n,e){return e in Js(n)},ownKeys(n){return Reflect.ownKeys(Js(n))},set(n,e,t){const i=XE(Js(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const o=Nf(Js(n),e),a=o==null?void 0:o[qn];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(qD(t,o)&&(t!==void 0||up(n.base_,e)))return!0;Of(n),fp(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return Nf(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,Of(n),fp(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Js(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){Sr(11)},getPrototypeOf(n){return ya(n.base_)},setPrototypeOf(){Sr(12)}},Dl={};eh(xm,(n,e)=>{Dl[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Dl.deleteProperty=function(n,e){return Dl.set.call(this,n,e,void 0)};Dl.set=function(n,e,t){return xm.set.call(this,n[0],e,t,n[0])};function Nf(n,e){const t=n[qn];return(t?Js(t):n)[e]}function JD(n,e,t){var o;const i=XE(e,t);return i?"value"in i?i.value:(o=i.get)==null?void 0:o.call(n.draft_):void 0}function XE(n,e){if(!(e in n))return;let t=ya(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=ya(t)}}function fp(n){n.modified_||(n.modified_=!0,n.parent_&&fp(n.parent_))}function Of(n){n.copy_||(n.copy_=cp(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var ZD=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const u=this;return function(f=a,...m){return u.produce(f,v=>t.call(this,v,...m))}}typeof t!="function"&&Sr(6),i!==void 0&&typeof i!="function"&&Sr(7);let o;if(Ai(e)){const a=U_(this),u=pp(e,void 0);let d=!0;try{o=t(u),d=!1}finally{d?hp(a):dp(a)}return F_(a,i),j_(o,a)}else if(!e||typeof e!="object"){if(o=t(e),o===void 0&&(o=e),o===GE&&(o=void 0),this.autoFreeze_&&km(o,!0),i){const a=[],u=[];co("Patches").generateReplacementPatches_(e,o,a,u),i(a,u)}return o}else Sr(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(u,...d)=>this.produceWithPatches(u,f=>e(f,...d));let i,o;return[this.produce(e,t,(u,d)=>{i=u,o=d}),i,o]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Ai(n)||Sr(8),uo(n)&&(n=eb(n));const e=U_(this),t=pp(n,void 0);return t[qn].isManual_=!0,dp(e),t}finishDraft(n,e){const t=n&&n[qn];(!t||!t.isManual_)&&Sr(9);const{scope_:i}=t;return F_(i,e),j_(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const o=e[t];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}t>-1&&(e=e.slice(t+1));const i=co("Patches").applyPatches_;return uo(n)?i(n,e):this.produce(n,o=>i(o,e))}};function pp(n,e){const t=Oh(n)?co("MapSet").proxyMap_(n,e):Lh(n)?co("MapSet").proxySet_(n,e):XD(n,e);return(e?e.scope_:YE()).drafts_.push(t),t}function eb(n){return uo(n)||Sr(10,n),JE(n)}function JE(n){if(!Ai(n)||Mh(n))return n;const e=n[qn];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=cp(n,e.scope_.immer_.useStrictShallowCopy_)}else t=cp(n,!0);return eh(t,(i,o)=>{QE(t,i,JE(o))}),e&&(e.finalized_=!1),t}var Gn=new ZD,ZE=Gn.produce;Gn.produceWithPatches.bind(Gn);Gn.setAutoFreeze.bind(Gn);Gn.setUseStrictShallowCopy.bind(Gn);Gn.applyPatches.bind(Gn);Gn.createDraft.bind(Gn);Gn.finishDraft.bind(Gn);function eT(n){return({dispatch:t,getState:i})=>o=>a=>typeof a=="function"?a(t,i,n):o(a)}var tb=eT(),nb=eT,rb=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Zc:Zc.apply(null,arguments)};function B_(n,e){function t(...i){if(e){let o=e(...i);if(!o)throw new Error(Ii(0));return{type:n,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>HD(i)&&i.type===n,t}var tT=class dl extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,dl.prototype)}static get[Symbol.species](){return dl}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new dl(...e[0].concat(this)):new dl(...e.concat(this))}};function $_(n){return Ai(n)?ZE(n,()=>{}):n}function H_(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function ib(n){return typeof n=="boolean"}var sb=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:o=!0,actionCreatorCheck:a=!0}=e??{};let u=new tT;return t&&(ib(t)?u.push(tb):u.push(nb(t.extraArgument))),u},ob="RTK_autoBatch",W_=n=>e=>{setTimeout(e,n)},ab=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let o=!0,a=!1,u=!1;const d=new Set,f=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:W_(10):n.type==="callback"?n.queueNotification:W_(n.timeout),m=()=>{u=!1,a&&(a=!1,d.forEach(v=>v()))};return Object.assign({},i,{subscribe(v){const w=()=>o&&v(),T=i.subscribe(w);return d.add(v),()=>{T(),d.delete(v)}},dispatch(v){var w;try{return o=!((w=v==null?void 0:v.meta)!=null&&w[ob]),a=!o,a&&(u||(u=!0,f(m))),i.dispatch(v)}finally{o=!0}}})},lb=n=>function(t){const{autoBatch:i=!0}=t??{};let o=new tT(n);return i&&o.push(ab(typeof i=="object"?i:void 0)),o};function ub(n){const e=sb(),{reducer:t=void 0,middleware:i,devTools:o=!0,preloadedState:a=void 0,enhancers:u=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(Cm(t))d=qE(t);else throw new Error(Ii(1));let f;typeof i=="function"?f=i(e):f=e();let m=Zc;o&&(m=rb({trace:!1,...typeof o=="object"&&o}));const v=$D(...f),w=lb(v);let T=typeof u=="function"?u(w):w();const R=m(...T);return Am(d,a,R)}function nT(n){const e={},t=[];let i;const o={addCase(a,u){const d=typeof a=="string"?a:a.type;if(!d)throw new Error(Ii(28));if(d in e)throw new Error(Ii(29));return e[d]=u,o},addMatcher(a,u){return t.push({matcher:a,reducer:u}),o},addDefaultCase(a){return i=a,o}};return n(o),[e,t,i]}function cb(n){return typeof n=="function"}function hb(n,e){let[t,i,o]=nT(e),a;if(cb(n))a=()=>$_(n());else{const d=$_(n);a=()=>d}function u(d=a(),f){let m=[t[f.type],...i.filter(({matcher:v})=>v(f)).map(({reducer:v})=>v)];return m.filter(v=>!!v).length===0&&(m=[o]),m.reduce((v,w)=>{if(w)if(uo(v)){const R=w(v,f);return R===void 0?v:R}else{if(Ai(v))return ZE(v,T=>w(T,f));{const T=w(v,f);if(T===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return T}}return v},d)}return u.getInitialState=a,u}var db=Symbol.for("rtk-slice-createasyncthunk");function fb(n,e){return`${n}/${e}`}function pb({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[db];return function(o){const{name:a,reducerPath:u=a}=o;if(!a)throw new Error(Ii(11));typeof process<"u";const d=(typeof o.reducers=="function"?o.reducers(yb()):o.reducers)||{},f=Object.keys(d),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(Q,X){const L=typeof Q=="string"?Q:Q.type;if(!L)throw new Error(Ii(12));if(L in m.sliceCaseReducersByType)throw new Error(Ii(13));return m.sliceCaseReducersByType[L]=X,v},addMatcher(Q,X){return m.sliceMatchers.push({matcher:Q,reducer:X}),v},exposeAction(Q,X){return m.actionCreators[Q]=X,v},exposeCaseReducer(Q,X){return m.sliceCaseReducersByName[Q]=X,v}};f.forEach(Q=>{const X=d[Q],L={reducerName:Q,type:fb(a,Q),createNotation:typeof o.reducers=="function"};_b(X)?Eb(L,X,v,e):vb(L,X,v)});function w(){const[Q={},X=[],L=void 0]=typeof o.extraReducers=="function"?nT(o.extraReducers):[o.extraReducers],te={...Q,...m.sliceCaseReducersByType};return hb(o.initialState,k=>{for(let S in te)k.addCase(S,te[S]);for(let S of m.sliceMatchers)k.addMatcher(S.matcher,S.reducer);for(let S of X)k.addMatcher(S.matcher,S.reducer);L&&k.addDefaultCase(L)})}const T=Q=>Q,R=new Map;let C;function M(Q,X){return C||(C=w()),C(Q,X)}function b(){return C||(C=w()),C.getInitialState()}function U(Q,X=!1){function L(k){let S=k[Q];return typeof S>"u"&&X&&(S=b()),S}function te(k=T){const S=H_(R,X,()=>new WeakMap);return H_(S,k,()=>{const P={};for(const[D,V]of Object.entries(o.selectors??{}))P[D]=mb(V,k,b,X);return P})}return{reducerPath:Q,getSelectors:te,get selectors(){return te(L)},selectSlice:L}}const Z={name:a,reducer:M,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:b,...U(u),injectInto(Q,{reducerPath:X,...L}={}){const te=X??u;return Q.inject({reducerPath:te,reducer:M},L),{...Z,...U(te,!0)}}};return Z}}function mb(n,e,t,i){function o(a,...u){let d=e(a);return typeof d>"u"&&i&&(d=t()),n(d,...u)}return o.unwrapped=n,o}var gb=pb();function yb(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function vb({type:n,reducerName:e,createNotation:t},i,o){let a,u;if("reducer"in i){if(t&&!wb(i))throw new Error(Ii(17));a=i.reducer,u=i.prepare}else a=i;o.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,u?B_(n,u):B_(n))}function _b(n){return n._reducerDefinitionType==="asyncThunk"}function wb(n){return n._reducerDefinitionType==="reducerWithPrepare"}function Eb({type:n,reducerName:e},t,i,o){if(!o)throw new Error(Ii(18));const{payloadCreator:a,fulfilled:u,pending:d,rejected:f,settled:m,options:v}=t,w=o(n,a,v);i.exposeAction(e,w),u&&i.addCase(w.fulfilled,u),d&&i.addCase(w.pending,d),f&&i.addCase(w.rejected,f),m&&i.addMatcher(w.settled,m),i.exposeCaseReducer(e,{fulfilled:u||cc,pending:d||cc,rejected:f||cc,settled:m||cc})}function cc(){}function Ii(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const rT=gb({name:"dataSlice",initialState:{userInfo:[],myMessage:[],currentUser:[]},reducers:{addUserInfo(n,e){n.userInfo=e.payload},addcurrentUser(n,e){n.currentUser=e.payload},setMyMessage(n,e){n.myMessage=e.payload}}}),{addUserInfo:Tb,addcurrentUser:Ib,setMyMessage:Sb}=rT.actions,Rb=rT.reducer,Pb={apiKey:"AIzaSyD9k8GDXbmvoUNHcDp37-btDzaCWQ3foy0",authDomain:"chat-app-b1c95.firebaseapp.com",projectId:"chat-app-b1c95",storageBucket:"chat-app-b1c95.firebasestorage.app",messagingSenderId:"620860256772",appId:"1:620860256772:web:a3595728e608212f63bb51"},Cb=Ep(Pb),Lf=Y0(Cb),Ab=new gi;function iT(){const[n,e,t]=cP(Lf),i=cw(),o=Ei(f=>f.dataSlice.userInfo),a=WE(),u=async()=>{try{await pR(Lf,Ab)}catch(f){console.error("Sign-in error:",f)}},d=async()=>{try{await KS(Lf)}catch(f){console.error("Sign-out error:",f)}};return H.useEffect(()=>{if(n){const f={displayName:n.displayName||"",photoURL:n.photoURL||"",uid:n.uid||"",email:n.email||""};wD(f),a(Tb(f))}},[n]),H.useEffect(()=>{console.log("userDataResp",o)},[o]),e?ie.jsx("p",{children:"Loading..."}):t?ie.jsxs("p",{children:["Error: ",t.message]}):ie.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:ie.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full",children:[ie.jsx("h2",{className:"text-2xl font-semibold text-gray-700 text-center mb-4",children:o?`Welcome, ${o.displayName||"User"}`:"Sign In"}),n?ie.jsxs("div",{className:"text-center space-y-4",children:[ie.jsx("img",{src:(o==null?void 0:o.photoURL)||"https://via.placeholder.com/150",alt:"User",className:"w-20 h-20 mx-auto rounded-full mb-4"}),ie.jsxs("p",{className:"text-lg text-gray-700 mb-4",children:["You are logged in as ",(o==null?void 0:o.email)||"unknown email"]}),ie.jsx("button",{className:"w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 focus:ring focus:ring-green-300",onClick:()=>i("/chefirChat/MainPage"),children:"Starts"}),ie.jsx("button",{onClick:d,className:"w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 focus:ring focus:ring-red-300",children:"Log Out"})]}):ie.jsxs("div",{className:"mt-6",children:[ie.jsx("p",{className:"text-center text-sm text-gray-600",children:"Or sign in with"}),ie.jsx("button",{onClick:u,className:"mt-4 w-full flex items-center justify-center bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 focus:ring focus:ring-red-300",children:"Google"})]})]})})}var sT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},q_=ro.createContext&&ro.createContext(sT),kb=["attr","size","title"];function xb(n,e){if(n==null)return{};var t=Db(n,e),i,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a.length;o++)i=a[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Db(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function rh(){return rh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},rh.apply(this,arguments)}function G_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function ih(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G_(Object(t),!0).forEach(function(i){bb(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G_(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function bb(n,e,t){return e=Nb(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Nb(n){var e=Ob(n,"string");return typeof e=="symbol"?e:e+""}function Ob(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function oT(n){return n&&n.map((e,t)=>ro.createElement(e.tag,ih({key:t},e.attr),oT(e.child)))}function ql(n){return e=>ro.createElement(Lb,rh({attr:ih({},n.attr)},e),oT(n.child))}function Lb(n){var e=t=>{var{attr:i,size:o,title:a}=n,u=xb(n,kb),d=o||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),ro.createElement("svg",rh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,u,{className:f,style:ih(ih({color:n.color||t.color},t.style),n.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),a&&ro.createElement("title",null,a),n.children)};return q_!==void 0?ro.createElement(q_.Consumer,null,t=>e(t)):e(sT)}function aT(n){return ql({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(n)}function K_(n){return ql({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 104c-53 0-96 43-96 96s43 96 96 96 96-43 96-96-43-96-96-96zm0 144c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm0-240C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-49.7 0-95.1-18.3-130.1-48.4 14.9-23 40.4-38.6 69.6-39.5 20.8 6.4 40.6 9.6 60.5 9.6s39.7-3.1 60.5-9.6c29.2 1 54.7 16.5 69.6 39.5-35 30.1-80.4 48.4-130.1 48.4zm162.7-84.1c-24.4-31.4-62.1-51.9-105.1-51.9-10.2 0-26 9.6-57.6 9.6-31.5 0-47.4-9.6-57.6-9.6-42.9 0-80.6 20.5-105.1 51.9C61.9 339.2 48 299.2 48 256c0-110.3 89.7-200 200-200s200 89.7 200 200c0 43.2-13.9 83.2-37.3 115.9z"},child:[]}]})(n)}function Mb(){return ie.jsx("div",{className:"w-full h-24 bg-fone flex items-center px-6",children:ie.jsxs("div",{className:"flex items-center space-x-2 ",children:[ie.jsx(aT,{className:"text-white text-2xl"}),ie.jsx("p",{className:"text-white text-2xl font-mono",children:"ChefirChat"})]})})}function Q_(n){return ql({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M87.48 380c1.2-4.38-1.43-10.47-3.94-14.86a42.63 42.63 0 0 0-2.54-3.8 199.81 199.81 0 0 1-33-110C47.64 139.09 140.72 48 255.82 48 356.2 48 440 117.54 459.57 209.85a199 199 0 0 1 4.43 41.64c0 112.41-89.49 204.93-204.59 204.93-18.31 0-43-4.6-56.47-8.37s-26.92-8.77-30.39-10.11a31.14 31.14 0 0 0-11.13-2.07 30.7 30.7 0 0 0-12.08 2.43L81.5 462.78a15.92 15.92 0 0 1-4.66 1.22 9.61 9.61 0 0 1-9.58-9.74 15.85 15.85 0 0 1 .6-3.29z"},child:[]},{tag:"circle",attr:{cx:"160",cy:"256",r:"32"},child:[]},{tag:"circle",attr:{cx:"256",cy:"256",r:"32"},child:[]},{tag:"circle",attr:{cx:"352",cy:"256",r:"32"},child:[]}]})(n)}function Y_(n){return ql({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91zM4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58A2.01 2.01 0 0 0 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29zM20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4 3.43c0-.81-.48-1.53-1.22-1.85A6.95 6.95 0 0 0 20 14c-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24v-1.57zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"},child:[]}]})(n)}function X_(n){return ql({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Menu_Burger"},child:[{tag:"path",attr:{d:"M3.563,4.063c-0.276,-0 -0.5,-0.224 -0.5,-0.5c-0,-0.276 0.224,-0.5 0.5,-0.5l16.874,-0.001c0.276,-0 0.5,0.224 0.5,0.5c0,0.276 -0.224,0.5 -0.5,0.5l-16.874,0.001Z"},child:[]},{tag:"path",attr:{d:"M3.563,12.501c-0.276,-0 -0.5,-0.224 -0.5,-0.5c-0,-0.276 0.224,-0.5 0.5,-0.5l16.874,-0.002c0.276,0 0.5,0.224 0.5,0.5c0,0.276 -0.224,0.5 -0.5,0.5l-16.874,0.002Z"},child:[]},{tag:"path",attr:{d:"M3.563,20.939c-0.276,-0 -0.5,-0.224 -0.5,-0.5c-0,-0.276 0.224,-0.5 0.5,-0.5l16.874,-0.002c0.276,0 0.5,0.224 0.5,0.5c0,0.276 -0.224,0.5 -0.5,0.5l-16.874,0.002Z"},child:[]}]}]})(n)}function Vb(){const[n,e]=H.useState(!1),t=Ei(i=>i.dataSlice.userInfo);return H.useEffect(()=>{console.log("loadingUserData",t)},[]),ie.jsxs("div",{children:[ie.jsxs("div",{className:`${n?"animate-slideInLeft left-0":"left-[-100%]"} bg-fone absolute h-screen w-52 p-4 flex flex-col justify-between transition-all duration-300`,style:{top:0},children:[ie.jsxs("div",{children:[ie.jsx("button",{onClick:()=>e(!n),className:"text-white text-3xl mb-4",children:ie.jsx(X_,{className:`transform transition-transform duration-300 ${n?"":"rotate-90"}`})}),n&&ie.jsxs("div",{className:"flex flex-col items-start space-y-1 mt-4",children:[ie.jsx("img",{src:t.photoURL||"https://via.placeholder.com/150",alt:"User",className:"w-20 h-20 rounded-full mb-4"}),ie.jsx("p",{className:"text-white font-bold text-1xl mb-4",children:t.displayName||"no name"})]}),ie.jsxs("div",{className:`space-y-4 mt-6 ${n?"block":"hidden"} font-mono`,children:[ie.jsxs("div",{className:"flex border-2 border-castomGray space-x-4 bg-castomGray rounded-[10px] p-2 items-center text-white hover:bg-castomGrayHover hover:border-fone hover:text-white",children:[ie.jsx(Q_,{className:"text-2xl mr-2"}),ie.jsx("span",{children:"Chat"})]}),ie.jsxs("div",{className:"flex border-2 border-castomGray space-x-4 bg-castomGray rounded-[10px] p-2 items-center text-white hover:bg-castomGrayHover hover:border-fone hover:text-white",children:[ie.jsx(Y_,{className:"text-2xl mr-2"}),ie.jsx("span",{children:"Groups"})]}),ie.jsxs("div",{className:"flex border-2 border-castomGray space-x-4 bg-castomGray rounded-[10px] p-2 items-center text-white hover:bg-castomGrayHover hover:border-fone hover:text-white",children:[ie.jsx(K_,{className:"text-2xl mr-2"}),ie.jsx("span",{children:"Profile"})]})]})]}),ie.jsx("div",{children:ie.jsx("button",{className:"w-full bg-red-700 text-black py-2 rounded-lg hover:bg-yellow-500 focus:ring focus:ring-yellow-300",children:"Log Out"})})]}),!n&&ie.jsx("div",{className:"bg-fone h-screen w-max p-4 flex flex-col justify-between",children:ie.jsxs("div",{children:[ie.jsx("button",{onClick:()=>e(!n),className:"text-white pl-2 text-3xl mb-4",children:ie.jsx(X_,{className:"transform transition-transform duration-300 rotate-90"})}),ie.jsxs("div",{className:"space-y-9 mt-6 text-white text-3xl mb-4",children:[ie.jsx("div",{className:"border p-2 rounded-[100%] border-fone hover:border-castomGray hover:bg-castomGray",children:ie.jsx(Q_,{})}),ie.jsx("div",{className:"border p-2 rounded-[100%] border-fone hover:border-castomGray hover:bg-castomGray",children:ie.jsx(Y_,{})}),ie.jsx("div",{className:"border p-2 rounded-[100%] border-fone hover:border-castomGray hover:bg-castomGray",children:ie.jsx(K_,{className:"text-2xl mr-2"})})]})]})})]})}const J_=pm(),Fb=(n,e)=>{if(Y0().currentUser){console.log("Починаємо шукати чати для користувача",n);const o=kl(J_,"chats"),a=OE(o,LE("participants","array-contains",n)),u=b_(a,async d=>{console.log("Знайдено чати, обробляємо...");const f=[];d.forEach(m=>{console.log("Обробляється чат з ID:",m.id);const v=m.data(),w=kl(J_,`chats/${m.id}/messages`),T=b_(w,R=>{const C=[];R.forEach(M=>{const b=M.data();C.push({text:b.text,senderId:b.senderId,timestamp:b.timestamp,name:b.name,receiverId:b.receiverId,photoUrl:b.photoUrl})}),console.log(`Знайдено ${C.length} повідомлень в чаті з ID: ${m.id}`),f.push({chatId:m.id,participants:v.participants,messages:C}),e(f),console.log("Чати передано через колбек:",f)});return()=>T()})});return()=>{console.log("Очищаємо підписку на чати"),u()}}else console.error("Користувач не авторизований")};function lT({name:n,photo:e,lastMessage:t,click:i,count:o,change:a}){return ie.jsxs("div",{className:"w-[100%] h-20 flex justify-between items-center px-4 text-gray-200",onClick:i,children:[ie.jsxs("div",{className:"flex flex-row space-x-10 items-center ",children:[ie.jsx("div",{className:"border border-white rounded-[100%] w-12 h-12",children:ie.jsx("img",{className:"border border-white rounded-[100%] w-12 h-12",src:e,alt:e})}),ie.jsxs("div",{children:[ie.jsx("p",{className:"font-[roboto] font-semibold text-xl",children:n}),ie.jsx("p",{className:"overflow-hidden whitespace-nowrap text-ellipsis w-auto",style:{maxWidth:"200px"},children:t})]})]}),a?ie.jsx("div",{children:ie.jsx(aT,{className:"text-xl"})}):ie.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[ie.jsx("p",{children:"13:12"}),ie.jsx("p",{className:"bg-green-500 px-1 rounded-[3px]",children:o})]})]})}function Ub({my:n,text:e,timestamp:t}){const i=n?"bg-green-500 text-white self-end":"bg-gray-100 text-black self-start";return ie.jsxs("div",{className:`${i} flex flex-col mt-4  p-3 max-w-[200px] rounded-[10px] font-roboto font-semibold break-words shadow-sm`,style:{wordWrap:"break-word"},children:[ie.jsx("p",{className:"mb-1",children:e}),ie.jsx("p",{className:"text-xs opacity-70 text-right",children:t})]})}const jb=async(n,e)=>{try{const t=kl(Xc,"chats"),i=OE(t,LE("participants","array-contains",n)),o=await jE(i);let a=null;if(o.forEach(u=>{u.data().participants.includes(e)&&(a=u.id)}),a)return console.log("Чат вже існує!"),a;{const u=await zE(t,{participants:[n,e],lastMessage:"",lastTimestamp:null});return console.log("Чат створено!"),u.id}}catch(t){console.error("Помилка створення чату:",t)}},zb=async(n,e,t)=>{try{const i=await jb(n,e),o=kl(Xc,`chats/${i}/messages`);await zE(o,{senderId:t.senderId,receiverId:t.receiverId||null,text:t.text,timestamp:vl(),read:!1,name:t.name,photoUrl:t.photoUrl});const a=fm(Xc,"chats",i);await yD(a,{lastMessage:t.text,lastTimestamp:vl()}),console.log("Повідомлення надіслано і чат оновлений!")}catch(i){console.error("Помилка надсилання повідомлення:",i)}};function Bb(){var v;const n=Ei(w=>w.dataSlice.myMessage),e=Ei(w=>w.dataSlice.currentUser),t=Ei(w=>w.dataSlice.userInfo),i=Ei(w=>w.dataSlice.userInfo),[o,a]=H.useState(""),[u,d]=H.useState([]),f=w=>w instanceof xt?w.toDate().toLocaleString():new Date(w).toLocaleString();H.useEffect(()=>{console.log("new",n)},[n]);const m=()=>{if(!o.trim()){alert("Please enter a message");return}if(!(e!=null&&e.Ruid)){alert("No recipient selected");return}zb(i.uid,e.Ruid,{name:i.displayName||"Anonymous",senderId:i.uid,receiverId:e.Ruid,text:o,photoUrl:i.photoURL||"",timestamp:new Date().toISOString()}),a("")};return H.useEffect(()=>{if(n&&n.messages){const w=n.messages.map(T=>T.name===t.displayName?{...T,my:!0}:T).sort((T,R)=>new Date(T.timestamp)-new Date(R.timestamp));d({...n,messages:w})}},[n]),console.log(u.messages),ie.jsxs("div",{className:"h-full flex flex-col",children:[ie.jsx("div",{className:"mt-3 p-2 rounded-[10px] overflow-auto custom-scrollbar overflow-y-scroll bg-[#111111]",style:{height:"400px"},children:u&&((v=u.messages)==null?void 0:v.map((w,T)=>ie.jsx("div",{className:`flex ${w.my?"justify-end":"justify-start"} w-full`,children:ie.jsx(Ub,{my:w.my,name:w.name,text:w.text,timestamp:f(w.timestamp)})},T)))}),ie.jsxs("div",{className:"flex space-x-3 mt-4",children:[ie.jsx("input",{value:o,onChange:w=>a(w.target.value),type:"text",placeholder:"Type your message",className:"w-full bg-[#141414] text-white font-[roboto] font-semibold rounded-[10px] px-3 py-2 outline-none focus:ring-2 focus:ring-green-500"}),ie.jsx("button",{onClick:m,className:"px-4 bg-green-500 w-20 h-12 rounded-[10px] text-white font-bold hover:bg-green-600 transition",children:"Send"})]})]})}function $b({photo:n,name:e,number:t}){return ie.jsxs("div",{className:"p-4 bg-[#101010] flex flex-col  ",children:[ie.jsxs("div",{className:"flex space-x-3",children:[ie.jsx("div",{className:"border border-white rounded-[100%] w-12 h-12",children:ie.jsx("img",{className:"border border-white rounded-[100%] w-12 h-12",src:n,alt:n})}),ie.jsxs("div",{className:"flex flex-col text-white items-start",children:[ie.jsx("p",{className:"font-[roboto] font-semibold text-xl ",children:e}),ie.jsx("p",{className:"text-gray-300",children:t})]})]}),ie.jsx("div",{className:"h-[60%]",children:ie.jsx(Bb,{})})]})}const Hb=pm();async function Wb(){try{const n=kl(Hb,"users");return(await jE(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Помилка під час отримання користувачів:",n),n}}const qb=H.forwardRef(function({close:e},t){const[i,o]=H.useState([]);return H.useEffect(()=>{Wb().then(a=>{o(a)})},[]),console.log(i),ie.jsx("div",{children:ie.jsx("dialog",{ref:t,children:ie.jsxs("div",{className:"h-[600px] bg-fone  w-[500px]",children:[ie.jsx("button",{onClick:e,className:"text-3xl text-white p-5",children:"x"}),ie.jsx("div",{children:i.map(a=>ie.jsx(lT,{change:!0,name:a.name,photo:a.photo}))})]})})})}),Gb="default-photo-url.jpg",Kb=n=>n.map(e=>({...e,timestamp:e.timestamp instanceof xt?e.timestamp.toDate().toISOString():e.timestamp}));function Qb(){const n=Ei(C=>C.dataSlice.userInfo),[e,t]=H.useState([]),[i,o]=H.useState(null),a=WE(),[u,d]=H.useState(""),f=H.useRef(null),m=Ei(C=>C.dataSlice.currentUser),v=Ei(C=>C.dataSlice.myMessage);H.useEffect(()=>{n!=null&&n.uid&&Fb(n.uid,t)},[n]),H.useEffect(()=>{console.log("currentMessage",v)},[v]);const w=(C,M)=>{a(Ib(C)),d(M)};H.useEffect(()=>{const C=e.find(M=>M.chatId===u);if(C){const M=Kb(C.messages);a(Sb({...C,messages:M})),o({...C,messages:M})}else console.error("Chat not found for chatID:",u);console.log("sel",C)},[u,e]);const T=e.map(C=>{var U,Z;const M=(Z=(U=C.messages)==null?void 0:U.filter(Q=>Q.senderId!==n.uid))==null?void 0:Z.sort((Q,X)=>new Date(X.timestamp)-new Date(Q.timestamp)),b=M==null?void 0:M[0];return b?{...b,chatId:C.chatId,messageCount:M.length,photoURL:C.photoURL||Gb}:null}).filter(Boolean);function R(C){C===!0?f.current.showModal():C===!1&&f.current.close()}return T.reduce((C,M)=>C+M.messageCount,0),console.log("fls",T),ie.jsxs("div",{className:"w-full h-screen bg-[#111111] flex flex-row",children:[ie.jsxs("div",{className:"w-full md:w-1/2 h-screen flex flex-col space-y-4 overflow-auto custom-scrollbar overflow-y-scroll text-white p-4 items-center",children:[T.map(C=>ie.jsx(lT,{count:C.messageCount,photo:C.photoURL,name:C.name,lastMessage:C.text,chatId:C.chatId,click:()=>w({name:n.displayName,Ruid:C.senderId},C.chatId)},C.chatId)),ie.jsx("button",{onClick:()=>R(!0),className:"w-[90%] py-2 rounded-[10px] text-black font-[roboto] text-xl hover:bg-gray-100 bg-gray-200",children:"find Chat +"}),ie.jsx(qb,{ref:f,close:()=>R(!1)})]}),ie.jsx("div",{className:"w-1/2 hidden md:block",children:ie.jsx($b,{name:m.name})})]})}function Yb(){return ie.jsxs("div",{className:"flex flex-row relative",children:[ie.jsx(Vb,{}),ie.jsx(Qb,{})]})}const Xb=ZC([{path:"/chefirChat/MainPage",element:ie.jsx(Yb,{})},{path:"/chefirChat",element:ie.jsx(iT,{})}]);function Jb(){return ie.jsxs("div",{className:"bg-fone",children:[ie.jsx(Mb,{}),ie.jsx(dA,{router:Xb,children:ie.jsx(iT,{})})]})}var Dm="persist:",uT="persist/FLUSH",bm="persist/REHYDRATE",cT="persist/PAUSE",hT="persist/PERSIST",dT="persist/PURGE",fT="persist/REGISTER",Zb=-1;function Pc(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pc=function(t){return typeof t}:Pc=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pc(n)}function Z_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function eN(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Z_(t,!0).forEach(function(i){tN(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Z_(t).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function tN(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nN(n,e,t,i){i.debug;var o=eN({},t);return n&&Pc(n)==="object"&&Object.keys(n).forEach(function(a){a!=="_persist"&&e[a]===t[a]&&(o[a]=n[a])}),o}function rN(n){var e=n.blacklist||null,t=n.whitelist||null,i=n.transforms||[],o=n.throttle||0,a="".concat(n.keyPrefix!==void 0?n.keyPrefix:Dm).concat(n.key),u=n.storage,d;n.serialize===!1?d=function(L){return L}:typeof n.serialize=="function"?d=n.serialize:d=iN;var f=n.writeFailHandler||null,m={},v={},w=[],T=null,R=null,C=function(L){Object.keys(L).forEach(function(te){U(te)&&m[te]!==L[te]&&w.indexOf(te)===-1&&w.push(te)}),Object.keys(m).forEach(function(te){L[te]===void 0&&U(te)&&w.indexOf(te)===-1&&m[te]!==void 0&&w.push(te)}),T===null&&(T=setInterval(M,o)),m=L};function M(){if(w.length===0){T&&clearInterval(T),T=null;return}var X=w.shift(),L=i.reduce(function(te,k){return k.in(te,X,m)},m[X]);if(L!==void 0)try{v[X]=d(L)}catch(te){console.error("redux-persist/createPersistoid: error serializing state",te)}else delete v[X];w.length===0&&b()}function b(){Object.keys(v).forEach(function(X){m[X]===void 0&&delete v[X]}),R=u.setItem(a,d(v)).catch(Z)}function U(X){return!(t&&t.indexOf(X)===-1&&X!=="_persist"||e&&e.indexOf(X)!==-1)}function Z(X){f&&f(X)}var Q=function(){for(;w.length!==0;)M();return R||Promise.resolve()};return{update:C,flush:Q}}function iN(n){return JSON.stringify(n)}function sN(n){var e=n.transforms||[],t="".concat(n.keyPrefix!==void 0?n.keyPrefix:Dm).concat(n.key),i=n.storage;n.debug;var o;return n.deserialize===!1?o=function(u){return u}:typeof n.deserialize=="function"?o=n.deserialize:o=oN,i.getItem(t).then(function(a){if(a)try{var u={},d=o(a);return Object.keys(d).forEach(function(f){u[f]=e.reduceRight(function(m,v){return v.out(m,f,d)},o(d[f]))}),u}catch(f){throw f}else return})}function oN(n){return JSON.parse(n)}function aN(n){var e=n.storage,t="".concat(n.keyPrefix!==void 0?n.keyPrefix:Dm).concat(n.key);return e.removeItem(t,lN)}function lN(n){}function e0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function mi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?e0(t,!0).forEach(function(i){uN(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):e0(t).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function uN(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cN(n,e){if(n==null)return{};var t=hN(n,e),i,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(o=0;o<a.length;o++)i=a[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function hN(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,a;for(a=0;a<i.length;a++)o=i[a],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}var dN=5e3;function fN(n,e){var t=n.version!==void 0?n.version:Zb;n.debug;var i=n.stateReconciler===void 0?nN:n.stateReconciler,o=n.getStoredState||sN,a=n.timeout!==void 0?n.timeout:dN,u=null,d=!1,f=!0,m=function(w){return w._persist.rehydrated&&u&&!f&&u.update(w),w};return function(v,w){var T=v||{},R=T._persist,C=cN(T,["_persist"]),M=C;if(w.type===hT){var b=!1,U=function(S,P){b||(w.rehydrate(n.key,S,P),b=!0)};if(a&&setTimeout(function(){!b&&U(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(n.key,'"')))},a),f=!1,u||(u=rN(n)),R)return mi({},e(M,w),{_persist:R});if(typeof w.rehydrate!="function"||typeof w.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return w.register(n.key),o(n).then(function(k){var S=n.migrate||function(P,D){return Promise.resolve(P)};S(k,t).then(function(P){U(P)},function(P){U(void 0,P)})},function(k){U(void 0,k)}),mi({},e(M,w),{_persist:{version:t,rehydrated:!1}})}else{if(w.type===dT)return d=!0,w.result(aN(n)),mi({},e(M,w),{_persist:R});if(w.type===uT)return w.result(u&&u.flush()),mi({},e(M,w),{_persist:R});if(w.type===cT)f=!0;else if(w.type===bm){if(d)return mi({},M,{_persist:mi({},R,{rehydrated:!0})});if(w.key===n.key){var Z=e(M,w),Q=w.payload,X=i!==!1&&Q!==void 0?i(Q,v,Z,n):Z,L=mi({},X,{_persist:mi({},R,{rehydrated:!0})});return m(L)}}}if(!R)return e(v,w);var te=e(M,w);return te===M?v:m(mi({},te,{_persist:R}))}}function t0(n){return gN(n)||mN(n)||pN()}function pN(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function mN(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function gN(n){if(Array.isArray(n)){for(var e=0,t=new Array(n.length);e<n.length;e++)t[e]=n[e];return t}}function n0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function mp(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?n0(t,!0).forEach(function(i){yN(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):n0(t).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function yN(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var pT={registry:[],bootstrapped:!1},vN=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pT,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fT:return mp({},e,{registry:[].concat(t0(e.registry),[t.key])});case bm:var i=e.registry.indexOf(t.key),o=t0(e.registry);return o.splice(i,1),mp({},e,{registry:o,bootstrapped:o.length===0});default:return e}};function _N(n,e,t){var i=Am(vN,pT,void 0),o=function(f){i.dispatch({type:fT,key:f})},a=function(f,m,v){var w={type:bm,payload:m,err:v,key:f};n.dispatch(w),i.dispatch(w)},u=mp({},i,{purge:function(){var f=[];return n.dispatch({type:dT,result:function(v){f.push(v)}}),Promise.all(f)},flush:function(){var f=[];return n.dispatch({type:uT,result:function(v){f.push(v)}}),Promise.all(f)},pause:function(){n.dispatch({type:cT})},persist:function(){n.dispatch({type:hT,register:o,rehydrate:a})}});return u.persist(),u}var ol={},hc={},dc={},r0;function wN(){if(r0)return dc;r0=1,dc.__esModule=!0,dc.default=o;function n(a){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(d){return typeof d}:n=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},n(a)}function e(){}var t={getItem:e,setItem:e,removeItem:e};function i(a){if((typeof self>"u"?"undefined":n(self))!=="object"||!(a in self))return!1;try{var u=self[a],d="redux-persist ".concat(a," test");u.setItem(d,"test"),u.getItem(d),u.removeItem(d)}catch{return!1}return!0}function o(a){var u="".concat(a,"Storage");return i(u)?self[u]:t}return dc}var i0;function EN(){if(i0)return hc;i0=1,hc.__esModule=!0,hc.default=t;var n=e(wN());function e(i){return i&&i.__esModule?i:{default:i}}function t(i){var o=(0,n.default)(i);return{getItem:function(u){return new Promise(function(d,f){d(o.getItem(u))})},setItem:function(u,d){return new Promise(function(f,m){f(o.setItem(u,d))})},removeItem:function(u){return new Promise(function(d,f){d(o.removeItem(u))})}}}return hc}var s0;function TN(){if(s0)return ol;s0=1,ol.__esModule=!0,ol.default=void 0;var n=e(EN());function e(i){return i&&i.__esModule?i:{default:i}}var t=(0,n.default)("local");return ol.default=t,ol}var IN=TN();const SN=o0(IN),RN={key:"root",storage:SN},PN=qE({dataSlice:Rb}),CN=fN(RN,PN),mT=ub({reducer:CN}),AN=_N(mT);function Cc(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Cc=function(t){return typeof t}:Cc=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cc(n)}function kN(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function xN(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function DN(n,e,t){return e&&xN(n.prototype,e),n}function bN(n,e){return e&&(Cc(e)==="object"||typeof e=="function")?e:Ac(n)}function gp(n){return gp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gp(n)}function Ac(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function NN(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&yp(n,e)}function yp(n,e){return yp=Object.setPrototypeOf||function(i,o){return i.__proto__=o,i},yp(n,e)}function kc(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var gT=function(n){NN(e,n);function e(){var t,i;kN(this,e);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return i=bN(this,(t=gp(e)).call.apply(t,[this].concat(a))),kc(Ac(i),"state",{bootstrapped:!1}),kc(Ac(i),"_unsubscribe",void 0),kc(Ac(i),"handlePersistorState",function(){var d=i.props.persistor,f=d.getState(),m=f.bootstrapped;m&&(i.props.onBeforeLift?Promise.resolve(i.props.onBeforeLift()).finally(function(){return i.setState({bootstrapped:!0})}):i.setState({bootstrapped:!0}),i._unsubscribe&&i._unsubscribe())}),i}return DN(e,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),e}(H.PureComponent);kc(gT,"defaultProps",{children:null,loading:null});C1.createRoot(document.getElementById("root")).render(ie.jsx(LD,{store:mT,children:ie.jsx(gT,{loading:null,persistor:AN,children:ie.jsx(Jb,{})})}));
